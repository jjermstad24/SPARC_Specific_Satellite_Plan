

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>orbitpy.mission &mdash; OrbitPy 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> OrbitPy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../miscellaneous.html">Miscellaneous</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OrbitPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>orbitpy.mission</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for orbitpy.mission</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot; </span>
<span class="sd">.. module:: mission</span>

<span class="sd">:synopsis: *Module to handle mission initialization and execution.*</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>

<span class="kn">from</span> <span class="nn">instrupy.util</span> <span class="kn">import</span> <span class="n">Entity</span>
<span class="kn">from</span> <span class="nn">instrupy.base</span> <span class="kn">import</span> <span class="n">Instrument</span>
<span class="kn">import</span> <span class="nn">propcov</span>

<span class="kn">import</span> <span class="nn">orbitpy.util</span>
<span class="kn">from</span> <span class="nn">orbitpy.util</span> <span class="kn">import</span> <span class="n">Spacecraft</span><span class="p">,</span> <span class="n">GroundStation</span><span class="p">,</span> <span class="n">SpacecraftBus</span><span class="p">,</span> <span class="n">OutputInfoUtility</span><span class="p">,</span> <span class="n">OrbitState</span>
<span class="kn">from</span> <span class="nn">orbitpy.constellation</span> <span class="kn">import</span> <span class="n">ConstellationFactory</span>
<span class="kn">import</span> <span class="nn">orbitpy.propagator</span>
<span class="kn">import</span> <span class="nn">orbitpy.grid</span>
<span class="kn">from</span> <span class="nn">orbitpy.propagator</span> <span class="kn">import</span> <span class="n">PropagatorFactory</span><span class="p">,</span> <span class="n">PropagatorOutputInfo</span>
<span class="kn">from</span> <span class="nn">orbitpy.coveragecalculator</span> <span class="kn">import</span> <span class="n">GridCoverage</span><span class="p">,</span> <span class="n">PointingOptionsCoverage</span><span class="p">,</span> <span class="n">PointingOptionsWithGridCoverage</span><span class="p">,</span> <span class="n">CoverageOutputInfo</span>
<span class="kn">from</span> <span class="nn">orbitpy.datametricscalculator</span> <span class="kn">import</span> <span class="n">DataMetricsCalculator</span><span class="p">,</span> <span class="n">AccessFileInfo</span><span class="p">,</span> <span class="n">DataMetricsOutputInfo</span>
<span class="kn">from</span> <span class="nn">orbitpy.contactfinder</span> <span class="kn">import</span> <span class="n">ContactFinder</span><span class="p">,</span> <span class="n">ContactFinderOutputInfo</span>
<span class="kn">from</span> <span class="nn">orbitpy.eclipsefinder</span> <span class="kn">import</span> <span class="n">EclipseFinder</span><span class="p">,</span> <span class="n">EclipseFinderOutputInfo</span>
<span class="kn">from</span> <span class="nn">orbitpy.grid</span> <span class="kn">import</span> <span class="n">Grid</span><span class="p">,</span> <span class="n">GridOutputInfo</span>

<div class="viewcode-block" id="Settings"><a class="viewcode-back" href="../../generated/orbitpy.mission.Settings.html#orbitpy.mission.Settings">[docs]</a><span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Data container of the mission settings.</span>

<span class="sd">    :ivar outDir: Output directory path.</span>
<span class="sd">    :vartype outDir: str </span>

<span class="sd">    :ivar coverageType: Type of coverage calculation. </span>
<span class="sd">    :vartype coverageType: str or None</span>

<span class="sd">    :ivar propTimeResFactor: Factor which influences the propagation step-size calculation. See :class:`orbitpy.propagator.compute_time_step`.</span>
<span class="sd">    :vartype propTimeResFactor: float</span>

<span class="sd">    :ivar gridResFactor: Factor which influences the grid-resolution of an auto-generated grid. See :class:`orbitpy.grid.compute_grid_res`. </span>
<span class="sd">    :vartype gridResFactor: float</span>

<span class="sd">    :ivar opaqueAtmosHeight: Relevant in-case of inter-satellite communications. Height of atmosphere (in kilometers) below which line-of-sight </span>
<span class="sd">                                    communication between two satellites **cannot** take place. Default value is 0 km.</span>
<span class="sd">    :vartype opaqueAtmosHeight: float</span>

<span class="sd">    :ivar midAccessOnly: Flag to have only the access-times at the middle of access-intervals. The flag is set to `True` when coverage calculations are done for narrow FOV instruments </span>
<span class="sd">                         like SAR or pushbroom-optical sensors using a sceneFOV (or FOR defined by a sceneFOV). See :ref:`correction_of_access_files`.</span>
<span class="sd">    :vartype midAccessOnly: bool</span>

<span class="sd">    :ivar _id: Unique identifier of the settings object.</span>
<span class="sd">    :vartype _id: int/ str</span>

<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="Settings.__init__"><a class="viewcode-back" href="../../generated/orbitpy.mission.Settings.html#orbitpy.mission.Settings.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outDir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">coverageType</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">propTimeResFactor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">gridResFactor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opaqueAtmosHeight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">midAccessOnly</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outDir</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">outDir</span><span class="p">)</span> <span class="k">if</span> <span class="n">outDir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coverageType</span> <span class="o">=</span> <span class="n">coverageType</span> <span class="k">if</span> <span class="n">coverageType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">propTimeResFactor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">propTimeResFactor</span><span class="p">)</span> <span class="k">if</span> <span class="n">propTimeResFactor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gridResFactor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">gridResFactor</span><span class="p">)</span> <span class="k">if</span> <span class="n">gridResFactor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">opaqueAtmosHeight</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">opaqueAtmosHeight</span><span class="p">)</span> <span class="k">if</span> <span class="n">opaqueAtmosHeight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midAccessOnly</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">midAccessOnly</span><span class="p">)</span> <span class="k">if</span> <span class="n">midAccessOnly</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Settings</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;Settings&quot;</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Settings.from_dict"><a class="viewcode-back" href="../../generated/orbitpy.mission.Settings.html#orbitpy.mission.Settings.from_dict">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Parses an Settings object from a normalized JSON dictionary.</span>

<span class="sd">        :param d: Dictionary with the Settings specifications.</span>
<span class="sd">        </span>
<span class="sd">        Following dictionary keys are expected:</span>
<span class="sd">        </span>
<span class="sd">        * outDir: Output directory path. Default is the location of the current directory.</span>
<span class="sd">        * coverageType: Type of coverage calculation. Default value is ``None``.</span>
<span class="sd">        * propTimeResFactor: Factor which influences the propagation step-size calculation. See :class:`orbitpy.propagator.compute_time_step`. Default value is 0.25.</span>
<span class="sd">        * gridResFactor: Factor which influences the grid-resolution of an auto-generated grid. See :class:`orbitpy.grid.compute_grid_res`. Default value is 0.9.</span>
<span class="sd">        * opaqueAtmosHeight: Relevant in-case of inter-satellite communications. Height of atmosphere (in kilometers) below which line-of-sight communication between two satellites **cannot** take place. Default value is 0 km.</span>
<span class="sd">        * midAccessOnly: Flag to have only the access-times at the middle of access-intervals. The flag is set to `True` when coverage calculations are done for narrow FOV instruments like SAR or pushbroom-optical sensors using a sceneFOV (or FOR defined by a sceneFOV). See :ref:`correction_of_access_files`.</span>
<span class="sd">        * @id: Unique identifier. Default is ``None``.</span>

<span class="sd">        :paramtype d: dict</span>

<span class="sd">        :return: Settings object.</span>
<span class="sd">        :rtype: :class:`orbitpy.mission.Settings`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Settings</span><span class="p">(</span> <span class="n">outDir</span><span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;outDir&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))),</span> <span class="c1"># current directory as default</span>
                         <span class="n">coverageType</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;coverageType&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                         <span class="n">propTimeResFactor</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;propTimeResFactor&#39;</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">),</span> <span class="c1"># default value is 0.25</span>
                         <span class="n">gridResFactor</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gridResFactor&#39;</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),</span> <span class="c1"># default value is 0.9</span>
                         <span class="n">opaqueAtmosHeight</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;opaqueAtmosHeight&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="c1"># default value is 0</span>
                         <span class="n">midAccessOnly</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;midAccessOnly&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="c1"># default value is False</span>
                         <span class="n">_id</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;@id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                        <span class="p">)</span>                        </div>
        
<div class="viewcode-block" id="Settings.to_dict"><a class="viewcode-back" href="../../generated/orbitpy.mission.Settings.html#orbitpy.mission.Settings.to_dict">[docs]</a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Translate the ``Settings`` object to a Python dictionary such that it can be uniquely reconstructed back from the dictionary.</span>
<span class="sd">        </span>
<span class="sd">        :return: ``Settings`` object as python dictionary.</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">({</span><span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;Settings&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;outDir&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">outDir</span><span class="p">,</span>
                     <span class="s2">&quot;coverageType&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">coverageType</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">coverageType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="s2">&quot;propTimeResFactor&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">propTimeResFactor</span><span class="p">,</span>                     
                     <span class="s2">&quot;gridResFactor&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">gridResFactor</span><span class="p">,</span>
                     <span class="s2">&quot;opaqueAtmosHeight&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">opaqueAtmosHeight</span><span class="p">,</span>
                     <span class="s2">&quot;midAccessOnly&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">midAccessOnly</span><span class="p">,</span>
                     <span class="s2">&quot;@id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">})</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Settings.from_dict(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
    
    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="c1"># Equality test is simple one which compares the data attributes. Note that _id data attribute may be different.</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)):</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outDir</span><span class="o">==</span><span class="n">other</span><span class="o">.</span><span class="n">outDir</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coverageType</span><span class="o">==</span><span class="n">other</span><span class="o">.</span><span class="n">coverageType</span><span class="p">)</span> \
                    <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">propTimeResFactor</span><span class="o">==</span><span class="n">other</span><span class="o">.</span><span class="n">propTimeResFactor</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gridResFactor</span><span class="o">==</span><span class="n">other</span><span class="o">.</span><span class="n">gridResFactor</span><span class="p">)</span> \
                        <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">opaqueAtmosHeight</span><span class="o">==</span><span class="n">other</span><span class="o">.</span><span class="n">opaqueAtmosHeight</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">midAccessOnly</span><span class="o">==</span><span class="n">other</span><span class="o">.</span><span class="n">midAccessOnly</span><span class="p">)</span>                  
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span></div>

<div class="viewcode-block" id="Mission"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission">[docs]</a><span class="k">class</span> <span class="nc">Mission</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Class to handle mission initialization and execution.</span>

<span class="sd">    Usage: </span>
<span class="sd">    </span>
<span class="sd">    .. code-block:: python</span>
<span class="sd">        </span>
<span class="sd">        mission = orbitpy.Mission.from_json(mission_json_str)</span>
<span class="sd">        mission.execute()</span>

<span class="sd">    :ivar startDate: Mission epoch in Julian Date UT1.</span>
<span class="sd">    :vartype startDate: float</span>

<span class="sd">    :ivar duration: Mission duration in days.</span>
<span class="sd">    :vartype duration: float    </span>

<span class="sd">    :ivar spacecraft: List of spacecraft in the mission.</span>
<span class="sd">    :vartype spacecraft: list, :class:`orbitpy.util.Spacecraft`</span>

<span class="sd">    :ivar propagator: Orbit propagator.</span>
<span class="sd">    :vartype propagator: :class:`orbitpy.propagator.J2AnalyticalPropagator`</span>

<span class="sd">    :ivar grid: List of grid objects to be used in case of coverage calculations.</span>
<span class="sd">    :vartype grid: list, :class:`orbitpy.grid.Grid` or None</span>

<span class="sd">    :ivar groundStation: List of ground-stations in the mission.</span>
<span class="sd">    :vartype groundStation: list, :class:`orbitpy.util.GroundStation` or None</span>

<span class="sd">    :ivar settings: Mission settings. Refer to the ``Settings.from_dict(.)`` method for the default values.</span>
<span class="sd">    :vartype settings: :class:`orbitpy.mission.settings`</span>

<span class="sd">    :ivar outputInfo: List of output-info objects produced after execution of a OrbitPy function, e.g. :class:`orbitpy.propagator.PropagatorOutputInfo`, :class:`orbitpy.propagator.ContactFinderOutputInfo`, etc. </span>
<span class="sd">    :vartype outputInfo: list, output-info object</span>

<span class="sd">    :ivar _id: Unique identifier.</span>
<span class="sd">    :vartype _id: str</span>

<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="Mission.__init__"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">epoch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">spacecraft</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">propagator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">grid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">groundStation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">outputInfo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epoch</span> <span class="o">=</span> <span class="n">epoch</span> <span class="k">if</span> <span class="n">epoch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">epoch</span><span class="p">,</span> <span class="n">propcov</span><span class="o">.</span><span class="n">AbsoluteDate</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span> <span class="k">if</span> <span class="n">duration</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">initialize_object_list</span><span class="p">(</span><span class="n">spacecraft</span><span class="p">,</span> <span class="n">Spacecraft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">propagator</span> <span class="o">=</span> <span class="n">propagator</span> <span class="k">if</span> <span class="n">propagator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">initialize_object_list</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">Grid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groundStation</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">initialize_object_list</span><span class="p">(</span><span class="n">groundStation</span><span class="p">,</span> <span class="n">GroundStation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">settings</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">Settings</span><span class="p">)</span> <span class="k">else</span> <span class="n">Settings</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({})</span>
        <span class="c1"># Make sure self.outputInfo is a list. Each element of the list could be a different object instance.</span>
        <span class="c1"># TODO: check the individual elements of the outputInfo list are of valid class-types. </span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">outputInfo</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">outputInfo</span>
        <span class="k">elif</span> <span class="n">outputInfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="p">[</span><span class="n">outputInfo</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Mission</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;Mission&quot;</span><span class="p">)</span>           </div>

<div class="viewcode-block" id="Mission.from_dict"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.from_dict">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parses an ``Mission`` object from a normalized JSON dictionary.</span>
<span class="sd">        </span>
<span class="sd">        :param d: Dictionary with the mission specifications.</span>
<span class="sd">        :paramtype d: dict</span>

<span class="sd">        :return: ``Mission`` object.</span>
<span class="sd">        :rtype: :class:`orbitpy.mission.Mission`</span>

<span class="sd">        .. note:: *Either* of the ``constellation``, ``instrument`` json objects or the ``spacecraft`` json object should be provided in the mission specifications. Both should not be specified.</span>

<span class="sd">        .. note:: The valid key/value pairs in building the mission specifications json/ dict is identical to the key/value pairs expected in the obtaining</span>
<span class="sd">                the corresponding OrbitPy objects using the ``from_dict`` or ``from_json`` function. </span>
<span class="sd">        </span>
<span class="sd">        .. note:: The propagation time step-size if not specified is calculated from the list of available spacecraft and propagation time-resolution factor. </span>
<span class="sd">                    If no spacecraft, 60s is the assumed step-size.</span>
<span class="sd">        </span>
<span class="sd">        .. note:: The grid-resolution if not specified is calculated from the list of available spacecraft and grid-resolution factor. </span>
<span class="sd">                    If no spacecraft, 1 deg grid-resolution is assumed.</span>


<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">date_dict</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;epoch&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;epoch&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{</span><span class="s2">&quot;@type&quot;</span><span class="p">:</span><span class="s2">&quot;JULIAN_DATE_UT1&quot;</span><span class="p">,</span> <span class="s2">&quot;jd&quot;</span><span class="p">:</span><span class="mf">2459270.5</span><span class="p">}</span> <span class="c1"># 25 Feb 2021 0:0:0 default startDate</span>
        <span class="n">epoch</span> <span class="o">=</span> <span class="n">OrbitState</span><span class="o">.</span><span class="n">date_from_dict</span><span class="p">(</span><span class="n">date_dict</span><span class="p">)</span> 

        <span class="c1"># parse settings            </span>
        <span class="n">settings_dict</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;settings&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="k">if</span>  <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;settings&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">settings_dict</span><span class="p">)</span>

        <span class="c1"># parse spacecraft(s) </span>
        <span class="n">custom_spc_dict</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;spacecraft&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">constel_dict</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;constellation&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">custom_spc_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">spacecraft</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">dictionary_list_to_object_list</span><span class="p">(</span><span class="n">custom_spc_dict</span><span class="p">,</span> <span class="n">Spacecraft</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">constel_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">factory</span> <span class="o">=</span> <span class="n">ConstellationFactory</span><span class="p">()</span>        
            <span class="n">constel</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="n">get_constellation_model</span><span class="p">(</span><span class="n">constel_dict</span><span class="p">)</span>
            <span class="n">orbits</span> <span class="o">=</span> <span class="n">constel</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">constel_dict</span><span class="p">)</span><span class="o">.</span><span class="n">generate_orbits</span><span class="p">()</span>
            
            <span class="c1"># one common spacecraft-bus specifications can be expected to be defined for all the satellites in the constellation</span>
            <span class="n">spc_bus_dict</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;spacecraftBus&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">spc_bus</span> <span class="o">=</span> <span class="n">SpacecraftBus</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">spc_bus_dict</span><span class="p">)</span> <span class="k">if</span> <span class="n">spc_bus_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="c1"># list of instrument specifications could be present, in which case all the instruments in the list are attached to all the </span>
            <span class="c1"># spacecraft in the constellation.</span>
            <span class="n">instru_dict</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instrument&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">instru_dict</span><span class="p">:</span>
                <span class="n">instru_list</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">dictionary_list_to_object_list</span><span class="p">(</span><span class="n">instru_dict</span><span class="p">,</span> <span class="n">Instrument</span><span class="p">)</span> <span class="c1"># list of instruments</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">instru_list</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">spacecraft</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">orb</span> <span class="ow">in</span> <span class="n">orbits</span><span class="p">:</span>
                <span class="n">spacecraft</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Spacecraft</span><span class="p">(</span><span class="n">orbitState</span><span class="o">=</span><span class="n">orb</span><span class="p">,</span> <span class="n">spacecraftBus</span><span class="o">=</span><span class="n">spc_bus</span><span class="p">,</span> <span class="n">instrument</span><span class="o">=</span><span class="n">instru_list</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="s1">&#39;spc_&#39;</span><span class="o">+</span><span class="n">orb</span><span class="o">.</span><span class="n">_id</span><span class="p">))</span> <span class="c1"># note the assignment of the spacecraft-id</span>

        <span class="c1"># parse propagator</span>
        <span class="n">factory</span> <span class="o">=</span> <span class="n">PropagatorFactory</span><span class="p">()</span>
        <span class="c1"># Compute step-size</span>
        <span class="k">if</span> <span class="n">spacecraft</span><span class="p">:</span>
            <span class="n">time_step</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">propagator</span><span class="o">.</span><span class="n">compute_time_step</span><span class="p">(</span><span class="n">spacecraft</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">propTimeResFactor</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">time_step</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="c1"># default to J2 Analytical propagator and time-step as calculated before </span>
        <span class="n">prop_dict</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;propagator&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;propagator&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{</span><span class="s1">&#39;@type&#39;</span><span class="p">:</span> <span class="s1">&#39;J2 ANALYTICAL PROPAGATOR&#39;</span><span class="p">,</span> <span class="s1">&#39;stepSize&#39;</span><span class="p">:</span> <span class="n">time_step</span><span class="p">}</span> 
        <span class="k">if</span> <span class="n">prop_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;stepSize&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># i.e. user has not specified step-size</span>
            <span class="n">prop_dict</span><span class="p">[</span><span class="s2">&quot;stepSize&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time_step</span> <span class="c1"># use the autocalculate step-size</span>
        <span class="k">if</span> <span class="n">prop_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;stepSize&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">time_step</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;User given step-size is greater than auto calculated step-size.&#39;</span><span class="p">)</span>
        <span class="n">propagator</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="n">get_propagator</span><span class="p">(</span><span class="n">prop_dict</span><span class="p">)</span> 

        <span class="c1"># parse grid        </span>
        <span class="n">grid_dict</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;grid&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> 
        <span class="k">if</span> <span class="n">grid_dict</span><span class="p">:</span>
            <span class="c1"># make into list of dictionaries if not already list</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">grid_dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">grid_dict</span> <span class="o">=</span> <span class="p">[</span><span class="n">grid_dict</span><span class="p">]</span>
            <span class="c1"># iterate through the list of grids</span>
            <span class="n">grid</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">gd</span> <span class="ow">in</span> <span class="n">grid_dict</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">((</span><span class="n">gd</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;@type&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;autogrid&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gridRes&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)):</span>
                    <span class="c1"># calculate grid resolution factor</span>
                    <span class="k">if</span> <span class="n">spacecraft</span><span class="p">:</span>
                        <span class="n">gridRes</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">compute_grid_res</span><span class="p">(</span><span class="n">spacecraft</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">gridResFactor</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">gridRes</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">gridRes</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># 1 deg grid-resolution in case of no spacecraft.</span>
                    <span class="n">gd</span><span class="p">[</span><span class="s1">&#39;gridRes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gridRes</span>

                <span class="n">grid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Grid</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">gd</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">grid</span> <span class="o">=</span> <span class="kc">None</span>        
        
        <span class="n">outputInfo</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># list of outputInfo objects</span>
        <span class="k">if</span> <span class="n">grid</span><span class="p">:</span> <span class="c1"># Save auto-grids to files. If custom-grid, then file already exists and is not re-written.</span>
            <span class="k">for</span> <span class="n">indx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">grid</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">indx</span><span class="p">]</span><span class="o">.</span><span class="n">filepath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># must be an auto-grid configuration, so filepath instance variable is None</span>
                    <span class="n">fp</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">outDir</span> <span class="o">+</span> <span class="s1">&#39;/grid&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">indx</span><span class="p">)</span>  <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span> <span class="c1"># save the file with name according to the index. TODO: check that there is no-conflict with an custom-grid file.</span>
                    <span class="n">oi</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="n">indx</span><span class="p">]</span><span class="o">.</span><span class="n">write_to_file</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
                    <span class="n">outputInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">oi</span><span class="p">)</span>

        <span class="c1"># parse ground-station(s) </span>
        <span class="n">groundStation</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">dictionary_list_to_object_list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;groundStation&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">GroundStation</span><span class="p">)</span>

        <span class="c1"># parse any available outputInfo objects. Note that there may be output-info objects from executing the auto-grid function.</span>
        <span class="n">outputInfo_dict</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;outputInfo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">outputInfo_dict</span><span class="p">:</span>
            <span class="c1"># make into list</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">outputInfo_dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">outputInfo_dict</span> <span class="o">=</span> <span class="p">[</span><span class="n">outputInfo_dict</span><span class="p">]</span>
            <span class="c1"># iterate over the list</span>
            <span class="k">for</span> <span class="n">oi_d</span> <span class="ow">in</span> <span class="n">outputInfo_dict</span><span class="p">:</span>
                <span class="n">output_info_type</span> <span class="o">=</span> <span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">oi_d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;@type&#39;</span><span class="p">))</span> <span class="k">if</span> <span class="n">oi_d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;@type&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">output_info_type</span> <span class="o">==</span> <span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">PropagatorOutputInfo</span><span class="p">:</span>
                    <span class="n">outputInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">PropagatorOutputInfo</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">oi_d</span><span class="p">))</span> <span class="c1"># append to existing list of output-info objects</span>
                <span class="k">if</span> <span class="n">output_info_type</span> <span class="o">==</span> <span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">ContactFinderOutputInfo</span><span class="p">:</span>
                    <span class="n">outputInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ContactFinderOutputInfo</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">oi_d</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">output_info_type</span> <span class="o">==</span> <span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">CoverageOutputInfo</span><span class="p">:</span>
                    <span class="n">outputInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CoverageOutputInfo</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">oi_d</span><span class="p">))</span>     
                <span class="k">if</span> <span class="n">output_info_type</span> <span class="o">==</span> <span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">DataMetricsOutputInfo</span><span class="p">:</span>
                    <span class="n">outputInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">DataMetricsOutputInfo</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">oi_d</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">output_info_type</span> <span class="o">==</span> <span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">EclipseFinderOutputInfo</span><span class="p">:</span>
                    <span class="n">outputInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EclipseFinderOutputInfo</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">oi_d</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">output_info_type</span> <span class="o">==</span> <span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">GridOutputInfo</span><span class="p">:</span>
                    <span class="n">outputInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GridOutputInfo</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">oi_d</span><span class="p">))</span>

        
        <span class="k">return</span> <span class="n">Mission</span><span class="p">(</span><span class="n">epoch</span> <span class="o">=</span> <span class="n">epoch</span><span class="p">,</span> <span class="c1"># 25 Feb 2021 0:0:0 default startDate</span>
                       <span class="n">duration</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">1</span><span class="p">,</span> <span class="c1"># 1 day default</span>
                       <span class="n">spacecraft</span> <span class="o">=</span> <span class="n">spacecraft</span><span class="p">,</span>
                       <span class="n">propagator</span> <span class="o">=</span> <span class="n">propagator</span><span class="p">,</span>                       
                       <span class="n">grid</span> <span class="o">=</span> <span class="n">grid</span><span class="p">,</span>
                       <span class="n">groundStation</span> <span class="o">=</span> <span class="n">groundStation</span><span class="p">,</span>
                       <span class="n">settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">,</span>
                       <span class="n">outputInfo</span> <span class="o">=</span> <span class="n">outputInfo</span> <span class="k">if</span> <span class="n">outputInfo</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">_id</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;@id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                      <span class="p">)</span> </div>
    
<div class="viewcode-block" id="Mission.clear"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Re-initialize. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span></div>

<div class="viewcode-block" id="Mission.get_spacecraft_orbit_specs"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.get_spacecraft_orbit_specs">[docs]</a>    <span class="k">def</span> <span class="nf">get_spacecraft_orbit_specs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get the Keplerian elements of the orbit of the spacecraft(s).</span>

<span class="sd">            :return: List of namedtuple objects with the following entries: &lt;spacecraft-id, sma, ecc, inc, raan, aop, ta&gt;  Angles are in radians.</span>
<span class="sd">            :rtype: list, namedtuple</span>

<span class="sd">        &quot;&quot;&quot;</span> 
        <span class="n">specs</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">&quot;Specs&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;spc_id&quot;</span><span class="p">,</span> <span class="s2">&quot;sma&quot;</span><span class="p">,</span> <span class="s2">&quot;ecc&quot;</span><span class="p">,</span> <span class="s2">&quot;inc&quot;</span><span class="p">,</span> <span class="s2">&quot;raan&quot;</span><span class="p">,</span> <span class="s2">&quot;aop&quot;</span><span class="p">,</span> <span class="s2">&quot;ta&quot;</span><span class="p">])</span>
        <span class="n">orb_specs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">spacecraft</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">spacecraft</span><span class="p">,</span> <span class="n">Spacecraft</span><span class="p">):</span>
            <span class="n">spacecraft</span> <span class="o">=</span> <span class="p">[</span><span class="n">spacecraft</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">spacecraft</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">spc</span> <span class="ow">in</span> <span class="n">spacecraft</span><span class="p">:</span>
                <span class="n">kep_state</span> <span class="o">=</span> <span class="n">spc</span><span class="o">.</span><span class="n">orbitState</span><span class="o">.</span><span class="n">get_keplerian_earth_centered_inertial_state</span><span class="p">()</span>
                <span class="n">orb_specs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">specs</span><span class="p">(</span><span class="n">spc</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">kep_state</span><span class="o">.</span><span class="n">sma</span><span class="p">,</span> <span class="n">kep_state</span><span class="o">.</span><span class="n">ecc</span><span class="p">,</span> <span class="n">kep_state</span><span class="o">.</span><span class="n">inc</span><span class="p">,</span> 
                                        <span class="n">kep_state</span><span class="o">.</span><span class="n">raan</span><span class="p">,</span> <span class="n">kep_state</span><span class="o">.</span><span class="n">aop</span><span class="p">,</span> <span class="n">kep_state</span><span class="o">.</span><span class="n">ta</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">orb_specs</span></div>

<div class="viewcode-block" id="Mission.add_instrument_to_spacecraft"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.add_instrument_to_spacecraft">[docs]</a>    <span class="k">def</span> <span class="nf">add_instrument_to_spacecraft</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_instru</span><span class="p">,</span> <span class="n">sensor_to_spc</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Add instrument to the given list of spacecrafts.</span>

<span class="sd">            :param new_instru: New instrument.</span>
<span class="sd">            :paramtype new_instru: :class:`instrupy.base.Instrument`</span>

<span class="sd">            :param sensor_to_spc: Unique IDs of spacecrafts to which the instrument is to be attached. </span>
<span class="sd">            :paramtype sensor_to_spc: list</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">,</span> <span class="n">Spacecraft</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">]</span> <span class="c1"># make into list</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="c1"># iterate over the list of available spacecrafts</span>
            <span class="k">for</span> <span class="n">spc_indx</span><span class="p">,</span> <span class="n">spc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">spc</span><span class="o">.</span><span class="n">_id</span> <span class="ow">in</span> <span class="n">sensor_to_spc</span><span class="p">:</span>
                    <span class="c1"># add the sensor to the spacecraft</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">[</span><span class="n">spc_indx</span><span class="p">]</span><span class="o">.</span><span class="n">add_instrument</span><span class="p">(</span><span class="n">new_instru</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mission.add_groundstation_from_dict"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.add_groundstation_from_dict">[docs]</a>    <span class="k">def</span> <span class="nf">add_groundstation_from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Add one or more ground-stations to the list of ground-stations (instance variable ``groundStation``).</span>

<span class="sd">            :param d: Dictionary or list of dictionaries with the ground-station specifications.</span>
<span class="sd">            :paramtype d: list, dict or dict</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gndstn_list</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">dictionary_list_to_object_list</span><span class="p">(</span> <span class="n">d</span><span class="p">,</span> <span class="n">GroundStation</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groundStation</span><span class="p">,</span> <span class="n">GroundStation</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">groundStation</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">groundStation</span><span class="p">]</span> <span class="c1"># make into list</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groundStation</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">groundStation</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gndstn_list</span><span class="p">)</span> <span class="c1"># extend the list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">groundStation</span> <span class="o">=</span> <span class="n">gndstn_list</span></div>

<div class="viewcode-block" id="Mission.update_epoch_from_dict"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.update_epoch_from_dict">[docs]</a>    <span class="k">def</span> <span class="nf">update_epoch_from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Update the instance variable ``epoch`` from input dictionary of date specifications.</span>

<span class="sd">            :param d: Dictionary with the date specifications.</span>
<span class="sd">            :paramtype d: dict</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epoch</span> <span class="o">=</span> <span class="n">OrbitState</span><span class="o">.</span><span class="n">date_from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Mission.update_propagator_settings"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.update_propagator_settings">[docs]</a>    <span class="k">def</span> <span class="nf">update_propagator_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop_dict</span><span class="p">,</span> <span class="n">propTimeResFactor</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Update the propagator settings.</span>

<span class="sd">            :param prop_dict: Dictionary with the specifications of the orbit propagator. See the :class:`orbitpy.propagator` module for available propagators and their descriptions.</span>
<span class="sd">            :paramtype prop_dict: dict</span>

<span class="sd">            :param propTimeResFactor: Factor which influences the propagation step-size calculation. See :class:`orbitpy.propagator.compute_time_step`.</span>
<span class="sd">            :paramtype propTimeResFactor: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_settings</span><span class="p">(</span><span class="n">propTimeResFactor</span><span class="o">=</span><span class="n">propTimeResFactor</span><span class="p">)</span> <span class="c1"># update settings</span>
        
        <span class="c1"># Compute step-size</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">:</span>
            <span class="n">time_step</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">propagator</span><span class="o">.</span><span class="n">compute_time_step</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">propTimeResFactor</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">time_step</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="k">if</span> <span class="n">prop_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;stepSize&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># i.e. user has not specified step-size</span>
            <span class="n">prop_dict</span><span class="p">[</span><span class="s2">&quot;stepSize&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time_step</span> <span class="c1"># use the autocalculate step-size</span>
        <span class="k">if</span> <span class="n">prop_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;stepSize&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">time_step</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;User given step-size is greater than auto calculated step-size.&#39;</span><span class="p">)</span>
        
        <span class="c1"># parse propagator</span>
        <span class="n">factory</span> <span class="o">=</span> <span class="n">PropagatorFactory</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">propagator</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="n">get_propagator</span><span class="p">(</span><span class="n">prop_dict</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mission.update_coverage_settings_from_dict"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.update_coverage_settings_from_dict">[docs]</a>    <span class="k">def</span> <span class="nf">update_coverage_settings_from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Update the coverage settings.</span>

<span class="sd">            :param d: Dictionary with the coverage settings. Expected key/value pairs are: </span>

<span class="sd">                                        * coverageType: Type of coverage calculation.</span>
<span class="sd">                                        * gridResFactor: Factor which influences the grid-resolution of an auto-generated grid. See :class:`orbitpy.grid.compute_grid_res`.</span>

<span class="sd">            :paramtype d: dict</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">coverageType</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;coverageType&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_settings</span><span class="p">(</span><span class="n">coverageType</span><span class="o">=</span><span class="n">coverageType</span><span class="p">)</span>

        <span class="n">gridResFactor</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gridResFactor&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_settings</span><span class="p">(</span><span class="n">gridResFactor</span><span class="o">=</span><span class="n">gridResFactor</span><span class="p">)</span></div>
        

<div class="viewcode-block" id="Mission.update_settings"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.update_settings">[docs]</a>    <span class="k">def</span> <span class="nf">update_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outDir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">coverageType</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">propTimeResFactor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">gridResFactor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opaqueAtmosHeight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">midAccessOnly</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Update settings.</span>

<span class="sd">            :param outDir: Output directory path.</span>
<span class="sd">            :paramtype outDir: str </span>

<span class="sd">            :param coverageType: Type of coverage calculation. </span>
<span class="sd">            :paramtype coverageType: str or None</span>

<span class="sd">            :param propTimeResFactor: Factor which influences the propagation step-size calculation. See :class:`orbitpy.propagator.compute_time_step`.</span>
<span class="sd">            :paramtype propTimeResFactor: float</span>

<span class="sd">            :param gridResFactor: Factor which influences the grid-resolution of an auto-generated grid. See :class:`orbitpy.grid.compute_grid_res`. </span>
<span class="sd">            :paramtype gridResFactor: float</span>

<span class="sd">            :param opaqueAtmosHeight: Relevant in-case of inter-satellite communications. Height of atmosphere (in kilometers) below which line-of-sight </span>
<span class="sd">                                    communication between two satellites **cannot** take place. Default value is 0 km.</span>
<span class="sd">            :paramtype opaqueAtmosHeight: float</span>

<span class="sd">            :param midAccessOnly: Flag to have only the access-times at the middle of access-intervals. The flag is set to `True` when coverage calculations are done for narrow FOV instruments </span>
<span class="sd">                         like SAR or pushbroom-optical sensors using a sceneFOV (or FOR defined by a sceneFOV). See :ref:`correction_of_access_files`.</span>
<span class="sd">            :paramtype midAccessOnly: bool</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">outDir</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">outDir</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">outDir</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">coverageType</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">coverageType</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">coverageType</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">propTimeResFactor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">propTimeResFactor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">propTimeResFactor</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">gridResFactor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">gridResFactor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">gridResFactor</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">opaqueAtmosHeight</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">opaqueAtmosHeight</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">opaqueAtmosHeight</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">midAccessOnly</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">midAccessOnly</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">midAccessOnly</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mission.add_spacecraft_from_dict"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.add_spacecraft_from_dict">[docs]</a>    <span class="k">def</span> <span class="nf">add_spacecraft_from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Add one or more spacecrafts to the list of spacecrafts (instance variable ``spacecraft``).</span>

<span class="sd">            :param d: Dictionary or list of dictionaries with the spacecraft specifications.</span>
<span class="sd">            :paramtype d: list, dict or dict</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sc_list</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">dictionary_list_to_object_list</span><span class="p">(</span> <span class="n">d</span><span class="p">,</span> <span class="n">Spacecraft</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">,</span> <span class="n">Spacecraft</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">]</span> <span class="c1"># make into list</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">sc_list</span><span class="p">)</span> <span class="c1"># extend the list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span> <span class="o">=</span> <span class="n">sc_list</span></div>

<div class="viewcode-block" id="Mission.add_constellation_from_dict"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.add_constellation_from_dict">[docs]</a>    <span class="k">def</span> <span class="nf">add_constellation_from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constel_dict</span><span class="p">,</span> <span class="n">spc_bus_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">instru_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Parse the spacecrafts in the input constellation and add them to the list of spacecrafts (instance variable ``spacecraft``).</span>
<span class="sd">            A common spacecraft-bus and instrument(s) can also be specified.</span>
<span class="sd"> </span>
<span class="sd">            :param constel_dict: Dictionary with the constellation specifications.</span>
<span class="sd">            :paramtype constel_dict: dict</span>

<span class="sd">            :param spc_bus_dict: Dictionary with the spacecraft-bus specifications.</span>
<span class="sd">            :paramtype spc_bus_dict: dict</span>

<span class="sd">            :param instru_dict: Dictionary (or list of dictionaries) with the instrument specifications. </span>
<span class="sd">            :paramtype instru_dict: list,dict or dict</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">factory</span> <span class="o">=</span> <span class="n">ConstellationFactory</span><span class="p">()</span>        
        <span class="n">constel</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="n">get_constellation_model</span><span class="p">(</span><span class="n">constel_dict</span><span class="p">)</span>
        <span class="n">orbits</span> <span class="o">=</span> <span class="n">constel</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">constel_dict</span><span class="p">)</span><span class="o">.</span><span class="n">generate_orbits</span><span class="p">()</span>
        
        <span class="c1"># one common spacecraft-bus specifications for all the satellites in the constellation</span>
        <span class="n">spc_bus</span> <span class="o">=</span> <span class="n">SpacecraftBus</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">spc_bus_dict</span><span class="p">)</span> <span class="k">if</span> <span class="n">spc_bus_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="c1"># list of instrument specifications could be present, in which case all the instruments in the list are attached to all the </span>
        <span class="c1"># spacecraft in the constellation.</span>
        <span class="k">if</span> <span class="n">instru_dict</span><span class="p">:</span>
            <span class="n">instru_list</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">dictionary_list_to_object_list</span><span class="p">(</span><span class="n">instru_dict</span><span class="p">,</span> <span class="n">Instrument</span><span class="p">)</span> <span class="c1"># list of instruments</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">instru_list</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">sc_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">orb</span> <span class="ow">in</span> <span class="n">orbits</span><span class="p">:</span>
            <span class="n">sc_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Spacecraft</span><span class="p">(</span><span class="n">orbitState</span><span class="o">=</span><span class="n">orb</span><span class="p">,</span> <span class="n">spacecraftBus</span><span class="o">=</span><span class="n">spc_bus</span><span class="p">,</span> <span class="n">instrument</span><span class="o">=</span><span class="n">instru_list</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="s1">&#39;spc_&#39;</span><span class="o">+</span><span class="n">orb</span><span class="o">.</span><span class="n">_id</span><span class="p">))</span> <span class="c1"># note the assignment of the spacecraft-id</span>
        
        <span class="c1"># Add to existing list of spacecrafts,</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">,</span> <span class="n">Spacecraft</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">]</span> <span class="c1"># make into list</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">sc_list</span><span class="p">)</span> <span class="c1"># extend the list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span> <span class="o">=</span> <span class="n">sc_list</span></div>

<div class="viewcode-block" id="Mission.update_duration"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.update_duration">[docs]</a>    <span class="k">def</span> <span class="nf">update_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">duration</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Update the instance variable epoch from input dictionary of date specifications.</span>

<span class="sd">            :param d: Dictionary with the date specifications.</span>
<span class="sd">            :paramtype d: dict</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>  </div>
    
<div class="viewcode-block" id="Mission.add_coverage_grid_from_dict"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.add_coverage_grid_from_dict">[docs]</a>    <span class="k">def</span> <span class="nf">add_coverage_grid_from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grid_dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Add coverage grid(s) from the input dictionary. Update the output-info instanace variable. Auto-grids shall be generated in the ``execute_coverage_calculator`` function.</span>

<span class="sd">            :param grid_dict: Dictionary with the grid specifications. Grid can be of type &#39;autoGrid&#39; or &#39;customGrid&#39;. </span>
<span class="sd">                                Refer to :class:`orbitpy.grid.Grid.from_autogrid_dict` and :class:`orbitpy.grid.Grid.from_customgrid_dict` for description </span>
<span class="sd">                                of the expected key/value pairs of the dictionary.</span>
<span class="sd">            :paramtype grid_dict: dict or list, dict</span>

<span class="sd">        &quot;&quot;&quot;</span>    
        <span class="n">grid</span> <span class="o">=</span> <span class="p">[]</span>    
        <span class="k">if</span> <span class="n">grid_dict</span><span class="p">:</span>
            <span class="c1"># make into list of dictionaries if not already list</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">grid_dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">grid_dict</span> <span class="o">=</span> <span class="p">[</span><span class="n">grid_dict</span><span class="p">]</span>
            <span class="c1"># iterate through the list of grids            </span>
            <span class="k">for</span> <span class="n">gd</span> <span class="ow">in</span> <span class="n">grid_dict</span><span class="p">:</span>
                <span class="n">grid_type</span> <span class="o">=</span> <span class="n">Grid</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">gd</span><span class="p">[</span><span class="s1">&#39;@type&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="p">((</span><span class="n">grid_type</span><span class="o">==</span><span class="n">Grid</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">AUTOGRID</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gridRes&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)):</span>
                    <span class="c1"># calculate grid resolution factor</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">:</span>
                        <span class="n">gridRes</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">compute_grid_res</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">gridResFactor</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Auto-calculated grid resolution is </span><span class="si">%f</span><span class="s1"> using a grid-resolution factor of </span><span class="si">%f</span><span class="s1">.&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">gridRes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">gridResFactor</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">gridRes</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># 1 deg grid-resolution in case of no spacecraft.</span>
                    <span class="n">gd</span><span class="p">[</span><span class="s1">&#39;gridRes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gridRes</span>

                <span class="n">grid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Grid</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">gd</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">,</span> <span class="n">Grid</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">]</span> <span class="c1"># make into list</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">grid</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">save_auto_grid</span><span class="p">()</span>
        
        <span class="k">return</span></div>

<div class="viewcode-block" id="Mission.to_dict"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.to_dict">[docs]</a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Translate the ``Mission`` object to a Python dictionary such that it can be uniquely reconstructed back from the dictionary.</span>
<span class="sd">        </span>
<span class="sd">        :return: ``Mission`` object as python dictionary.</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">outputInfo_dict</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">]</span> <span class="c1"># make into list</span>
            <span class="n">outputInfo_dict</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">object_list_to_dictionary_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">dict</span><span class="p">({</span><span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;Mission&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;epoch&quot;</span><span class="p">:</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OrbitState</span><span class="o">.</span><span class="n">date_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">epoch</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">epoch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span>                     
                     <span class="s2">&quot;spacecraft&quot;</span><span class="p">:</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">object_list_to_dictionary_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="s2">&quot;propagator&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">propagator</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">propagator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">object_list_to_dictionary_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>                     
                     <span class="s2">&quot;groundStation&quot;</span><span class="p">:</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">object_list_to_dictionary_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groundStation</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">groundStation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="s2">&quot;outputInfo&quot;</span><span class="p">:</span> <span class="n">outputInfo_dict</span><span class="p">,</span>
                     <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="s2">&quot;@id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">})</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Mission.from_dict(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>

<div class="viewcode-block" id="Mission.execute"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.execute">[docs]</a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Execute a mission where all the spacecrafts are propagated, (field-of-regard) coverage calculated for all spacecraft-instrument-modes, </span>
<span class="sd">            ground-station contact-periods computed between all spacecraft-ground-station pairs and intersatellite contact-periods</span>
<span class="sd">            computed for all possible spacecraft pairs.</span>

<span class="sd">            .. note:: In case of *GRID COVERAGE* calculation, the field-of-regard is used (and not the scene-field-of-view). In case of SAR instruments and coverage calculations</span>
<span class="sd">                        involving grid (i.e. *GRID COVERAGE* and *POINTING OPTIONS WITH GRID COVERAGE*), only the access at the middle of a continuous access interval is shown</span>
<span class="sd">                        (see :ref:`correction_of_access_files`). </span>

<span class="sd">            :return: Mission output info as an heterogenous list of output info objects from propagation, coverage and contact calculations.</span>
<span class="sd">            :rtype: list, :class:`orbitpy.propagate.PropagatorOutputInfo`, :class:`orbitpy.coveragecalculator.CoverageOutputInfo`, :class:`orbitpy.contactfinder.ContactFinderOutputInfo`</span>

<span class="sd">        &quot;&quot;&quot;</span>           
        <span class="n">out_info</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># list to accumulate info objects of the various executions        </span>

        <span class="c1"># Save auto-grids to files</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_auto_grid</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x</span><span class="p">:</span>
            <span class="n">out_info</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Finished save auto grid&quot;</span><span class="p">)</span>

        <span class="c1"># execute orbit propagation for all satellites in the mission</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_propagation</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x</span><span class="p">:</span>
            <span class="n">out_info</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Finished orbit-propagation.&quot;</span><span class="p">)</span>

        <span class="c1"># Execute coverage calculation for all the spacecrafts (and their instruments and modes) in the mission.</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_coverage_calculator</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x</span><span class="p">:</span>
            <span class="n">out_info</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Finished coverage calculation.&quot;</span><span class="p">)</span>

        <span class="c1"># execute datametrics calculation for all the spacecrafts (and their instruments and modes) in the mission.</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_datametrics_calculator</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x</span><span class="p">:</span>
            <span class="n">out_info</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Finished datametrics calculation.&quot;</span><span class="p">)</span>

        <span class="c1"># execute ground-station contact finder for all the spacecrafts</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_groundstation_contact_finder</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x</span><span class="p">:</span>
            <span class="n">out_info</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Finished finding ground-station contacts.&quot;</span><span class="p">)</span>

        <span class="c1"># find inter-satellite contacts between all the satellites in the mission</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_intersatellite_contact_finder</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x</span><span class="p">:</span>
            <span class="n">out_info</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Finished finding inter-satellite contacts.&quot;</span><span class="p">)</span>

        <span class="c1"># find eclipse times</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_eclipse_finder</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x</span><span class="p">:</span>
            <span class="n">out_info</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Finished finding eclipse periods.&quot;</span><span class="p">)</span>
    
        <span class="k">return</span> <span class="n">out_info</span></div>
            
<div class="viewcode-block" id="Mission.save_auto_grid"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.save_auto_grid">[docs]</a>    <span class="k">def</span> <span class="nf">save_auto_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Save auto-grid data to file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oi</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># list of output-info objects associated with this execution</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">:</span>
            <span class="c1"># Save auto-grids to files</span>
            <span class="k">for</span> <span class="n">grid_idx</span><span class="p">,</span> <span class="n">grid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">grid</span><span class="o">.</span><span class="n">filepath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># must be an auto-grid configuration, so filepath instance variable is None</span>
                    <span class="n">fp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">outDir</span> <span class="o">+</span> <span class="s1">&#39;/grid&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">grid_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span> <span class="c1"># save the file with name according to the index.</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">write_to_file</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
                    <span class="n">oi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

            <span class="c1"># delete any output-info object(s) associated with a previous execution</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">delete_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">other_out_info_object</span><span class="o">=</span><span class="n">oi</span><span class="p">)</span>            
            <span class="c1"># add output-info object(s) to the instance variable </span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">add_to_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">oi</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">oi</span></div>

<div class="viewcode-block" id="Mission.execute_propagation"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.execute_propagation">[docs]</a>    <span class="k">def</span> <span class="nf">execute_propagation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Execute orbit propagation for all spacecrafts in the mission.</span>
<span class="sd">            The list of output0info objects associated with this execution is returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oi</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># list of output-info objects associated with this execution</span>
        <span class="c1"># execute orbit propagation for all satellites in the mission</span>
        <span class="k">for</span> <span class="n">spc_idx</span><span class="p">,</span> <span class="n">spc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">):</span>
            
            <span class="c1"># make satellite directory</span>
            <span class="n">sat_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">outDir</span> <span class="o">+</span> <span class="s1">&#39;/sat&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">spc_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sat_dir</span><span class="p">):</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">sat_dir</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sat_dir</span><span class="p">)</span>

            <span class="n">state_cart_file</span> <span class="o">=</span> <span class="n">sat_dir</span> <span class="o">+</span> <span class="s1">&#39;state_cartesian.csv&#39;</span>
            <span class="n">state_kep_file</span> <span class="o">=</span> <span class="n">sat_dir</span> <span class="o">+</span> <span class="s1">&#39;state_keplerian.csv&#39;</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">propagator</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">spc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">epoch</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="p">,</span> <span class="n">state_kep_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
            <span class="n">oi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

        <span class="c1"># delete any output-info object associated with a previous execution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">delete_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">other_out_info_object</span><span class="o">=</span><span class="n">oi</span><span class="p">)</span>    
        <span class="c1"># add output-info to the instance variable </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">add_to_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">oi</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">oi</span></div>
    
<div class="viewcode-block" id="Mission.execute_intersatellite_contact_finder"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.execute_intersatellite_contact_finder">[docs]</a>    <span class="k">def</span> <span class="nf">execute_intersatellite_contact_finder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Find contacts between spacecrafts in the mission. Orbit propagation for all spacecrafts should be </span>
<span class="sd">            executed prior to this operation. The ``outputInfo`` instance variable shall be referred to locate the </span>
<span class="sd">            state files produced from orbit propagation. </span>
<span class="sd">            The list of output-info objects associated with this execution is returned.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oi</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># list of output-info objects associated with this execution</span>
        <span class="c1"># make folder to store the results</span>
        <span class="n">intersat_comm_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">outDir</span> <span class="o">+</span> <span class="s1">&#39;/comm/&#39;</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">intersat_comm_dir</span><span class="p">):</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">intersat_comm_dir</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">intersat_comm_dir</span><span class="p">)</span>

        <span class="c1"># Iterate over all spacecrafts in the mission. If the state-file of a spacecraft cannot be located then the spacecraft is not considered.</span>
        <span class="k">for</span> <span class="n">spc1_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">)):</span>
            <span class="n">spc1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">[</span><span class="n">spc1_idx</span><span class="p">]</span>
            <span class="n">spc1_prop_out_info</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">locate_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> 
                                                                                <span class="n">out_info_type</span><span class="o">=</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">PropagatorOutputInfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> 
                                                                                <span class="n">spacecraft_id</span><span class="o">=</span><span class="n">spc1</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">spc1_prop_out_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Skipping spacecraft with id </span><span class="si">%s</span><span class="s2"> since propagation state output is not available.&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">spc1</span><span class="o">.</span><span class="n">_id</span> <span class="p">))</span>
                <span class="k">continue</span> <span class="c1"># skip this spacecraft since propagation output is not available. </span>

            <span class="n">spc1_state_cart_file</span> <span class="o">=</span> <span class="n">spc1_prop_out_info</span><span class="o">.</span><span class="n">stateCartFile</span>
            
            <span class="c1"># loop over the rest of the spacecrafts in the list (i.e. from the current spacecraft to the last spacecraft in the list)</span>
            <span class="k">for</span> <span class="n">spc2_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">spc1_idx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">)):</span>
                
                <span class="n">spc2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">[</span><span class="n">spc2_idx</span><span class="p">]</span>
                <span class="n">spc2_prop_out_info</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">locate_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> 
                                                                                    <span class="n">out_info_type</span><span class="o">=</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">PropagatorOutputInfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> 
                                                                                    <span class="n">spacecraft_id</span><span class="o">=</span><span class="n">spc2</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">spc2_prop_out_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Skipping spacecraft with id </span><span class="si">%s</span><span class="s2"> since propagation state output is not available.&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">spc2</span><span class="o">.</span><span class="n">_id</span> <span class="p">))</span>
                    <span class="k">continue</span> <span class="c1"># skip this spacecraft since propagation output is not available. </span>

                <span class="n">spc2_state_cart_file</span> <span class="o">=</span> <span class="n">spc2_prop_out_info</span><span class="o">.</span><span class="n">stateCartFile</span>
                                
                <span class="n">out_intersat_filename</span> <span class="o">=</span> <span class="s1">&#39;sat&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">spc1_idx</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;_to_sat&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">spc2_idx</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.csv&#39;</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">ContactFinder</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">spc1</span><span class="p">,</span> <span class="n">spc2</span><span class="p">,</span> <span class="n">intersat_comm_dir</span><span class="p">,</span> <span class="n">spc1_state_cart_file</span><span class="p">,</span> <span class="n">spc2_state_cart_file</span><span class="p">,</span> <span class="n">out_intersat_filename</span><span class="p">,</span> <span class="n">ContactFinder</span><span class="o">.</span><span class="n">OutType</span><span class="o">.</span><span class="n">INTERVAL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">opaqueAtmosHeight</span><span class="p">)</span>
                <span class="n">oi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

        <span class="c1"># delete any output-info object(s) associated with a previous execution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">delete_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">other_out_info_object</span><span class="o">=</span><span class="n">oi</span><span class="p">)</span>
        <span class="c1"># add output-info object(s) to the instance variable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">add_to_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">oi</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">oi</span></div>
    
<div class="viewcode-block" id="Mission.execute_groundstation_contact_finder"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.execute_groundstation_contact_finder">[docs]</a>    <span class="k">def</span> <span class="nf">execute_groundstation_contact_finder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Find contacts between spacecrafts and ground-stations in the mission. Orbit propagation for all spacecrafts should be </span>
<span class="sd">            executed prior to this operation. The ``outputInfo`` instance variable shall be referred to locate the </span>
<span class="sd">            state files produced from orbit propagation. The results are written in the same folder as that of the spacecraft-state files.</span>
<span class="sd">            The output-info instance variable is updated.</span>
<span class="sd">            The list of output-info objects associated with this execution is returned.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oi</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># list of output-info objects associated with this execution</span>
        <span class="c1"># loop over all available spacecrafts</span>
        <span class="k">for</span> <span class="n">spc_idx</span><span class="p">,</span> <span class="n">spc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">):</span>

            <span class="n">spc_prop_out_info</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">locate_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> 
                                                                                <span class="n">out_info_type</span><span class="o">=</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">PropagatorOutputInfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> 
                                                                                <span class="n">spacecraft_id</span><span class="o">=</span><span class="n">spc</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">spc_prop_out_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Skipping spacecraft with id </span><span class="si">%s</span><span class="s2"> since propagation state output is not available.&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">spc</span><span class="o">.</span><span class="n">_id</span> <span class="p">))</span>
                <span class="k">continue</span> <span class="c1"># skip this spacecraft since propagation output is not available. </span>

            <span class="n">spc_state_cart_file</span> <span class="o">=</span> <span class="n">spc_prop_out_info</span><span class="o">.</span><span class="n">stateCartFile</span>
            <span class="n">spc_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">spc_state_cart_file</span><span class="p">)</span> <span class="c1">## directory in which the state-file is written</span>

            <span class="c1"># loop over all the ground-stations and calculate contacts</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">groundStation</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">gnd_stn_idx</span><span class="p">,</span> <span class="n">gnd_stn</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groundStation</span><span class="p">):</span>
                    
                    <span class="n">out_gnd_stn_file</span> <span class="o">=</span> <span class="s1">&#39;gndStn&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">gnd_stn_idx</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;_contacts.csv&#39;</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="n">ContactFinder</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">spc</span><span class="p">,</span> <span class="n">gnd_stn</span><span class="p">,</span> <span class="n">spc_dir</span><span class="p">,</span> <span class="n">spc_state_cart_file</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">out_gnd_stn_file</span><span class="p">,</span> <span class="n">ContactFinder</span><span class="o">.</span><span class="n">OutType</span><span class="o">.</span><span class="n">INTERVAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">oi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

        <span class="c1"># delete any output-info object(s) associated with a previous execution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">delete_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">other_out_info_object</span><span class="o">=</span><span class="n">oi</span><span class="p">)</span>
        <span class="c1"># add output-info object(s) to the instance variable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">add_to_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">oi</span><span class="p">)</span>
                    
        <span class="k">return</span> <span class="n">oi</span></div>
    
<div class="viewcode-block" id="Mission.execute_eclipse_finder"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.execute_eclipse_finder">[docs]</a>    <span class="k">def</span> <span class="nf">execute_eclipse_finder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Find eclipse times for the spacecrafts in the mission. Orbit propagation for all spacecrafts should be </span>
<span class="sd">            executed prior to this operation. The ``outputInfo`` instance variable shall be referred to locate the </span>
<span class="sd">            state files produced from orbit propagation. The results are written in the same folder as that of the spacecraft-state files.</span>
<span class="sd">            The output-info instance variable is updated.</span>
<span class="sd">            The list of output-info objects associated with this execution is returned.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oi</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># list of output-info objects associated with this execution</span>
        <span class="c1"># loop over all available spacecrafts</span>
        <span class="k">for</span> <span class="n">spc_idx</span><span class="p">,</span> <span class="n">spc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">):</span>

            <span class="n">spc_prop_out_info</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">locate_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> 
                                                                                <span class="n">out_info_type</span><span class="o">=</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">PropagatorOutputInfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> 
                                                                                <span class="n">spacecraft_id</span><span class="o">=</span><span class="n">spc</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">spc_prop_out_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Skipping spacecraft with id </span><span class="si">%s</span><span class="s2"> since propagation state output is not available.&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">spc</span><span class="o">.</span><span class="n">_id</span> <span class="p">))</span>
                <span class="k">continue</span> <span class="c1"># skip this spacecraft since propagation output is not available. </span>

            <span class="n">spc_state_cart_file</span> <span class="o">=</span> <span class="n">spc_prop_out_info</span><span class="o">.</span><span class="n">stateCartFile</span>
            <span class="n">spc_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">spc_state_cart_file</span><span class="p">)</span> <span class="c1">## directory in which the state-file is written</span>

            <span class="n">out_eclipses_file</span> <span class="o">=</span> <span class="s1">&#39;eclipses.csv&#39;</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">EclipseFinder</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">spc</span><span class="p">,</span> <span class="n">spc_dir</span><span class="p">,</span> <span class="n">spc_state_cart_file</span><span class="p">,</span> <span class="n">out_eclipses_file</span><span class="p">,</span> <span class="n">ContactFinder</span><span class="o">.</span><span class="n">OutType</span><span class="o">.</span><span class="n">INTERVAL</span><span class="p">)</span>
            <span class="n">oi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

        <span class="c1"># delete any output-info object associated with a previous execution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">delete_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">other_out_info_object</span><span class="o">=</span><span class="n">oi</span><span class="p">)</span>
        <span class="c1"># add output-info to the instance variable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">add_to_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">oi</span><span class="p">)</span>
                    
        <span class="k">return</span> <span class="n">oi</span></div>

<div class="viewcode-block" id="Mission.execute_coverage_calculator"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.execute_coverage_calculator">[docs]</a>    <span class="k">def</span> <span class="nf">execute_coverage_calculator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Execute coverage calculation for all the spacecrafts in the mission. The coverage-calculation type is indicated in the ``settings`` instance variable.</span>
<span class="sd">            Orbit propagation for all spacecrafts should be executed prior to this operation. The ``outputInfo`` instance variable shall be referred to locate the </span>
<span class="sd">            state files produced from orbit propagation. The results are written in the same folder as that of the spacecraft-state files.</span>
<span class="sd">            The output-info instance variable is updated.</span>
<span class="sd">            The list of output-info objects associated with this execution is returned.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oi</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># list of output-info objects associated with this execution</span>
        <span class="c1"># loop over all available spacecrafts</span>
        <span class="k">for</span> <span class="n">spc_idx</span><span class="p">,</span> <span class="n">spc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">):</span>

            <span class="n">spc_prop_out_info</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">locate_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> 
                                                                                <span class="n">out_info_type</span><span class="o">=</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">PropagatorOutputInfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> 
                                                                                <span class="n">spacecraft_id</span><span class="o">=</span><span class="n">spc</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">spc_prop_out_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Skipping spacecraft with id </span><span class="si">%s</span><span class="s2"> since propagation state output is not available.&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">spc</span><span class="o">.</span><span class="n">_id</span><span class="p">))</span>
                <span class="k">continue</span> <span class="c1"># skip this spacecraft since propagation output is not available. </span>

            <span class="n">spc_state_cart_file</span> <span class="o">=</span> <span class="n">spc_prop_out_info</span><span class="o">.</span><span class="n">stateCartFile</span>
            <span class="n">spc_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">spc_state_cart_file</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="c1">## directory in which the state-file is written</span>

            <span class="c1"># loop over all the instruments and modes (per instrument) and calculate the corresponding coverage, data-metrics</span>
            <span class="k">if</span> <span class="n">spc</span><span class="o">.</span><span class="n">instrument</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">instru_idx</span><span class="p">,</span> <span class="n">instru</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">spc</span><span class="o">.</span><span class="n">instrument</span><span class="p">):</span>

                    <span class="k">for</span> <span class="n">mode_idx</span><span class="p">,</span> <span class="n">mode</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instru</span><span class="o">.</span><span class="n">mode</span><span class="p">):</span>                                        
                        
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">coverageType</span> <span class="o">==</span> <span class="s2">&quot;GRID COVERAGE&quot;</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Grid not specified, skipping Grid Coverage calculations.&#39;</span><span class="p">)</span>
                                <span class="k">continue</span>
                            <span class="c1"># iterate over multiple grids</span>
                            <span class="k">for</span> <span class="n">grid_idx</span><span class="p">,</span> <span class="n">grid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">):</span>
                                <span class="n">acc_fl</span> <span class="o">=</span> <span class="n">spc_dir</span> <span class="o">+</span> <span class="s1">&#39;access_instru&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">instru_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_mode&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_grid&#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">grid_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
                                <span class="n">cov_calc</span> <span class="o">=</span> <span class="n">GridCoverage</span><span class="p">(</span><span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="o">=</span><span class="n">spc_state_cart_file</span><span class="p">)</span>
                                <span class="n">x</span> <span class="o">=</span> <span class="n">cov_calc</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">use_field_of_regard</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">out_file_access</span><span class="o">=</span><span class="n">acc_fl</span><span class="p">,</span> <span class="n">mid_access_only</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">midAccessOnly</span><span class="p">)</span>
                                <span class="n">oi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> 

                        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">coverageType</span> <span class="o">==</span> <span class="s2">&quot;POINTING OPTIONS COVERAGE&quot;</span><span class="p">:</span>
                            <span class="n">acc_fl</span> <span class="o">=</span> <span class="n">spc_dir</span> <span class="o">+</span> <span class="s1">&#39;access_instru&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">instru_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_mode&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
                            <span class="n">cov_calc</span> <span class="o">=</span> <span class="n">PointingOptionsCoverage</span><span class="p">(</span><span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="o">=</span><span class="n">spc_state_cart_file</span><span class="p">)</span>
                            <span class="n">x</span> <span class="o">=</span> <span class="n">cov_calc</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">out_file_access</span><span class="o">=</span><span class="n">acc_fl</span><span class="p">)</span>
                            <span class="n">oi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> 

                        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">coverageType</span> <span class="o">==</span> <span class="s2">&quot;POINTING OPTIONS WITH GRID COVERAGE&quot;</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Grid not specified, skipping Pointing Options With Grid Coverage calculations.&#39;</span><span class="p">)</span>
                                <span class="k">continue</span>
                            <span class="c1"># iterate over multiple grids</span>
                            <span class="k">for</span> <span class="n">grid_idx</span><span class="p">,</span> <span class="n">grid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">):</span>

                                <span class="n">acc_fl</span> <span class="o">=</span> <span class="n">spc_dir</span> <span class="o">+</span> <span class="s1">&#39;access_instru&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">instru_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_mode&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_grid&#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">grid_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
                                <span class="n">cov_calc</span> <span class="o">=</span> <span class="n">PointingOptionsWithGridCoverage</span><span class="p">(</span><span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="o">=</span><span class="n">spc_state_cart_file</span><span class="p">)</span>
                                <span class="n">x</span> <span class="o">=</span> <span class="n">cov_calc</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">out_file_access</span><span class="o">=</span><span class="n">acc_fl</span><span class="p">,</span> <span class="n">mid_access_only</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">midAccessOnly</span><span class="p">)</span>
                                <span class="n">oi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> 
                        
        <span class="c1"># delete any output-info object(s) associated with a previous execution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">delete_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">other_out_info_object</span><span class="o">=</span><span class="n">oi</span><span class="p">)</span>            
        <span class="c1"># add output-info object(s) to the instance variable </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">add_to_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">oi</span><span class="p">)</span>       

        <span class="k">return</span> <span class="n">oi</span></div>
                    
<div class="viewcode-block" id="Mission.execute_datametrics_calculator"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.execute_datametrics_calculator">[docs]</a>    <span class="k">def</span> <span class="nf">execute_datametrics_calculator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Execute datametrics calculation for all the spacecrafts in the mission. </span>
<span class="sd">            Orbit propagation and coverage calculation for all spacecrafts should be executed prior to this operation. </span>
<span class="sd">            The ``outputInfo`` instance variable shall be referred to locate the state and access files produced by orbit propagation and coverage calculations. </span>
<span class="sd">            The results are written in the same folder as that of the spacecraft-state files.</span>
<span class="sd">            The output-info instance variable is updated.</span>
<span class="sd">            The list of output-info objects associated with this execution is returned.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oi</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># list of output-info objects associated with this execution</span>
        <span class="c1"># loop over all available spacecrafts</span>
        <span class="k">for</span> <span class="n">spc_idx</span><span class="p">,</span> <span class="n">spc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">):</span>

            <span class="n">spc_prop_out_info</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">locate_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> 
                                                                                <span class="n">out_info_type</span><span class="o">=</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">PropagatorOutputInfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> 
                                                                                <span class="n">spacecraft_id</span><span class="o">=</span><span class="n">spc</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">spc_prop_out_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Skipping spacecraft with id </span><span class="si">%s</span><span class="s2"> since propagation state output is not available.&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">spc</span><span class="o">.</span><span class="n">_id</span> <span class="p">))</span>
                <span class="k">continue</span> <span class="c1"># skip this spacecraft since propagation output is not available. </span>

            <span class="n">spc_state_cart_file</span> <span class="o">=</span> <span class="n">spc_prop_out_info</span><span class="o">.</span><span class="n">stateCartFile</span>
            <span class="n">spc_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">spc_state_cart_file</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="c1">## directory in which the state-file is written</span>

            <span class="c1"># loop over all the instruments and modes (per instrument) and calculate the corresponding coverage, data-metrics</span>
            <span class="k">if</span> <span class="n">spc</span><span class="o">.</span><span class="n">instrument</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">instru_idx</span><span class="p">,</span> <span class="n">instru</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">spc</span><span class="o">.</span><span class="n">instrument</span><span class="p">):</span>

                    <span class="k">for</span> <span class="n">mode_idx</span><span class="p">,</span> <span class="n">mode</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instru</span><span class="o">.</span><span class="n">mode</span><span class="p">):</span> 

                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">coverageType</span> <span class="o">==</span> <span class="s2">&quot;GRID COVERAGE&quot;</span><span class="p">:</span>         

                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Grid not specified, skipping Grid Coverage, Data metrics calculations.&#39;</span><span class="p">)</span>
                                <span class="k">continue</span>
                            <span class="k">for</span> <span class="n">grid_idx</span><span class="p">,</span> <span class="n">grid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">):</span>     

                                <span class="n">cov_out_info</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">locate_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> 
                                                                                <span class="n">out_info_type</span><span class="o">=</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">CoverageOutputInfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> 
                                                                                <span class="n">coverage_type</span><span class="o">=</span> <span class="s2">&quot;GRID COVERAGE&quot;</span><span class="p">,</span> <span class="n">spacecraft_id</span><span class="o">=</span><span class="n">spc</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span>  <span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">grid_id</span><span class="o">=</span><span class="n">grid</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
                                                                               

                                <span class="n">dm_file</span> <span class="o">=</span> <span class="n">spc_dir</span> <span class="o">+</span> <span class="s1">&#39;datametrics_instru&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">instru_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_mode&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_grid&#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">grid_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
                                <span class="n">dm_calc</span> <span class="o">=</span> <span class="n">DataMetricsCalculator</span><span class="p">(</span><span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="o">=</span><span class="n">spc_state_cart_file</span><span class="p">,</span> <span class="n">access_file_info</span><span class="o">=</span><span class="n">AccessFileInfo</span><span class="p">(</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">cov_out_info</span><span class="o">.</span><span class="n">accessFile</span><span class="p">))</span>                    
                                <span class="n">x</span> <span class="o">=</span> <span class="n">dm_calc</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">out_datametrics_fl</span><span class="o">=</span><span class="n">dm_file</span><span class="p">,</span> <span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>   
                                <span class="n">oi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>      
                                            
                        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">coverageType</span> <span class="o">==</span> <span class="s2">&quot;POINTING OPTIONS WITH GRID COVERAGE&quot;</span><span class="p">:</span>

                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Grid not specified, skipping Grid Coverage, Data metrics calculations.&#39;</span><span class="p">)</span>
                                <span class="k">continue</span>
                            <span class="k">for</span> <span class="n">grid_idx</span><span class="p">,</span> <span class="n">grid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">):</span>     

                                <span class="n">cov_out_info</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">locate_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> 
                                                                                <span class="n">out_info_type</span><span class="o">=</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">CoverageOutputInfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> 
                                                                                <span class="n">coverage_type</span><span class="o">=</span> <span class="s2">&quot;POINTING OPTIONS WITH GRID COVERAGE&quot;</span><span class="p">,</span> <span class="n">spacecraft_id</span><span class="o">=</span><span class="n">spc</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span>  <span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">grid_id</span><span class="o">=</span><span class="n">grid</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
                                                                               

                                <span class="n">dm_file</span> <span class="o">=</span> <span class="n">spc_dir</span> <span class="o">+</span> <span class="s1">&#39;datametrics_instru&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">instru_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_mode&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_grid&#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">grid_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
                                <span class="n">dm_calc</span> <span class="o">=</span> <span class="n">DataMetricsCalculator</span><span class="p">(</span><span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="o">=</span><span class="n">spc_state_cart_file</span><span class="p">,</span> <span class="n">access_file_info</span><span class="o">=</span><span class="n">AccessFileInfo</span><span class="p">(</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">cov_out_info</span><span class="o">.</span><span class="n">accessFile</span><span class="p">))</span>                    
                                <span class="n">x</span> <span class="o">=</span> <span class="n">dm_calc</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">out_datametrics_fl</span><span class="o">=</span><span class="n">dm_file</span><span class="p">,</span> <span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span> 
                                <span class="n">oi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

                        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">coverageType</span> <span class="o">==</span> <span class="s2">&quot;POINTING OPTIONS COVERAGE&quot;</span><span class="p">:</span>

                            <span class="n">cov_out_info</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">locate_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> 
                                                                                <span class="n">out_info_type</span><span class="o">=</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">OutputInfoType</span><span class="o">.</span><span class="n">CoverageOutputInfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> 
                                                                                <span class="n">coverage_type</span><span class="o">=</span> <span class="s2">&quot;POINTING OPTIONS COVERAGE&quot;</span><span class="p">,</span> <span class="n">spacecraft_id</span><span class="o">=</span><span class="n">spc</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span>  <span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">grid_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

                            <span class="n">dm_file</span> <span class="o">=</span> <span class="n">spc_dir</span> <span class="o">+</span> <span class="s1">&#39;datametrics_instru&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">instru_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_mode&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
                            <span class="n">dm_calc</span> <span class="o">=</span> <span class="n">DataMetricsCalculator</span><span class="p">(</span><span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="o">=</span><span class="n">spc_state_cart_file</span><span class="p">,</span> <span class="n">access_file_info</span><span class="o">=</span><span class="n">AccessFileInfo</span><span class="p">(</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">cov_out_info</span><span class="o">.</span><span class="n">accessFile</span><span class="p">))</span>                    
                            <span class="n">x</span> <span class="o">=</span> <span class="n">dm_calc</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">out_datametrics_fl</span><span class="o">=</span><span class="n">dm_file</span><span class="p">,</span> <span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span> 
                            <span class="n">oi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                    
        <span class="c1"># delete any output-info object(s) associated with a previous execution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">delete_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">other_out_info_object</span><span class="o">=</span><span class="n">oi</span><span class="p">)</span>            
        <span class="c1"># add output-info(s) to the instance variable </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">add_to_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">oi</span><span class="p">)</span>    

        <span class="k">return</span> <span class="n">oi</span>           </div>

<div class="viewcode-block" id="Mission.execute_archived"><a class="viewcode-back" href="../../generated/orbitpy.mission.Mission.html#orbitpy.mission.Mission.execute_archived">[docs]</a>    <span class="k">def</span> <span class="nf">execute_archived</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Execute a mission where all the spacecrafts are propagated, (field-of-regard) coverage calculated for all spacecraft-instrument-modes, </span>
<span class="sd">            ground-station contact-periods computed between all spacecraft-ground-station pairs and intersatellite contact-periods</span>
<span class="sd">            computed for all possible spacecraft pairs.</span>

<span class="sd">            .. note:: In case of *GRID COVERAGE* calculation, the field-of-regard is used (and not the scene-field-of-view). In case of SAR instruments and coverage calculations</span>
<span class="sd">                        involving grid (i.e. *GRID COVERAGE* and *POINTING OPTIONS WITH GRID COVERAGE*), only the access at the middle of a continuous access interval is shown</span>
<span class="sd">                        (see :ref:`correction_of_access_files`). </span>

<span class="sd">            :return: Mission output info as an heterogenous list of output info objects from propagation, coverage and contact calculations.</span>
<span class="sd">            :rtype: list, :class:`orbitpy.propagate.PropagatorOutputInfo`, :class:`orbitpy.coveragecalculator.CoverageOutputInfo`, :class:`orbitpy.contactfinder.ContactFinderOutputInfo`</span>

<span class="sd">        &quot;&quot;&quot;</span>           
        <span class="n">out_info</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># list to accululate info objects of the various executions        </span>

        <span class="c1"># Save auto-grids to files</span>
        <span class="k">for</span> <span class="n">grid_idx</span><span class="p">,</span> <span class="n">grid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">grid_idx</span><span class="p">]</span><span class="o">.</span><span class="n">filepath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># must be an auto-grid configuration, so filepath instance variable is None</span>
                <span class="n">fp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">outDir</span> <span class="o">+</span> <span class="s1">&#39;/grid&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">grid_idx</span><span class="p">)</span>  <span class="c1"># save the file with name according to the index. TODO: check that there is no-conflict with an custom-grid file.</span>
                <span class="n">oi</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="n">grid_idx</span><span class="p">]</span><span class="o">.</span><span class="n">write_to_file</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
                <span class="c1"># delete any output-info object associated with a previous execution</span>
                <span class="n">out_info</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">OutputInfoUtility</span><span class="o">.</span><span class="n">delete_output_info_object_in_list</span><span class="p">(</span><span class="n">out_info_list</span><span class="o">=</span><span class="n">out_info</span><span class="p">,</span> <span class="n">other_out_info_object</span><span class="o">=</span><span class="n">oi</span><span class="p">)</span>            
                <span class="c1"># add output-info to the instance variable </span>
                <span class="n">out_info</span> <span class="o">=</span> <span class="n">orbitpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">add_to_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputInfo</span><span class="p">,</span> <span class="n">out_info</span><span class="p">)</span>

        <span class="c1"># execute orbit propagation for all satellites in the mission</span>
        <span class="k">for</span> <span class="n">spc_idx</span><span class="p">,</span> <span class="n">spc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">):</span>
            
            <span class="c1"># make satellite directory</span>
            <span class="n">sat_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">outDir</span> <span class="o">+</span> <span class="s1">&#39;/sat&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">spc_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sat_dir</span><span class="p">):</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">sat_dir</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sat_dir</span><span class="p">)</span>

            <span class="n">state_cart_file</span> <span class="o">=</span> <span class="n">sat_dir</span> <span class="o">+</span> <span class="s1">&#39;state_cartesian.csv&#39;</span>
            <span class="n">state_kep_file</span> <span class="o">=</span> <span class="n">sat_dir</span> <span class="o">+</span> <span class="s1">&#39;state_keplerian.csv&#39;</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">propagator</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">spc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">epoch</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="p">,</span> <span class="n">state_kep_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
            <span class="n">out_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

            <span class="c1"># loop over all the instruments and modes (per instrument) and calculate the corresponding coverage, data-metrics</span>
            <span class="k">if</span> <span class="n">spc</span><span class="o">.</span><span class="n">instrument</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">instru_idx</span><span class="p">,</span> <span class="n">instru</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">spc</span><span class="o">.</span><span class="n">instrument</span><span class="p">):</span>

                    <span class="k">for</span> <span class="n">mode_idx</span><span class="p">,</span> <span class="n">mode</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instru</span><span class="o">.</span><span class="n">mode</span><span class="p">):</span>                        
                        
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">coverageType</span> <span class="o">==</span> <span class="s2">&quot;GRID COVERAGE&quot;</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Grid not specified, skipping Grid Coverage, Data metrics calculations.&#39;</span><span class="p">)</span>
                                <span class="k">continue</span>
                            <span class="c1"># iterate over multiple grids, auto-grids have already been processed to files</span>
                            <span class="k">for</span> <span class="n">grid_idx</span><span class="p">,</span> <span class="n">grid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">):</span>

                                <span class="n">acc_fl</span> <span class="o">=</span> <span class="n">sat_dir</span> <span class="o">+</span> <span class="s1">&#39;access_instru&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">instru_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_mode&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_grid&#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">grid_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
                                <span class="n">cov_calc</span> <span class="o">=</span> <span class="n">GridCoverage</span><span class="p">(</span><span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="o">=</span><span class="n">state_cart_file</span><span class="p">)</span>
                                <span class="c1"># For SAR instruments pick only the time-instants at the middle of access-intervals</span>
                                <span class="k">if</span> <span class="n">instru</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s1">&#39;Synthetic Aperture Radar&#39;</span><span class="p">:</span>
                                    <span class="n">mid_access_only</span> <span class="o">=</span> <span class="kc">True</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">mid_access_only</span> <span class="o">=</span> <span class="kc">False</span>
                                <span class="n">x</span> <span class="o">=</span> <span class="n">cov_calc</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">use_field_of_regard</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">out_file_access</span><span class="o">=</span><span class="n">acc_fl</span><span class="p">)</span>
                                <span class="n">out_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>     

                                <span class="n">dm_file</span> <span class="o">=</span> <span class="n">sat_dir</span> <span class="o">+</span> <span class="s1">&#39;datametrics_instru&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">instru_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_mode&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_grid&#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">grid_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
                                <span class="n">dm_calc</span> <span class="o">=</span> <span class="n">DataMetricsCalculator</span><span class="p">(</span><span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="o">=</span><span class="n">state_cart_file</span><span class="p">,</span> <span class="n">access_file_info</span><span class="o">=</span><span class="n">AccessFileInfo</span><span class="p">(</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">acc_fl</span><span class="p">))</span>                    
                                <span class="n">x</span> <span class="o">=</span> <span class="n">dm_calc</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">out_datametrics_fl</span><span class="o">=</span><span class="n">dm_file</span><span class="p">,</span> <span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
                                <span class="n">out_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  

                        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">coverageType</span> <span class="o">==</span> <span class="s2">&quot;POINTING OPTIONS COVERAGE&quot;</span><span class="p">:</span>
                            <span class="n">acc_fl</span> <span class="o">=</span> <span class="n">sat_dir</span> <span class="o">+</span> <span class="s1">&#39;access_instru&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">instru_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_mode&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
                            <span class="n">cov_calc</span> <span class="o">=</span> <span class="n">PointingOptionsCoverage</span><span class="p">(</span><span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="o">=</span><span class="n">state_cart_file</span><span class="p">)</span>
                            <span class="n">x</span> <span class="o">=</span> <span class="n">cov_calc</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">out_file_access</span><span class="o">=</span><span class="n">acc_fl</span><span class="p">)</span>
                            <span class="n">out_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

                            <span class="n">dm_file</span> <span class="o">=</span> <span class="n">sat_dir</span> <span class="o">+</span> <span class="s1">&#39;datametrics_instru&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">instru_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_mode&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
                            <span class="n">dm_calc</span> <span class="o">=</span> <span class="n">DataMetricsCalculator</span><span class="p">(</span><span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="o">=</span><span class="n">state_cart_file</span><span class="p">,</span> <span class="n">access_file_info</span><span class="o">=</span><span class="n">AccessFileInfo</span><span class="p">(</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">acc_fl</span><span class="p">))</span>                    
                            <span class="n">x</span> <span class="o">=</span> <span class="n">dm_calc</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">out_datametrics_fl</span><span class="o">=</span><span class="n">dm_file</span><span class="p">,</span> <span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
                            <span class="n">out_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

                        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">coverageType</span> <span class="o">==</span> <span class="s2">&quot;POINTING OPTIONS WITH GRID COVERAGE&quot;</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Grid not specified, skipping Pointing Options With Grid Coverage, Data metrics calculations.&#39;</span><span class="p">)</span>
                                <span class="k">continue</span>
                            <span class="c1"># iterate over multiple grids, auto-grids have already been processed to files</span>
                            <span class="k">for</span> <span class="n">grid_idx</span><span class="p">,</span> <span class="n">grid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">):</span>

                                <span class="n">acc_fl</span> <span class="o">=</span> <span class="n">sat_dir</span> <span class="o">+</span> <span class="s1">&#39;access_instru&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">instru_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_mode&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_grid&#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">grid_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
                                <span class="n">cov_calc</span> <span class="o">=</span> <span class="n">PointingOptionsWithGridCoverage</span><span class="p">(</span><span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="o">=</span><span class="n">state_cart_file</span><span class="p">)</span>
                                
                                <span class="c1"># For SAR instruments pick only the time-instants at the middle of access-intervals</span>
                                <span class="k">if</span> <span class="n">instru</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s1">&#39;Synthetic Aperture Radar&#39;</span><span class="p">:</span>
                                    <span class="n">mid_access_only</span> <span class="o">=</span> <span class="kc">True</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">mid_access_only</span> <span class="o">=</span> <span class="kc">False</span>
                                <span class="n">x</span> <span class="o">=</span> <span class="n">cov_calc</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">out_file_access</span><span class="o">=</span><span class="n">acc_fl</span><span class="p">,</span> <span class="n">mid_access_only</span><span class="o">=</span><span class="n">mid_access_only</span><span class="p">)</span>
                                <span class="n">out_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                        
                                <span class="n">dm_file</span> <span class="o">=</span> <span class="n">sat_dir</span> <span class="o">+</span> <span class="s1">&#39;datametrics_instru&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">instru_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_mode&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_grid&#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">grid_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
                                <span class="n">dm_calc</span> <span class="o">=</span> <span class="n">DataMetricsCalculator</span><span class="p">(</span><span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="o">=</span><span class="n">state_cart_file</span><span class="p">,</span> <span class="n">access_file_info</span><span class="o">=</span><span class="n">AccessFileInfo</span><span class="p">(</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">acc_fl</span><span class="p">))</span>                    
                                <span class="n">x</span> <span class="o">=</span> <span class="n">dm_calc</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">out_datametrics_fl</span><span class="o">=</span><span class="n">dm_file</span><span class="p">,</span> <span class="n">instru_id</span><span class="o">=</span><span class="n">instru</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
                                <span class="n">out_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        
        
            <span class="c1"># loop over all the ground-stations and calculate contacts</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">groundStation</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">gnd_stn_idx</span><span class="p">,</span> <span class="n">gnd_stn</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groundStation</span><span class="p">):</span>
                    
                    <span class="n">out_gnd_stn_file</span> <span class="o">=</span> <span class="s1">&#39;gndStn&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">gnd_stn_idx</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;_contacts.csv&#39;</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="n">ContactFinder</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">spc</span><span class="p">,</span> <span class="n">gnd_stn</span><span class="p">,</span> <span class="n">sat_dir</span><span class="p">,</span> <span class="n">state_cart_file</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">out_gnd_stn_file</span><span class="p">,</span> <span class="n">ContactFinder</span><span class="o">.</span><span class="n">OutType</span><span class="o">.</span><span class="n">INTERVAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">out_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

        <span class="c1"># Calculate inter-satellite contacts</span>
        <span class="n">intersat_comm_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">outDir</span> <span class="o">+</span> <span class="s1">&#39;/comm/&#39;</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">intersat_comm_dir</span><span class="p">):</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">intersat_comm_dir</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">intersat_comm_dir</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">spc1_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">)):</span>
            <span class="n">spc1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">[</span><span class="n">spc1_idx</span><span class="p">]</span>
            <span class="n">spc1_state_cart_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">outDir</span> <span class="o">+</span> <span class="s1">&#39;sat&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">spc1_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/state_cartesian.csv&#39;</span>
            
            <span class="c1"># loop over the rest of the spacecrafts in the list (i.e. from the current spacecraft to the last spacecraft in the list)</span>
            <span class="k">for</span> <span class="n">spc2_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">spc1_idx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">)):</span>
                
                <span class="n">spc2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacecraft</span><span class="p">[</span><span class="n">spc2_idx</span><span class="p">]</span>
                <span class="n">spc2_state_cart_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">outDir</span> <span class="o">+</span> <span class="s1">&#39;sat&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">spc2_idx</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/state_cartesian.csv&#39;</span>
                                
                <span class="n">out_intersat_filename</span> <span class="o">=</span> <span class="s1">&#39;sat&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">spc1_idx</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;_to_sat&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">spc2_idx</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.csv&#39;</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">ContactFinder</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">spc1</span><span class="p">,</span> <span class="n">spc2</span><span class="p">,</span> <span class="n">intersat_comm_dir</span><span class="p">,</span> <span class="n">spc1_state_cart_file</span><span class="p">,</span> <span class="n">spc2_state_cart_file</span><span class="p">,</span> <span class="n">out_intersat_filename</span><span class="p">,</span> <span class="n">ContactFinder</span><span class="o">.</span><span class="n">OutType</span><span class="o">.</span><span class="n">INTERVAL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">opaqueAtmosHeight</span><span class="p">)</span>
                <span class="n">out_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    
        <span class="k">return</span> <span class="n">out_info</span></div></div>





        
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, BAERI.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>