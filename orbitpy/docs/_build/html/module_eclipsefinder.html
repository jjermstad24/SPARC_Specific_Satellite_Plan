

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>orbit.eclipsefinder — Eclipse Finder Module &mdash; OrbitPy 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="EclipseFinder" href="generated/orbitpy.eclipsefinder.EclipseFinder.html" />
    <link rel="prev" title="ContactPairs" href="generated/orbitpy.contactfinder.ContactPairs.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> OrbitPy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="user_guide.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api_reference.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="module_constellation.html"><code class="docutils literal notranslate"><span class="pre">orbit.constellation</span></code> — Constellation Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_propagator.html"><code class="docutils literal notranslate"><span class="pre">orbit.propagator</span></code> — Propagator Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_grid.html"><code class="docutils literal notranslate"><span class="pre">orbit.grid</span></code> — Grid Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_coveragecalculator.html"><code class="docutils literal notranslate"><span class="pre">orbitpy.coveragecalculator</span></code> — Coverage Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_contactfinder.html"><code class="docutils literal notranslate"><span class="pre">orbit.contactfinder</span></code> — Contact Finder Module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">orbit.eclipsefinder</span></code> — Eclipse Finder Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#description">Description</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#references">References</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output-data-file-format">Output data file format</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api">API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="generated/orbitpy.eclipsefinder.EclipseFinder.html">EclipseFinder</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/orbitpy.eclipsefinder.EclipseFinderOutputInfo.html">EclipseFinderOutputInfo</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="module_datametricscalculator.html"><code class="docutils literal notranslate"><span class="pre">orbitpy.datametricscalculator</span></code> — Data Metrics Calculator Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_mission.html"><code class="docutils literal notranslate"><span class="pre">orbit.mission</span></code> — Mission Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_sensorpixelprojection.html"><code class="docutils literal notranslate"><span class="pre">orbit.sensorpixelprojection</span></code> — Sensor Pixel Projection</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_util.html"><code class="docutils literal notranslate"><span class="pre">orbitpy.util</span></code> — Util Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="miscellaneous.html">Miscellaneous</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OrbitPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="api_reference.html">API Reference</a> &raquo;</li>
        
      <li><code class="docutils literal notranslate"><span class="pre">orbit.eclipsefinder</span></code> — Eclipse Finder Module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/module_eclipsefinder.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="orbit-eclipsefinder-eclipse-finder-module">
<h1><code class="docutils literal notranslate"><span class="pre">orbit.eclipsefinder</span></code> — Eclipse Finder Module<a class="headerlink" href="#orbit-eclipsefinder-eclipse-finder-module" title="Permalink to this heading">¶</a></h1>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This module provides the class (<code class="docutils literal notranslate"><span class="pre">EclipseFinder</span></code>) to compute eclipses time-intervals of a satellite (i.e. the times at which the satellite does not have
a line-of-sight to the Sun).</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">instrupy.util.GeoUtilityFunctions.SunVector_ECIeq</span></code> function from the InstruPy package is called to determine the Sun position in the
Earth Centered Inertial frame (equatorial plane) based on the algorithm in [1].
The <code class="xref py py-class docutils literal notranslate"><span class="pre">instrupy.util.GeoUtilityFunctions.checkLOSavailability</span></code> function from the InstruPy package is called to determine if line-of-sight exists between the
satellite and the Sun with the occluding body as Earth based on the algorithm in [2].</p>
<p>A data file with the satellite states at different times of the mission is required as input. At each of these times the LOS condition is evaluated
from the satellite to the Sun. The format of the input data file of the satellite states is the same as the format of the output data file of the
<code class="xref py py-class docutils literal notranslate"><span class="pre">orbitpy.propagator</span></code> module (see <a class="reference internal" href="module_propagator.html#module-propagator"><span class="std std-ref">orbit.propagator — Propagator Module</span></a>). The states must be of the type <code class="docutils literal notranslate"><span class="pre">CARTESIAN_EARTH_CENTERED_INERTIAL</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">EclipseFinder</span></code> class is to be utilized by invoking the static-methods <code class="docutils literal notranslate"><span class="pre">execute(.)</span></code>, i.e. utilization of this
class does <strong>not</strong> involve creation of a class instance.</p>
</div>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>David A.Vallado, <em>Fundamental of Astrodynamics and Applications,</em> 4th ed, Page 280.</p></li>
<li><p>David A. Vallado, <em>Fundamental of Astrodynamics and Applications,</em> 4th ed, Page 198, (the first algorithm
of the two described).</p></li>
</ol>
</div>
<div class="section" id="output-data-file-format">
<h3>Output data file format<a class="headerlink" href="#output-data-file-format" title="Permalink to this heading">¶</a></h3>
<p>The results can be stored in a concise manner where the time-intervals at which the eclipse exists are written and/or in a descriptive manner where
the presence of eclipse at each time tick is indicated as either True or False. Below is the description of the format of the
output csv files.</p>
<ol class="arabic">
<li><p><em>INTERVAL</em>:</p>
<blockquote>
<div><ul class="simple">
<li><p>The first row indicates the spacecraft identifier for which the eclipses were evaluated.</p></li>
<li><p>The second row containing the mission epoch in Julian Day UT1. The time (index) in the state data is referenced to this epoch.</p></li>
<li><p>The third row contains the time step-size in seconds.</p></li>
</ul>
<p>The later lines contain the interval data in csv format with the following column headers:</p>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">Eclipse file INTERVAL data format</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Data type</p></th>
<th class="head"><p>Units</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>start index</p></td>
<td><p>int</p></td>
<td></td>
<td><p>Eclipse start time-index.</p></td>
</tr>
<tr class="row-odd"><td><p>stop index</p></td>
<td><p>int</p></td>
<td></td>
<td><p>Eclipse stop time-index.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p><em>DETAIL</em>:</p>
<blockquote>
<div><ul class="simple">
<li><p>The first row indicates the spacecraft identifier for which the eclipses were evaluated.</p></li>
<li><p>The second row containing the mission epoch in Julian Day UT1. The time (index) in the state data is referenced to this epoch.</p></li>
<li><p>The third row contains the time step-size in seconds.</p></li>
</ul>
<p>The later lines contain the interval data in csv format with the following column headers:</p>
<table class="colwidths-given docutils align-default" id="id2">
<caption><span class="caption-text">Eclipse file DETAIL data format</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Data type</p></th>
<th class="head"><p>Units</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>time index</p></td>
<td><p>int</p></td>
<td></td>
<td><p>Time-index.</p></td>
</tr>
<tr class="row-odd"><td><p>eclipse</p></td>
<td><p>bool</p></td>
<td></td>
<td><p>‘T’ indicating True or F indicating False.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ol>
<p>A <code class="docutils literal notranslate"><span class="pre">EclipseFinderOutputInfo</span></code> object is also returned upon the execution of the eclipse finder (<code class="docutils literal notranslate"><span class="pre">EclipseFinder.execute(.)</span></code>).
This object contains meta information about the results.</p>
</div>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">spc</span></code> satellite is defined and the orbit propagated to obtain the state information.
The eclipse finder is executed by passing the <code class="docutils literal notranslate"><span class="pre">spc</span></code> object, the path to the satellite state file,
path to the output directory and output format as <code class="docutils literal notranslate"><span class="pre">INTERVAL</span></code>. Since an output filename is not specified, the name <em>eclipse.csv</em> is chosen.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">orbitpy.util</span> <span class="kn">import</span> <span class="n">Spacecraft</span><span class="p">,</span> <span class="n">GroundStation</span>
<span class="kn">from</span> <span class="nn">orbitpy.propagator</span> <span class="kn">import</span> <span class="n">PropagatorFactory</span>
<span class="kn">from</span> <span class="nn">orbitpy.eclipsefinder</span> <span class="kn">import</span> <span class="n">EclipseFinder</span>

<span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>

<span class="sd">&#39;&#39;&#39; Propagate satellite to obtain the state information.&#39;&#39;&#39;</span>
<span class="n">factory</span> <span class="o">=</span> <span class="n">PropagatorFactory</span><span class="p">()</span>
<span class="n">j2_prop</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="n">get_propagator</span><span class="p">({</span><span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s1">&#39;J2 ANALYTICAL PROPAGATOR&#39;</span><span class="p">,</span> <span class="s2">&quot;stepSize&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>

<span class="n">spc</span> <span class="o">=</span> <span class="n">Spacecraft</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;orbitState&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;date&quot;</span><span class="p">:{</span><span class="s2">&quot;@type&quot;</span><span class="p">:</span><span class="s2">&quot;GREGORIAN_UT1&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">:</span><span class="mi">2021</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;day&quot;</span><span class="p">:</span><span class="mi">28</span><span class="p">,</span> <span class="s2">&quot;hour&quot;</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span> <span class="s2">&quot;minute&quot;</span><span class="p">:</span><span class="mi">29</span><span class="p">,</span> <span class="s2">&quot;second&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span> \
                            <span class="s2">&quot;state&quot;</span><span class="p">:{</span><span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;KEPLERIAN_EARTH_CENTERED_INERTIAL&quot;</span><span class="p">,</span> <span class="s2">&quot;sma&quot;</span><span class="p">:</span> <span class="mf">7073.9</span><span class="p">,</span> <span class="s2">&quot;ecc&quot;</span><span class="p">:</span> <span class="mf">0.000133</span><span class="p">,</span> <span class="s2">&quot;inc&quot;</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span> <span class="s2">&quot;raan&quot;</span><span class="p">:</span> <span class="mf">38.3243</span><span class="p">,</span> <span class="s2">&quot;aop&quot;</span><span class="p">:</span> <span class="mf">86.2045</span><span class="p">,</span> <span class="s2">&quot;ta&quot;</span><span class="p">:</span> <span class="mf">273.932</span><span class="p">}</span> \
                           <span class="p">}})</span>
<span class="n">state_cart_file_spc</span> <span class="o">=</span> <span class="n">out_dir</span> <span class="o">+</span> <span class="s1">&#39;/cart_states_spc.csv&#39;</span>
<span class="n">j2_prop</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">out_file_cart</span><span class="o">=</span><span class="n">state_cart_file_spc</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot; Run the eclipse finder and store results in the directory specified by out_dir.&quot;&quot;&quot;</span>
<span class="n">out_info</span> <span class="o">=</span> <span class="n">EclipseFinder</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">spacecraft</span><span class="o">=</span><span class="n">spc</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">state_cart_fl</span><span class="o">=</span><span class="n">state_cart_file_spc</span><span class="p">,</span> <span class="n">out_filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out_type</span><span class="o">=</span><span class="n">ContactFinder</span><span class="o">.</span><span class="n">OutType</span><span class="o">.</span><span class="n">INTERVAL</span><span class="p">)</span>

<span class="n">Eclipse</span><span class="o">.</span><span class="n">csv</span>
<span class="o">-----------------</span>
<span class="n">Eclipse</span> <span class="n">times</span> <span class="k">for</span> <span class="n">Spacecraft</span> <span class="k">with</span> <span class="nb">id</span> <span class="mi">80</span><span class="n">fe4d2e</span><span class="o">-</span><span class="mi">2</span><span class="n">ff0</span><span class="o">-</span><span class="mi">486</span><span class="n">d</span><span class="o">-</span><span class="n">b00e</span><span class="o">-</span><span class="mi">3</span><span class="n">d74ffce0b2e</span>
<span class="n">Epoch</span> <span class="p">[</span><span class="n">JDUT1</span><span class="p">]</span> <span class="ow">is</span> <span class="mf">2459243.020162037</span>
<span class="n">Step</span> <span class="n">size</span> <span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="ow">is</span> <span class="mf">10.0</span>
<span class="n">start</span> <span class="n">index</span><span class="p">,</span><span class="n">end</span> <span class="n">index</span>
<span class="mi">49</span><span class="p">,</span><span class="mi">257</span>
<span class="mi">641</span><span class="p">,</span><span class="mi">848</span>
<span class="mi">1232</span><span class="p">,</span><span class="mi">1440</span>
<span class="mi">1824</span><span class="p">,</span><span class="mi">2031</span>
<span class="mi">2415</span><span class="p">,</span><span class="mi">2623</span>
<span class="o">...</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this heading">¶</a></h2>
<p class="rubric">Classes</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/orbitpy.eclipsefinder.EclipseFinder.html#orbitpy.eclipsefinder.EclipseFinder" title="orbitpy.eclipsefinder.EclipseFinder"><code class="xref py py-obj docutils literal notranslate"><span class="pre">orbitpy.eclipsefinder.EclipseFinder</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/orbitpy.eclipsefinder.EclipseFinderOutputInfo.html#orbitpy.eclipsefinder.EclipseFinderOutputInfo" title="orbitpy.eclipsefinder.EclipseFinderOutputInfo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">orbitpy.eclipsefinder.EclipseFinderOutputInfo</span></code></a></p></td>
<td><p>Class to hold information about the results of the eclipse-finder. An object of this class is returned upon the execution</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="generated/orbitpy.eclipsefinder.EclipseFinder.html" class="btn btn-neutral float-right" title="EclipseFinder" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="generated/orbitpy.contactfinder.ContactPairs.html" class="btn btn-neutral float-left" title="ContactPairs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, BAERI.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>