

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>instrupy.synthetic_aperture_radar_model &mdash; InstruPy 0.2 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> InstruPy
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../instrument_models.html">Instrument Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../miscellaneous.html">Miscellaneous</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../use_cases.html">Use Cases</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">InstruPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>instrupy.synthetic_aperture_radar_model</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for instrupy.synthetic_aperture_radar_model</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot; </span>
<span class="sd">.. module:: synthetic_aperture_radar_model</span>

<span class="sd">:synopsis: *Module to handle side-looking SAR instrument model.*</span>

<span class="sd">        The synthetic aperture radar model is based on the references listed below. The current version allows only for rectangular antenna specifications</span>
<span class="sd">        and uniform aperture excitation profile. </span>
<span class="sd">        The implementation allows for modeling different *configurations* of the instrument: </span>

<span class="sd">        1. *Scan technique:* Stripmap or ScanSAR supported.</span>
<span class="sd">        2. *Swath configuration:* Imaging of the entire illuminated swath (*FULL*) or imaging a smaller swath of fixed size (*FIXED*) (irrespective of the </span>
<span class="sd">        instrument look angle) is supported. </span>
<span class="sd">        3. *Polarization:* Single/ Compact or Quad polarization can be specified. In case of Quad-pol, either the *AIRSAR* [4] or *SMAP* [5] pulse configuration should be chosen.</span>

<span class="sd">        Inline code comments contain references to the following articles:</span>

<span class="sd">        1. Performance Limits for Synthetic Aperture Radar - second edition SANDIA Report 2006. ----&gt; Main reference.</span>
<span class="sd">        2. Spaceborne SAR Study: LDRD 92 Final Report SANDIA Report March 1993. ----&gt; Reference for PRF validity calculations, corrections for spaceborne radar.</span>
<span class="sd">        3. V. Ravindra and S. Nag, &quot;Instrument Data Metrics Evaluator for Tradespace Analysis of Earth Observing Constellations,&quot; 2020 IEEE Aerospace Conference, Big Sky, MT, USA, 2020, pp. 1-20, doi: 10.1109/AERO47225.2020.9172705.</span>
<span class="sd">        </span>
<span class="sd">        Polarimetry concepts:</span>
<span class="sd">        </span>
<span class="sd">        4. *Synthetic Aperture Radar Polarimetry,  Jakob Van Zyl* ----&gt; Reference for compact-pol and AIRSAR implementation for dual-pol.</span>
<span class="sd">        5. *SMAP Handbook* ----&gt; Reference for SMAP implementation of dual-pol.</span>
<span class="sd">        </span>
<span class="sd">        ScanSAR concepts</span>
<span class="sd">        </span>
<span class="sd">        6. Tomiyasu, Kiyo. &quot;Conceptual performance of a satellite borne, wide swath synthetic aperture radar.&quot; IEEE Transactions on Geoscience and Remote Sensing 2 (1981): 108-116.</span>
<span class="sd">        7. Moore, Richard K., John P. Claassen, and Y. H. Lin. &quot;Scanning spaceborne synthetic aperture radar with integrated radiometer.&quot; IEEE Transactions on Aerospace and Electronic Systems 3 (1981): 410-421.</span>
<span class="sd">        8. Currie, A., and Ma A. Brown. &quot;Wide-swath SAR.&quot; In IEE Proceedings F (Radar and Signal Processing), vol. 139, no. 2, pp. 122-135. IET Digital Library, 1992.</span>
<span class="sd">        9. Chang, Chi-Yung, Michael Y. Jin, Yun-Ling Lou, and Benjamin Holt. &quot;First SIR-C scansar results.&quot; IEEE transactions on geoscience and remote sensing 34, no. 5 (1996): 1278-1281.</span>

<span class="sd">.. todo:: Include frequency dependent atmospheric losses in :math:`\\sigma_{NESZ}` calculations.</span>

<span class="sd">.. todo:: Make separate objects for scanning-technique similar to the one in Radiometer model?</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">instrupy.util</span> <span class="kn">import</span> <span class="n">Entity</span><span class="p">,</span> <span class="n">EnumEntity</span><span class="p">,</span> <span class="n">Orientation</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">,</span> <span class="n">ViewGeometry</span><span class="p">,</span> <span class="n">Antenna</span><span class="p">,</span> <span class="n">Maneuver</span><span class="p">,</span> <span class="n">GeoUtilityFunctions</span><span class="p">,</span> <span class="n">MathUtilityFunctions</span><span class="p">,</span> <span class="n">Constants</span><span class="p">,</span> <span class="n">FileUtilityFunctions</span>

<div class="viewcode-block" id="ScanTech"><a class="viewcode-back" href="../../generated/instrupy.synthetic_aperture_radar_model.ScanTech.html#instrupy.synthetic_aperture_radar_model.ScanTech">[docs]</a><span class="k">class</span> <span class="nc">ScanTech</span><span class="p">(</span><span class="n">EnumEntity</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enumeration of recognized SAR scanning techniques.</span>
<span class="sd">    </span>
<span class="sd">    :cvar STRIPMAP: Stripmap imaging operation.</span>
<span class="sd">    :vartype STRIPMAP: str</span>

<span class="sd">    :cvar SCANSAR: ScanSAR imaging operation. Multiple strips are scanned in the cross-track direction to increase the overall swath-width </span>
<span class="sd">                   (but resulting in a coarser azimuth resolution due to reduced scan-time per strip). </span>
<span class="sd">    :vartype SCANSAR: str</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">STRIPMAP</span> <span class="o">=</span> <span class="s2">&quot;STRIPMAP&quot;</span><span class="p">,</span>
    <span class="n">SCANSAR</span> <span class="o">=</span> <span class="s2">&quot;SCANSAR&quot;</span></div>

<div class="viewcode-block" id="PolTypeSAR"><a class="viewcode-back" href="../../generated/instrupy.synthetic_aperture_radar_model.PolTypeSAR.html#instrupy.synthetic_aperture_radar_model.PolTypeSAR">[docs]</a><span class="k">class</span> <span class="nc">PolTypeSAR</span><span class="p">(</span><span class="n">EnumEntity</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enumeration of recognized SAR polarization types.</span>
<span class="sd">    </span>
<span class="sd">    :cvar SINGLE: Single transmit and receive polarization.</span>
<span class="sd">    :vartype SINGLE: str</span>

<span class="sd">    :cvar COMPACT: Single transmit and dual receive polarization.</span>
<span class="sd">    :vartype COMPACT: str</span>

<span class="sd">    :cvar DUAL: Dual transmit and dual receive polarization.</span>
<span class="sd">    :vartype DUAL: str    </span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">SINGLE</span> <span class="o">=</span> <span class="s2">&quot;SINGLE&quot;</span><span class="p">,</span>
    <span class="n">COMPACT</span> <span class="o">=</span> <span class="s2">&quot;COMPACT&quot;</span><span class="p">,</span>
    <span class="n">DUAL</span> <span class="o">=</span> <span class="s2">&quot;DUAL&quot;</span></div>

<div class="viewcode-block" id="DualPolPulseConfig"><a class="viewcode-back" href="../../generated/instrupy.synthetic_aperture_radar_model.DualPolPulseConfig.html#instrupy.synthetic_aperture_radar_model.DualPolPulseConfig">[docs]</a><span class="k">class</span> <span class="nc">DualPolPulseConfig</span><span class="p">(</span><span class="n">EnumEntity</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enumeration of recognized dual-polarization pulse configurations.</span>
<span class="sd">    </span>
<span class="sd">    :cvar AIRSAR: This pulse configuration is the same as the one implemented by the NASA/JPL AIRSAR systems (see Pg.32, Fig.2-5 in [4]). It consists of transmitting alternating pulses of orthogonal</span>
<span class="sd">                  polarization and filtering the received signal into separate orthogonal polarizations.      </span>
<span class="sd">    :vartype AIRSAR: str</span>

<span class="sd">    :cvar SMAP: This pulse configuration is the same as the one implemented by the SMAP radar (see Pg.41, Fig.26 in [5]). It consists of two slightly separated pulses of </span>
<span class="sd">                orthogonal polarizations at different frequency bands. The received signal is separated into the respective band and the orthogonal </span>
<span class="sd">                polarizations measured. WHen this pulse configuration is selected, it requires an additional parameter called as the :code:`pulseSeparation` to indicate the separation </span>
<span class="sd">                between the pulses of the two orthogonal polarizations. If not specified a default value of 50% of the pulse-width (:code:`pulseWidth`) is considered.</span>
<span class="sd">    :vartype SMAP: str</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">AIRSAR</span> <span class="o">=</span> <span class="s2">&quot;AIRSAR&quot;</span><span class="p">,</span>
    <span class="n">SMAP</span> <span class="o">=</span> <span class="s2">&quot;SMAP&quot;</span></div>

<div class="viewcode-block" id="SwathTypeSAR"><a class="viewcode-back" href="../../generated/instrupy.synthetic_aperture_radar_model.SwathTypeSAR.html#instrupy.synthetic_aperture_radar_model.SwathTypeSAR">[docs]</a><span class="k">class</span> <span class="nc">SwathTypeSAR</span><span class="p">(</span><span class="n">EnumEntity</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enumeration of recognized SAR swath imaging configurations.</span>
<span class="sd">    </span>
<span class="sd">    :cvar FULL: Tne entire illuminated swath by the main-lobe of the antenna is considered.</span>
<span class="sd">    :vartype FULL: str</span>

<span class="sd">    :cvar FIXED: A fixed swath size (less than the swath illuminated by the main-lobe) is considered. This configuration </span>
<span class="sd">                 could be adapted to meet the pule repetition frequency constraints.</span>
<span class="sd">    :vartype FIXED: str</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">FULL</span> <span class="o">=</span> <span class="s2">&quot;FULL&quot;</span><span class="p">,</span>
    <span class="n">FIXED</span> <span class="o">=</span> <span class="s2">&quot;FIXED&quot;</span></div>

<div class="viewcode-block" id="SyntheticApertureRadarModel"><a class="viewcode-back" href="../../generated/instrupy.synthetic_aperture_radar_model.SyntheticApertureRadarModel.html#instrupy.synthetic_aperture_radar_model.SyntheticApertureRadarModel">[docs]</a><span class="k">class</span> <span class="nc">SyntheticApertureRadarModel</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A synthetic aperture radar model class.      </span>
<span class="sd">      </span>
<span class="sd">        :cvar L_r: Reduction in SNR gain due to non-ideal range filtering (see [Pg.9, 1]). Default value is 1.2.</span>
<span class="sd">        :vartype L_r: float</span>

<span class="sd">        :cvar L_a: Reduction in SNR gain due to non-ideal azimuth filtering (see [Pg.10, 1]). Default value is 1.2.</span>
<span class="sd">        :vartype L_a: float</span>

<span class="sd">        :cvar a_wa:  Azimuth impulse response broadening factor (see [Pg.9, 1]). Default value is 1.2.</span>
<span class="sd">        :vartype a_wa: float</span>

<span class="sd">        :cvar a_wr: Range impulse response broadening factor (see [Pg.10, 1]). Default value is 1.2.</span>
<span class="sd">        :vartype a_wr: float</span>

<span class="sd">        :ivar name: Full name of the instrument.</span>
<span class="sd">        :vartype name: str</span>

<span class="sd">        :ivar mass: Total mass (kg) of this entity.</span>
<span class="sd">        :vartype mass: float</span>

<span class="sd">        :ivar volume: Total volume (m3) of this entity.</span>
<span class="sd">        :vartype volume: float</span>
<span class="sd">        </span>
<span class="sd">        :ivar power: Nominal operating power (W).</span>
<span class="sd">        :vartype power: float</span>

<span class="sd">        :ivar orientation: Orientation of the instrument.</span>
<span class="sd">        :vartype orientation: :class:`instrupy.util.Orientation`</span>

<span class="sd">        :ivar fieldOfView: Field of view of instrument specification (SphericalGeometry and Orientation).</span>
<span class="sd">        :vartype fieldOfView: :class:`instrupy.util.ViewGeometry`</span>

<span class="sd">        :ivar sceneFieldOfView: Scene field of view specification (SphericalGeometry and Orientation).</span>
<span class="sd">        :vartype fieldOfView: :class:`instrupy.util.ViewGeometry`</span>

<span class="sd">        :ivar maneuver: Maneuver specification of the instrument.</span>
<span class="sd">        :vartype maneuver: :class:`instrupy.util.Maneuver`  </span>

<span class="sd">        :ivar fieldOfRegard: Field of regard of the instrument taking into account the sensor FOV and manueverability of the satellite-sensor system. </span>
<span class="sd">                             Note that this shall be a list in order to accommodate non-intersecting view-geometries.</span>
<span class="sd">        :vartype fieldOfRegard: list, :class:`instrupy.util.ViewGeometry`  </span>
<span class="sd">       </span>
<span class="sd">        :ivar pointing_option: List of ``Orientation`` objects which specify the orientations into which the instrument-axis can be maneuvered. </span>
<span class="sd">                               The orientation must be specified in the NADIR_POINTING frame.</span>
<span class="sd">        :vartype pointing_option: list, :class:`orbitpy.util.Orientation` </span>

<span class="sd">        :ivar dataRate: Rate of data recorded (Mega-bits-per-sec) during nominal operations.</span>
<span class="sd">        :vartype dataRate: float  </span>

<span class="sd">        :ivar bitsPerPixel: Number of bits encoded per pixel of image.</span>
<span class="sd">        :vartype bitsPerPixel: int    </span>

<span class="sd">        :ivar pulseWidth: Actual pulse width in (seconds) (per channel/polarization).</span>
<span class="sd">        :vartype pulseWidth: float</span>

<span class="sd">        :ivar antenna: Antenna specifications. Only rectangular shape and uniform aperture excitation profile is accepted.</span>
<span class="sd">        :vartype antenna: :class:`instrupy.util.Antenna` </span>

<span class="sd">        :ivar operatingFrequency: Operating radar center frequency in (Hertz).</span>
<span class="sd">        :vartype operatingFrequency: float</span>

<span class="sd">        :ivar peakTransmitPower: Peak transmit power in (Watts).</span>
<span class="sd">        :vartype peakTransmitPower: float</span>

<span class="sd">        :ivar chirpBandwidth: Chirp bandwidth of radar operation in (Hertz) (per channel/polarization).</span>
<span class="sd">        :vartype chirpBandwidth: float</span>

<span class="sd">        :ivar minimumPRF: The minimum allowable pulse-repetition-frequency of operation in (Hertz). </span>
<span class="sd">                          If dual-pol with alternating pol pulses, the PRF specification is considered taking all pulses into account (i.e. is considered as the PRFmaster).</span>
<span class="sd">        :vartype minimumPRF: float</span>

<span class="sd">        :ivar maximumPRF: The maximum allowable pulse-repetition-frequency of operation in (Hertz).</span>
<span class="sd">                          If dual-pol with alternating pol pulses, the PRF specification is considered taking all pulses into account (i.e. is considered as the PRFmaster).</span>
<span class="sd">        :vartype maximumPRF: float</span>

<span class="sd">        :ivar sceneNoiseTemp: Nominal scene noise temperature in (Kelvin).</span>
<span class="sd">        :vartype sceneNoiseTemp: float</span>

<span class="sd">        :ivar systemNoiseFigure:  (decibels) System noise figure for the receiver. The system noise figure includes primarily the noise figure of the front-end Low-Noise</span>
<span class="sd">                                  Amplifier (LNA) and the losses between the antenna and the LNA. Typical system noise figures for sub-kilowatt radar systems are 3.0 dB to 3.5 dB</span>
<span class="sd">                                  at X-band, 3.5 dB to 4.5 dB at Ku-band, and perhaps 6 dB at Ka-band. See [Pg.15, 1].</span>
<span class="sd">        :vartype systemNoiseFigure: float</span>

<span class="sd">        :ivar radarLoss: (decibels) These include a variety of losses primarily over the microwave signal path, but doesn&#39;t include the atmosphere. Included are a power loss from transmitter power amplifier</span>
<span class="sd">                           output to the antenna port, and a two-way loss through the radome. Typical numbers might be 0.5 dB to 2 dB from TX amplifier to the</span>
<span class="sd">                           antenna port, and perhaps an additional 0.5 dB to 1.5 dB two-way through the radome. See [Pg.15, 1].</span>
<span class="sd">        :vartype radarLoss: float</span>

<span class="sd">        :ivar atmosLoss: 2-way atmospheric loss of electromagnetic energy (see [Pg.16, 1]).</span>
<span class="sd">        :vartype atmosLoss: float     </span>

<span class="sd">        :ivar polType: SAR polarization type.</span>
<span class="sd">        :vartype polType: :class:`instrupy.synthetic_aperture_radar_model.PolTypeSAR`</span>

<span class="sd">        :ivar dualPolPulseConfig: In case of dual-pol, this parameter indicates the pulse configuration.</span>
<span class="sd">        :vartype dualPolPulseConfig: :class:`DualPolPulseConfig` or None</span>

<span class="sd">        :ivar dualPolPulseSep: In case of SMAP dual-pol configuration, this parameter indicates the pulse separation in seconds.</span>
<span class="sd">        :vartype dualPolPulseSep: float or None</span>

<span class="sd">        :ivar scanTechnique: Scanning technique.</span>
<span class="sd">        :vartype scanTechnique: :class:`instrupy.synthetic_aperture_radar_model.ScanTech`</span>

<span class="sd">        :ivar swathType: Swath configuration.</span>
<span class="sd">        :vartype swathType: :class:`instrupy.synthetic_aperture_radar_model.SwathTypeSAR`       </span>

<span class="sd">        :ivar fixedSwathSize: In case of ``SwathTypeSAR.FIXED`` swath configuration, this parameter indicates the size of the fixed swath in kilometers.</span>
<span class="sd">        :vartype fixedSwathSize: float or None</span>

<span class="sd">        :ivar numSubSwaths: Number of sub-swaths (scans) in case of &quot;ScanSAR&quot; operation.</span>
<span class="sd">        :vartype numSubSwaths: int or None</span>

<span class="sd">        :ivar _id: Unique instrument identifier.</span>
<span class="sd">        :vartype _id: str or int</span>
<span class="sd">          </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">L_r</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mf">1.2</span><span class="p">)</span>
    <span class="n">L_a</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mf">1.2</span><span class="p">)</span>  
    <span class="n">a_wa</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mf">1.2</span><span class="p">)</span>  
    <span class="n">a_wr</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mf">1.2</span><span class="p">)</span>    

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">power</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="n">orientation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
            <span class="n">fieldOfViewGeometry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sceneFieldOfViewGeometry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maneuver</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pointingOption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
            <span class="n">dataRate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bitsPerPixel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pulseWidth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">antenna</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">operatingFrequency</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
            <span class="n">peakTransmitPower</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">chirpBandwidth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">minimumPRF</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maximumPRF</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
            <span class="n">radarLoss</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">atmosLoss</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sceneNoiseTemp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">systemNoiseFigure</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">polType</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dualPolPulseConfig</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dualPolPulseSep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">swathType</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
            <span class="n">scanTechnique</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fixedSwathSize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">numSubSwaths</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="n">_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Initialization. All except the below two parameters have identical description as that of the corresponding class instance variables.</span>

<span class="sd">        :param fieldOfViewGeometry: Instrument field-of-view spherical geometry.</span>
<span class="sd">        :paramtype fieldOfViewGeometry: :class:`instrupy.util.SphericalGeometry`</span>

<span class="sd">        :param sceneFieldOfViewGeometry: Scene field-of-view spherical geometry.</span>
<span class="sd">        :paramtype sceneFieldOfViewGeometry: :class:`instrupy.util.SphericalGeometry`</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>

<span class="sd">        &quot;&quot;&quot;</span>          
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mass</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">mass</span><span class="p">)</span> <span class="k">if</span> <span class="n">mass</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">volume</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">volume</span><span class="p">)</span> <span class="k">if</span> <span class="n">volume</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">power</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">power</span><span class="p">)</span> <span class="k">if</span> <span class="n">power</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">orientation</span><span class="p">)</span> <span class="k">if</span> <span class="n">orientation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">orientation</span><span class="p">,</span> <span class="n">Orientation</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fieldOfView</span> <span class="o">=</span> <span class="n">ViewGeometry</span><span class="p">(</span><span class="n">orien</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">orientation</span><span class="p">,</span> <span class="n">sph_geom</span><span class="o">=</span><span class="n">fieldOfViewGeometry</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">fieldOfViewGeometry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fieldOfViewGeometry</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sceneFieldOfView</span> <span class="o">=</span> <span class="n">ViewGeometry</span><span class="p">(</span><span class="n">orien</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">orientation</span><span class="p">,</span> <span class="n">sph_geom</span><span class="o">=</span><span class="n">sceneFieldOfViewGeometry</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">sceneFieldOfViewGeometry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sceneFieldOfViewGeometry</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maneuver</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">maneuver</span><span class="p">)</span> <span class="k">if</span> <span class="n">maneuver</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">maneuver</span><span class="p">,</span> <span class="n">Maneuver</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fieldOfRegard</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maneuver</span><span class="o">.</span><span class="n">calc_field_of_regard</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sceneFieldOfView</span><span class="o">.</span><span class="n">sph_geom</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maneuver</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneFieldOfView</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pointingOption</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pointingOption</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Orientation</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pointingOption</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pointingOption</span> <span class="o">=</span> <span class="n">pointingOption</span> 
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pointingOption</span><span class="p">,</span> <span class="n">Orientation</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pointingOption</span> <span class="o">=</span> <span class="p">[</span><span class="n">pointingOption</span><span class="p">]</span> <span class="c1"># make into single-element list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataRate</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">dataRate</span><span class="p">)</span> <span class="k">if</span> <span class="n">dataRate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>          
        <span class="bp">self</span><span class="o">.</span><span class="n">bitsPerPixel</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">bitsPerPixel</span><span class="p">)</span> <span class="k">if</span> <span class="n">bitsPerPixel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">pulseWidth</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">pulseWidth</span><span class="p">)</span> <span class="k">if</span> <span class="n">pulseWidth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">antenna</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">antenna</span><span class="p">)</span> <span class="k">if</span> <span class="n">antenna</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">antenna</span><span class="p">,</span> <span class="n">Antenna</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operatingFrequency</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">operatingFrequency</span><span class="p">)</span> <span class="k">if</span> <span class="n">operatingFrequency</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">peakTransmitPower</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">peakTransmitPower</span><span class="p">)</span> <span class="k">if</span> <span class="n">peakTransmitPower</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chirpBandwidth</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">chirpBandwidth</span><span class="p">)</span> <span class="k">if</span> <span class="n">chirpBandwidth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">minimumPRF</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">minimumPRF</span><span class="p">)</span> <span class="k">if</span> <span class="n">minimumPRF</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>   
        <span class="bp">self</span><span class="o">.</span><span class="n">maximumPRF</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">maximumPRF</span><span class="p">)</span> <span class="k">if</span> <span class="n">maximumPRF</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">sceneNoiseTemp</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sceneNoiseTemp</span><span class="p">)</span> <span class="k">if</span> <span class="n">sceneNoiseTemp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="mi">290</span><span class="p">)</span> <span class="c1"># 290 K is default  </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radarLoss</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">radarLoss</span><span class="p">)</span> <span class="k">if</span> <span class="n">radarLoss</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">atmosLoss</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">atmosLoss</span><span class="p">)</span> <span class="k">if</span> <span class="n">atmosLoss</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>         
        <span class="bp">self</span><span class="o">.</span><span class="n">systemNoiseFigure</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">systemNoiseFigure</span><span class="p">)</span> <span class="k">if</span> <span class="n">systemNoiseFigure</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">polType</span> <span class="o">=</span> <span class="n">PolTypeSAR</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">polType</span><span class="p">)</span> <span class="k">if</span> <span class="n">polType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">dualPolPulseConfig</span> <span class="o">=</span> <span class="n">DualPolPulseConfig</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">dualPolPulseConfig</span><span class="p">)</span> <span class="k">if</span> <span class="n">dualPolPulseConfig</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">dualPolPulseSep</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">dualPolPulseSep</span><span class="p">)</span> <span class="k">if</span> <span class="n">dualPolPulseSep</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">scanTechnique</span> <span class="o">=</span> <span class="n">ScanTech</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scanTechnique</span><span class="p">)</span> <span class="k">if</span> <span class="n">scanTechnique</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">swathType</span> <span class="o">=</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">swathType</span><span class="p">)</span> <span class="k">if</span> <span class="n">swathType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">fixedSwathSize</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">fixedSwathSize</span><span class="p">)</span> <span class="k">if</span> <span class="n">fixedSwathSize</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">numSubSwaths</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numSubSwaths</span><span class="p">)</span> <span class="k">if</span> <span class="n">numSubSwaths</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">SyntheticApertureRadarModel</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;Synthetic Aperture Radar&quot;</span><span class="p">)</span>
        
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Parses a ``SyntheticApertureRadarModel`` object from a normalized JSON dictionary.</span>
<span class="sd">            Refer to :ref:`synthetic_aperture_radar_model_desc` for description of the accepted key/value pairs.</span>

<span class="sd">        The following default values are assigned to the object instance parameters in case of </span>
<span class="sd">        :class:`None` values or missing key/value pairs in the input dictionary.</span>

<span class="sd">        .. csv-table:: Default values</span>
<span class="sd">            :header: Parameter, Default Value</span>
<span class="sd">            :widths: 10,40</span>

<span class="sd">            scanTech, ScanTech.STRIPMAP</span>
<span class="sd">            orientation, Orientation.Convention.SIDE_LOOK at 25 deg and ReferenceFrame.SC_BODY_FIXED</span>
<span class="sd">            sceneFieldOfViewGeometry, (Instrument) fieldOfViewGeometry</span>
<span class="sd">            polType, PolTypeSAR.SINGLE (single transmit and single receive)</span>
<span class="sd">            pulseSeparation, 50% of pulse length </span>
<span class="sd">            swathType, SwathTypeSAR.FULL  </span>
<span class="sd">            fixedSwathSize, 10 km</span>
<span class="sd">            numSubSwaths, 1</span>
<span class="sd">            atmosLoss, 2 dB</span>
<span class="sd">            _id, random string</span>
<span class="sd">        </span>
<span class="sd">        :param d: Normalized JSON dictionary with the corresponding model specifications. </span>
<span class="sd">        :paramtype d: dict</span>

<span class="sd">        :returns: ``SyntheticApertureRadarModel`` object initialized with the input specifications.</span>
<span class="sd">        :rtype: :class:`instrupy.SyntheticApertureRadarModel`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Only side-looking orientation of instrument supported for synthetic aperture radar </span>
        <span class="n">orien_dict</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;orientation&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;referenceFrame&quot;</span><span class="p">:</span> <span class="s2">&quot;SC_BODY_FIXED&quot;</span><span class="p">,</span> <span class="s2">&quot;convention&quot;</span><span class="p">:</span> <span class="s2">&quot;SIDE_LOOK&quot;</span><span class="p">,</span> <span class="s2">&quot;sideLookAngle&quot;</span><span class="p">:</span><span class="mi">25</span><span class="p">})</span>
        <span class="n">orien_conv</span><span class="o">=</span> <span class="n">orien_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;convention&quot;</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">orien_conv</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Please specify valid Orientation convention.&quot;</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">Orientation</span><span class="o">.</span><span class="n">Convention</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">orien_conv</span><span class="p">)</span> <span class="o">!=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">Convention</span><span class="o">.</span><span class="n">SIDE_LOOK</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Only side-looking orientation of instrument supported for the synthetic aperture radar imaging.&quot;</span><span class="p">)</span>
            
        <span class="c1"># check supplied PRF range</span>
        <span class="n">_PRFmin</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;minimumPRF&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">_PRFmax</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maximumPRF&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">_PRFmin</span> <span class="o">&gt;</span> <span class="n">_PRFmax</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;PRF minimum must be numerically less than or equal to PRF maximum.&quot;</span><span class="p">)</span>

        <span class="c1"># initialize the polarization configuration</span>
        <span class="n">pol</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;polarization&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">dualPolPulseConfig</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">dualPolPulseSep</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span><span class="p">(</span><span class="n">pol</span><span class="p">):</span>
            <span class="n">polType</span> <span class="o">=</span> <span class="n">PolTypeSAR</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pol</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@type&quot;</span><span class="p">,</span><span class="kc">None</span><span class="p">))</span>
            <span class="k">if</span><span class="p">(</span><span class="n">polType</span> <span class="o">==</span> <span class="n">PolTypeSAR</span><span class="o">.</span><span class="n">DUAL</span><span class="p">):</span>
                <span class="k">if</span><span class="p">(</span><span class="n">pol</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pulseConfig&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">pol</span><span class="p">[</span><span class="s2">&quot;pulseConfig&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="n">DualPolPulseConfig</span><span class="o">.</span><span class="n">SMAP</span><span class="p">):</span>
                        <span class="n">dualPolPulseConfig</span> <span class="o">=</span> <span class="n">DualPolPulseConfig</span><span class="o">.</span><span class="n">SMAP</span>
                        <span class="n">dualPolPulseSep</span> <span class="o">=</span> <span class="n">pol</span><span class="p">[</span><span class="s2">&quot;pulseConfig&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pulseSeparation&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">pol</span><span class="p">[</span><span class="s2">&quot;pulseConfig&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pulseSeparation&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pulseWidth&quot;</span><span class="p">)</span>
                    <span class="k">elif</span><span class="p">(</span><span class="n">pol</span><span class="p">[</span><span class="s2">&quot;pulseConfig&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="n">DualPolPulseConfig</span><span class="o">.</span><span class="n">AIRSAR</span><span class="p">):</span>
                        <span class="n">dualPolPulseConfig</span> <span class="o">=</span> <span class="n">DualPolPulseConfig</span><span class="o">.</span><span class="n">AIRSAR</span>
                        <span class="n">dualPolPulseSep</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unknown/ invalid pulse configuration in dual-polarization specification.&quot;</span><span class="p">)</span>
            <span class="k">elif</span><span class="p">(</span><span class="n">polType</span> <span class="o">==</span> <span class="n">PolTypeSAR</span><span class="o">.</span><span class="n">SINGLE</span> <span class="ow">or</span> <span class="n">polType</span> <span class="o">==</span> <span class="n">PolTypeSAR</span><span class="o">.</span><span class="n">COMPACT</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unknown/ invalid polarization specification.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># assign default polarization</span>
            <span class="n">polType</span> <span class="o">=</span> <span class="n">PolTypeSAR</span><span class="o">.</span><span class="n">SINGLE</span>            

        <span class="n">_scan</span> <span class="o">=</span> <span class="n">ScanTech</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;scanTechnique&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">_scan</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_scan</span> <span class="o">=</span> <span class="n">ScanTech</span><span class="o">.</span><span class="n">STRIPMAP</span> <span class="c1"># default scan technique</span>
        <span class="c1"># Only stripmap and scansar techniques are supported</span>
        <span class="k">if</span><span class="p">(</span><span class="n">_scan</span> <span class="o">==</span> <span class="n">ScanTech</span><span class="o">.</span><span class="n">STRIPMAP</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">_scan</span> <span class="o">==</span> <span class="n">ScanTech</span><span class="o">.</span><span class="n">SCANSAR</span><span class="p">):</span>
            
            <span class="k">if</span><span class="p">(</span><span class="n">_scan</span> <span class="o">==</span> <span class="n">ScanTech</span><span class="o">.</span><span class="n">SCANSAR</span><span class="p">):</span>
                <span class="n">numSubSwaths</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;numSubSwaths&quot;</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>                
                <span class="k">if</span> <span class="n">numSubSwaths</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">numSubSwaths</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># default</span>
            <span class="k">elif</span><span class="p">(</span><span class="n">_scan</span> <span class="o">==</span> <span class="n">ScanTech</span><span class="o">.</span><span class="n">STRIPMAP</span><span class="p">):</span>
                <span class="n">numSubSwaths</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;numSubSwaths&quot;</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>               
                <span class="k">if</span> <span class="n">numSubSwaths</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;numSubSwaths parameter is not considered for Stripmap operation. It shall be ignored.&quot;</span><span class="p">)</span>
                <span class="n">numSubSwaths</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># stripmap is equivalent to ScanSAR operation with one subswath</span>

            <span class="c1"># calculate instrument FOV based on antenna dimensions</span>
            <span class="c1"># parse ``Antenna``` object and get the instrument fov</span>
            <span class="n">antenna_dict</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;antenna&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">antenna_dict</span><span class="p">:</span>
                <span class="n">antenna</span> <span class="o">=</span> <span class="n">Antenna</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">antenna_dict</span><span class="p">)</span>
                <span class="n">antenna_fov_sph_geom</span> <span class="o">=</span> <span class="n">antenna</span><span class="o">.</span><span class="n">get_spherical_geometry</span><span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;operatingFrequency&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
                <span class="p">[</span><span class="n">angle_height</span><span class="p">,</span> <span class="n">angle_width</span><span class="p">]</span> <span class="o">=</span> <span class="n">antenna_fov_sph_geom</span><span class="o">.</span><span class="n">get_fov_height_and_width</span><span class="p">()</span>
                <span class="n">instru_fov_geom_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="s2">&quot;RECTANGULAR&quot;</span><span class="p">,</span> <span class="s2">&quot;angleHeight&quot;</span><span class="p">:</span><span class="n">angle_height</span><span class="p">,</span> <span class="s2">&quot;angleWidth&quot;</span><span class="p">:</span> <span class="n">numSubSwaths</span><span class="o">*</span><span class="n">angle_width</span><span class="p">}</span> 
            <span class="k">else</span><span class="p">:</span>
                <span class="n">antenna</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">instru_fov_geom_dict</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">scene_fov_geom_dict</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sceneFieldOfViewGeometry&quot;</span><span class="p">,</span> <span class="n">instru_fov_geom_dict</span><span class="p">)</span>  <span class="c1"># default sceneFOV geometry is the instrument FOV geometry</span>

            <span class="c1"># initialize the swath configuration</span>
            <span class="n">fixedSwathSize</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">swathConfig</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;swathConfig&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            
            <span class="k">if</span><span class="p">(</span><span class="n">swathConfig</span><span class="p">):</span>
                <span class="n">swathType</span> <span class="o">=</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">swathConfig</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
                
                <span class="k">if</span><span class="p">(</span><span class="n">swathType</span> <span class="o">==</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FIXED</span><span class="p">):</span>
                    
                    <span class="n">fixedSwathSize</span> <span class="o">=</span> <span class="n">swathConfig</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;fixedSwathSize&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">swathConfig</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;fixedSwathSize&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">10</span> <span class="c1"># default to 10km</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">_scan</span> <span class="o">==</span> <span class="n">ScanTech</span><span class="o">.</span><span class="n">SCANSAR</span><span class="p">):</span>
                        <span class="n">fixedSwathSize</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="n">swathConfig</span> <span class="o">=</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FULL</span>  
                        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;ScanSAR operation supports only FULL swath configuration. Specified FIXED swath configuration is ignored.&quot;</span><span class="p">)</span>
                       
            <span class="k">else</span><span class="p">:</span> <span class="c1"># assign default</span>
                <span class="n">swathType</span> <span class="o">=</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FULL</span>       
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unknown SAR scan technique specified.&quot;</span><span class="p">)</span>
        
        <span class="c1"># parse the pointing options as a list of Orientation objects.</span>
        <span class="n">pnt_opt_dict</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pointingOption&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">_pointing_option</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">pnt_opt_dict</span><span class="p">:</span>
            <span class="c1"># translate to a list of Orientation objects</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pnt_opt_dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">_pointing_option</span> <span class="o">=</span> <span class="p">[</span><span class="n">Orientation</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pnt_opt_dict</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_pointing_option</span> <span class="o">=</span> <span class="p">[</span><span class="n">Orientation</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">pnt_opt_dict</span><span class="p">)]</span>

        <span class="k">return</span> <span class="n">SyntheticApertureRadarModel</span><span class="p">(</span>
                        <span class="n">name</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">mass</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;mass&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">volume</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;volume&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">power</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">orientation</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">orien_dict</span><span class="p">),</span>
                        <span class="n">fieldOfViewGeometry</span> <span class="o">=</span>  <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">instru_fov_geom_dict</span><span class="p">),</span>
                        <span class="n">sceneFieldOfViewGeometry</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">scene_fov_geom_dict</span><span class="p">),</span>
                        <span class="n">maneuver</span> <span class="o">=</span>  <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maneuver&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)),</span>
                        <span class="n">pointingOption</span> <span class="o">=</span> <span class="n">_pointing_option</span><span class="p">,</span>
                        <span class="n">dataRate</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dataRate&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">bitsPerPixel</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;bitsPerPixel&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">pulseWidth</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pulseWidth&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">antenna</span> <span class="o">=</span> <span class="n">antenna</span><span class="p">,</span>
                        <span class="n">operatingFrequency</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;operatingFrequency&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">peakTransmitPower</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;peakTransmitPower&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">chirpBandwidth</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;chirpBandwidth&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">minimumPRF</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;minimumPRF&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">maximumPRF</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maximumPRF&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">radarLoss</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;radarLoss&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">atmosLoss</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;atmosLoss&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="c1"># 2dB default value</span>
                        <span class="n">sceneNoiseTemp</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sceneNoiseTemp&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">systemNoiseFigure</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;systemNoiseFigure&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="n">polType</span><span class="o">=</span><span class="n">polType</span><span class="p">,</span>
                        <span class="n">dualPolPulseConfig</span> <span class="o">=</span> <span class="n">dualPolPulseConfig</span><span class="p">,</span>
                        <span class="n">dualPolPulseSep</span><span class="o">=</span><span class="n">dualPolPulseSep</span><span class="p">,</span>
                        <span class="n">swathType</span><span class="o">=</span><span class="n">swathType</span><span class="p">,</span>
                        <span class="n">scanTechnique</span> <span class="o">=</span> <span class="n">_scan</span><span class="p">,</span>
                        <span class="n">fixedSwathSize</span><span class="o">=</span><span class="n">fixedSwathSize</span><span class="p">,</span>
                        <span class="n">numSubSwaths</span><span class="o">=</span><span class="n">numSubSwaths</span><span class="p">,</span>
                        <span class="n">_id</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@id&quot;</span><span class="p">,</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
                        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Translate the ``SyntheticApertureRadarModel`` object to a Python dictionary such that it can be uniquely reconstructed back from the dictionary.</span>

<span class="sd">        :returns: ``SyntheticApertureRadarModel`` object as python dictionary.</span>
<span class="sd">        :rtype: dict</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fieldOfViewGeometry_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fieldOfView</span><span class="o">.</span><span class="n">sph_geom</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fieldOfView</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fieldOfView</span><span class="p">,</span> <span class="n">ViewGeometry</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">sceneFieldOfViewGeometry_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneFieldOfView</span><span class="o">.</span><span class="n">sph_geom</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneFieldOfView</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sceneFieldOfView</span><span class="p">,</span> <span class="n">ViewGeometry</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">orientation_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">orientation</span><span class="p">,</span> <span class="n">Orientation</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">maneuver_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maneuver</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">maneuver</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maneuver</span><span class="p">,</span> <span class="n">Maneuver</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">pointing_opt_dict</span> <span class="o">=</span> <span class="p">[</span><span class="n">Orientation</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointingOption</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointingOption</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">antenna_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">antenna</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">antenna</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">antenna</span><span class="p">,</span> <span class="n">Antenna</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">({</span>
                <span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;Synthetic Aperture Radar&quot;</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;mass&quot;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">mass</span><span class="p">,</span>
                <span class="s2">&quot;volume&quot;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">volume</span><span class="p">,</span>
                <span class="s2">&quot;power&quot;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">power</span><span class="p">,</span>
                <span class="s2">&quot;orientation&quot;</span><span class="p">:</span><span class="n">orientation_dict</span><span class="p">,</span>
                <span class="s2">&quot;fieldOfViewGeometry&quot;</span><span class="p">:</span><span class="n">fieldOfViewGeometry_dict</span><span class="p">,</span>
                <span class="s2">&quot;sceneFieldOfViewGeometry&quot;</span><span class="p">:</span> <span class="n">sceneFieldOfViewGeometry_dict</span><span class="p">,</span>                
                <span class="s2">&quot;maneuver&quot;</span><span class="p">:</span><span class="n">maneuver_dict</span><span class="p">,</span>
                <span class="s2">&quot;pointingOption&quot;</span><span class="p">:</span> <span class="n">pointing_opt_dict</span><span class="p">,</span>
                <span class="s2">&quot;dataRate&quot;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">dataRate</span><span class="p">,</span>
                <span class="s2">&quot;bitsPerPixel&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">bitsPerPixel</span><span class="p">,</span>
                <span class="s2">&quot;pulseWidth&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pulseWidth</span><span class="p">,</span>
                <span class="s2">&quot;antenna&quot;</span><span class="p">:</span> <span class="n">antenna_dict</span><span class="p">,</span>
                <span class="s2">&quot;operatingFrequency&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">operatingFrequency</span><span class="p">,</span>
                <span class="s2">&quot;peakTransmitPower&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">peakTransmitPower</span><span class="p">,</span>
                <span class="s2">&quot;chirpBandwidth&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">chirpBandwidth</span><span class="p">,</span>
                <span class="s2">&quot;minimumPRF&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">minimumPRF</span><span class="p">,</span>
                <span class="s2">&quot;maximumPRF&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">maximumPRF</span><span class="p">,</span>
                <span class="s2">&quot;radarLoss&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">radarLoss</span><span class="p">,</span>
                <span class="s2">&quot;atmosLoss&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">atmosLoss</span><span class="p">,</span>
                <span class="s2">&quot;sceneNoiseTemp&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneNoiseTemp</span><span class="p">,</span>
                <span class="s2">&quot;systemNoiseFigure&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">systemNoiseFigure</span><span class="p">,</span>
                <span class="s2">&quot;polType&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">polType</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="s2">&quot;pulseConfig&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dualPolPulseConfig</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dualPolPulseConfig</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;pulseSeparation&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dualPolPulseSep</span><span class="p">,</span>
                <span class="s2">&quot;swathType&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">swathType</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="s2">&quot;scanTechnique&quot;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">scanTechnique</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dualPolPulseConfig</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;fixedSwathSize&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixedSwathSize</span><span class="p">,</span>
                <span class="s2">&quot;numSubSwaths&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">numSubSwaths</span><span class="p">,</span>
                <span class="s2">&quot;@id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
                <span class="p">})</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;SyntheticApertureRadarModel.from_dict(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_azimuthal_resolution</span><span class="p">(</span><span class="n">sc_speed</span><span class="p">,</span> <span class="n">sc_gnd_speed</span><span class="p">,</span> <span class="n">D_az</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Calculate azimuthal resolution taking into consideration that the spacecraft and antenna-footprint speeds are different.</span>
<span class="sd">            See eqn (5.3.6.3) in [2].</span>

<span class="sd">        :param sc_speed: [distance/time] Spacecraft speed.</span>
<span class="sd">        :paramtype sc_speed: float</span>

<span class="sd">        :param sc_gnd_speed: [distance/time] Spacecraft ground speed. Units must be consistent with the the spacecraft speed input.</span>
<span class="sd">        :paramtype sc_gnd_speed: float</span>

<span class="sd">        :param D_az: Length of antenna in meters along the azimuthal direction.</span>
<span class="sd">        :paramtype D_az: float</span>

<span class="sd">        :returns: Azimuthal resolution in meters.</span>
<span class="sd">        :rtype: float</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">D_az</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">sc_gnd_speed</span><span class="o">/</span> <span class="n">sc_speed</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">calc_data_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sc_orbit_state</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">target_coords</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                          <span class="n">alt_km</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sc_speed_kmps</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sc_gnd_speed_kmps</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inc_angle_deg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                          <span class="n">instru_look_angle_from_target_inc_angle</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; A wrapper function for calling the appropriate (depending on the input arguments) implementation of the data metrics calculator.</span>
<span class="sd">            Refer to the functions ``calc_data_metrics_impl1`` and ``calc_data_metrics_impl2`` for description of the function parameters.</span>
<span class="sd">            This function is invoked by the function ``Instrument.calc_data_metrics(.)`` class in the ``base`` module.</span>

<span class="sd">        :returns: Calculated observation data metrics.</span>
<span class="sd">        :rtype: dict</span>

<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="k">if</span><span class="p">(</span><span class="n">sc_orbit_state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">target_coords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
        
            <span class="n">obsv_metrics</span> <span class="o">=</span> <span class="n">SyntheticApertureRadarModel</span><span class="o">.</span><span class="n">calc_data_metrics_impl2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sc_orbit_state</span><span class="p">,</span> <span class="n">target_coords</span><span class="p">,</span> <span class="n">instru_look_angle_from_target_inc_angle</span><span class="p">)</span>

        <span class="k">elif</span><span class="p">(</span><span class="n">alt_km</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">sc_speed_kmps</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">sc_gnd_speed_kmps</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">inc_angle_deg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
        
            <span class="n">obsv_metrics</span> <span class="o">=</span> <span class="n">SyntheticApertureRadarModel</span><span class="o">.</span><span class="n">calc_data_metrics_impl1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alt_km</span><span class="p">,</span> <span class="n">sc_speed_kmps</span><span class="p">,</span> <span class="n">sc_gnd_speed_kmps</span><span class="p">,</span> <span class="n">inc_angle_deg</span><span class="p">,</span> <span class="n">instru_look_angle_from_target_inc_angle</span><span class="p">)</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Required set of arguments not present in the SyntheticApertureRadarModel.calc_data_metrics(.) function.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">obsv_metrics</span>


    <span class="k">def</span> <span class="nf">calc_data_metrics_impl2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sc_orbit_state</span><span class="p">,</span> <span class="n">target_coords</span><span class="p">,</span> <span class="n">instru_look_angle_from_target_inc_angle</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Calculate observation data metrics from the input viewing geometry parameters.</span>

<span class="sd">        :param sc_orbit_state: Spacecraft state at the time of observation.</span>

<span class="sd">        Dictionary keys are: </span>
<span class="sd">        </span>
<span class="sd">        * :code:`time [JDUT1]` (:class:`float`), Time in Julian Day UT1. Corresponds to the time of observation. </span>
<span class="sd">        * :code:`x [km]` (:class:`float`), :code:`y [km]` (:class:`float`), :code:`z [km]` (:class:`float`), Cartesian coordinates of satellite in EARTH_CENTERED_INERTIAL frame at the time of observation.</span>
<span class="sd">        * :code:`vx [km/s]` (:class:`float`), :code:`vy [km/s]` (:class:`float`), :code:`vz [km/s]` (:class:`float`), Velocity of spacecraft in EARTH_CENTERED_INERTIAL frame at the time of observation.</span>
<span class="sd">        </span>
<span class="sd">        :paramtype sc_orbit_state: dict</span>
<span class="sd">        </span>
<span class="sd">        :param target_coords: Location of the observation.</span>

<span class="sd">        Dictionary keys are: </span>
<span class="sd">        </span>
<span class="sd">        * :code:`lat [deg]` (:class:`float`), :code:`lon [deg]` (:class:`float`) indicating the corresponding ground-point (latitude, longitude) in degrees.</span>

<span class="sd">        :paramtype target_coords: dict</span>

<span class="sd">        :param instru_look_angle_from_target_inc_angle: Flag (True or False) to indicate if the look angle to the middle of the swath is to be considered:  (1) using the nominal look-angle </span>
<span class="sd">                                                        (specified in the ``orientation`` attribute of the instrument), </span>
<span class="sd">                                                        OR</span>
<span class="sd">                                                        (2) the incidence angle at the target. </span>
<span class="sd">                                                        Default is False.</span>
<span class="sd">        </span>
<span class="sd">        :paramtype instru_look_angle_from_target_inc_angle: bool</span>

<span class="sd">        :returns: Calculated observation data metrics. Refer to the return value of the function ``calc_data_metrics_impl1(.)``.</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">                        </span>
<span class="sd">        &quot;&quot;&quot;</span>       
        <span class="c1"># Observation time in Julian Day UT1</span>
        <span class="n">tObs_JDUT1</span> <span class="o">=</span> <span class="n">sc_orbit_state</span><span class="p">[</span><span class="s2">&quot;time [JDUT1]&quot;</span><span class="p">]</span>

        <span class="c1"># Calculate Target position in EARTH_CENTERED_INERTIAL frame</span>
        <span class="n">target_pos_km</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">geo2eci</span><span class="p">([</span><span class="n">target_coords</span><span class="p">[</span><span class="s2">&quot;lat [deg]&quot;</span><span class="p">],</span> <span class="n">target_coords</span><span class="p">[</span><span class="s2">&quot;lon [deg]&quot;</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">tObs_JDUT1</span><span class="p">)</span>
        <span class="c1"># Spacecraft position in EARTH_CENTERED_INERTIAL frame</span>
        <span class="n">sc_pos_km</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">sc_orbit_state</span><span class="p">[</span><span class="s2">&quot;x [km]&quot;</span><span class="p">],</span> <span class="n">sc_orbit_state</span><span class="p">[</span><span class="s2">&quot;y [km]&quot;</span><span class="p">],</span> <span class="n">sc_orbit_state</span><span class="p">[</span><span class="s2">&quot;z [km]&quot;</span><span class="p">]])</span>  
        <span class="n">sc_vel_kmps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">sc_orbit_state</span><span class="p">[</span><span class="s2">&quot;vx [km/s]&quot;</span><span class="p">],</span> <span class="n">sc_orbit_state</span><span class="p">[</span><span class="s2">&quot;vy [km/s]&quot;</span><span class="p">],</span> <span class="n">sc_orbit_state</span><span class="p">[</span><span class="s2">&quot;vz [km/s]&quot;</span><span class="p">]])</span> 
        <span class="n">sc_speed_kmps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">sc_vel_kmps</span><span class="p">)</span>
        
        <span class="c1"># Calculate range vector between spacecraft and POI (Target)</span>
        <span class="n">range_vector_km</span> <span class="o">=</span> <span class="n">target_pos_km</span> <span class="o">-</span> <span class="n">sc_pos_km</span>

        <span class="n">alt_km</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">sc_pos_km</span><span class="p">)</span> <span class="o">-</span> <span class="n">Constants</span><span class="o">.</span><span class="n">radiusOfEarthInKM</span>

        <span class="c1"># below snippet required to prevent invalid &#39;x&#39; due to numerical errors</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">range_vector_km</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">sc_pos_km</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-7</span><span class="p">:</span>
            <span class="n">x</span><span class="o">=</span><span class="mi">1</span>
        <span class="n">look_angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

        <span class="n">incidence_angle_rad</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">look_angle</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">Constants</span><span class="o">.</span><span class="n">radiusOfEarthInKM</span> <span class="o">+</span> <span class="n">alt_km</span><span class="p">)</span><span class="o">/</span><span class="n">Constants</span><span class="o">.</span><span class="n">radiusOfEarthInKM</span><span class="p">)</span>       


        <span class="n">sc_gnd_speed_kmps</span> <span class="o">=</span> <span class="mf">1e-3</span> <span class="o">*</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">compute_satellite_footprint_speed</span><span class="p">(</span><span class="n">sc_pos_km</span><span class="o">*</span><span class="mf">1e3</span><span class="p">,</span> <span class="n">sc_vel_kmps</span><span class="o">*</span><span class="mf">1e3</span><span class="p">)</span> <span class="c1"># This is approximation, since the image footprint velocity is not necessarily equal to the</span>
                                        <span class="c1"># satellite footprint speed. However it is reasonable approximation in case of low-altitudes and small look angles. TODO: Improve the model.</span>
    
        <span class="c1">#print(&quot;sc_speed_kmps&quot;, sc_speed_kmps)</span>
        <span class="c1">#print(&quot;sc_gnd_speed_kmps&quot;, sc_gnd_speed_kmps)</span>
        <span class="n">obsv_metrics</span> <span class="o">=</span> <span class="n">SyntheticApertureRadarModel</span><span class="o">.</span><span class="n">calc_data_metrics_impl1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alt_km</span><span class="p">,</span> <span class="n">sc_speed_kmps</span><span class="p">,</span> <span class="n">sc_gnd_speed_kmps</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">incidence_angle_rad</span><span class="p">),</span> <span class="n">instru_look_angle_from_target_inc_angle</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">obsv_metrics</span>

    <span class="k">def</span> <span class="nf">calc_data_metrics_impl1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alt_km</span><span class="p">,</span> <span class="n">sc_speed_kmps</span><span class="p">,</span> <span class="n">sc_gnd_speed_kmps</span><span class="p">,</span> <span class="n">inc_angle_deg</span><span class="p">,</span> <span class="n">instru_look_angle_from_target_inc_angle</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Calculate observation data metrics from the input viewing geometry parameters.</span>

<span class="sd">        :param alt_km: Spacecraft altitude in kilometers.</span>
<span class="sd">        :paramtype alt_km: float</span>

<span class="sd">        :param sc_speed_kmps: Spacecraft speed in kilometers per second.</span>
<span class="sd">        :paramtype sc_speed_kmps: float</span>

<span class="sd">        :param sc_gnd_speed_kmps: Spacecraft ground-speed in kilometers per second.</span>
<span class="sd">        :paramtype sc_gnd_speed_kmps: float</span>

<span class="sd">        :param inc_angle_deg: Incidence angle in degrees at the target position (w.r.t the spacecraft position).</span>
<span class="sd">        :paramtype inc_angle_deg: float</span>

<span class="sd">        :param instru_look_angle_from_target_inc_angle: Flag (True or False) to indicate if the look angle to the middle of the swath is to be considered:  (1) using the nominal look-angle </span>
<span class="sd">                                                        (specified in the ``orientation`` attribute of the instrument), </span>
<span class="sd">                                                        OR</span>
<span class="sd">                                                        (2) the incidence angle at the target. </span>
<span class="sd">                                                        Default is False.</span>
<span class="sd">        :paramtype instru_look_angle_from_target_inc_angle: bool</span>

<span class="sd">        :returns: Calculated observation data metrics. </span>
<span class="sd">        </span>
<span class="sd">                Dictionary keys are: </span>
<span class="sd">            </span>
<span class="sd">                * :code:`NESZ [dB]` (:class:`float`)  The backscatter coefficient :math:`\\sigma_0` of a target for which the signal power level in final image is equal to the noise power level (units: decibels). **Numerically lesser is better instrument performance.**</span>
<span class="sd">                * :code:`ground pixel along-track resolution [m]` (:class:`float`) Along-track resolution (meters) of a ground-pixel centered about observation point.</span>
<span class="sd">                * :code:`ground pixel cross-track resolution [m]` (:class:`float`) Cross-track resolution (meters) of a ground-pixel centered about observation point.</span>
<span class="sd">                * :code:`swath-width [m]` (:class:`float`) Swath-width (meters) of the strip of which the imaged pixel is part off.</span>
<span class="sd">                * :code:`incidence angle [deg]` (:class:`float`) Observation incidence angle (degrees) at the ground-pixel.</span>
<span class="sd">                * :code:`PRF [Hz]` (:class:`float`)  Highest Pulse Repetition Frequency (Hz) (within the specified PRF range) at which the observation is possible.</span>
<span class="sd">        </span>
<span class="sd">        :rtype: dict</span>

<span class="sd">        .. note:: The pulse-repetition frequency during the calculation of the observation metrics is taken as the highest valid PRF (which satisfies the PRF constraints) within </span>
<span class="sd">                  the allowed PRF range. The highest PRF is chosen since it improves the NESZ.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">inc_angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">inc_angle_deg</span><span class="p">)</span>
        <span class="n">look_angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">inc_angle</span><span class="p">)</span><span class="o">*</span><span class="n">Constants</span><span class="o">.</span><span class="n">radiusOfEarthInKM</span><span class="o">/</span><span class="p">(</span><span class="n">Constants</span><span class="o">.</span><span class="n">radiusOfEarthInKM</span> <span class="o">+</span> <span class="n">alt_km</span><span class="p">))</span> 
        <span class="c1">#print(&quot;inc_angle&quot;, inc_angle*180/np.pi)</span>
        <span class="c1">#print(&quot;look_angle&quot;, look_angle*180/np.pi)</span>
        <span class="n">range_km</span> <span class="o">=</span> <span class="n">Constants</span><span class="o">.</span><span class="n">radiusOfEarthInKM</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">inc_angle</span> <span class="o">-</span> <span class="n">look_angle</span><span class="p">)</span><span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">look_angle</span><span class="p">))</span>

        <span class="k">if</span><span class="p">(</span><span class="n">instru_look_angle_from_target_inc_angle</span><span class="p">):</span>
            <span class="n">instru_look_angle_rad</span> <span class="o">=</span> <span class="n">look_angle</span> <span class="c1"># instrument look angle from the target incidence angle</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">instru_look_angle_rad</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">))</span> <span class="c1"># instrument look angle from the instrument orientation</span>

        <span class="c1"># Copying values into variables of more code-friendly variables</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">Constants</span><span class="o">.</span><span class="n">speedOfLight</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">Constants</span><span class="o">.</span><span class="n">Boltzmann</span>
        <span class="n">tau_p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pulseWidth</span>        
        <span class="n">B_T</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chirpBandwidth</span>
        <span class="n">P_T</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peakTransmitPower</span>
        <span class="n">D_az</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">antenna</span><span class="o">.</span><span class="n">height</span>
        <span class="n">D_elv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">antenna</span><span class="o">.</span><span class="n">width</span>
        <span class="n">fc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operatingFrequency</span>
        <span class="n">eta_ap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">antenna</span><span class="o">.</span><span class="n">apertureEfficiency</span>               
        <span class="n">PRFmin_Hz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minimumPRF</span>    
        <span class="n">PRFmax_Hz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maximumPRF</span>   
        <span class="n">L_radar</span> <span class="o">=</span> <span class="mf">10.0</span><span class="o">**</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radarLoss</span><span class="o">/</span><span class="mf">10.0</span><span class="p">)</span> <span class="c1"># convert to linear units</span>
        <span class="n">F_N</span> <span class="o">=</span> <span class="mf">10.0</span><span class="o">**</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">systemNoiseFigure</span><span class="o">/</span><span class="mf">10.0</span><span class="p">)</span> <span class="c1"># convert to linear units</span>
        <span class="n">L_atmos</span> <span class="o">=</span> <span class="mf">10.0</span><span class="o">**</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atmosLoss</span><span class="o">/</span><span class="mf">10.0</span><span class="p">)</span> <span class="c1"># convert to linear units</span>
        <span class="n">L_r</span> <span class="o">=</span> <span class="n">SyntheticApertureRadarModel</span><span class="o">.</span><span class="n">L_r</span>
        <span class="n">L_a</span> <span class="o">=</span> <span class="n">SyntheticApertureRadarModel</span><span class="o">.</span><span class="n">L_a</span>
        <span class="n">a_wr</span> <span class="o">=</span> <span class="n">SyntheticApertureRadarModel</span><span class="o">.</span><span class="n">a_wr</span>
        <span class="n">a_wa</span> <span class="o">=</span> <span class="n">SyntheticApertureRadarModel</span><span class="o">.</span><span class="n">a_wa</span>
        <span class="n">T</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneNoiseTemp</span>       

        <span class="c1">#print(tau_p)</span>
        <span class="c1">#print(fc)</span>
        <span class="c1">#print(self.polType)</span>
        <span class="c1"># Note that the nominal look angle is considered to evaluate the operable PRF.</span>
        <span class="p">(</span><span class="n">f_P_master</span><span class="p">,</span> <span class="n">W_gr_obs</span><span class="p">)</span> <span class="o">=</span> <span class="n">SyntheticApertureRadarModel</span><span class="o">.</span><span class="n">prf_constraint_eval</span><span class="p">(</span><span class="n">PRFmin_Hz</span><span class="p">,</span> <span class="n">PRFmax_Hz</span><span class="p">,</span> <span class="n">sc_speed_kmps</span><span class="p">,</span> <span class="n">sc_gnd_speed_kmps</span><span class="p">,</span> <span class="n">alt_km</span><span class="p">,</span> 
                                                                             <span class="n">instru_look_angle_rad</span><span class="p">,</span> <span class="n">tau_p</span><span class="p">,</span> <span class="n">D_az</span><span class="p">,</span> <span class="n">D_elv</span><span class="p">,</span> <span class="n">fc</span><span class="p">,</span>
                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">polType</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dualPolPulseConfig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dualPolPulseSep</span><span class="p">,</span> 
                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">swathType</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixedSwathSize</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">numSubSwaths</span><span class="p">)</span>
        <span class="n">rho_a</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">rho_y</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">sigma_N_dB</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">theta_i</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1">#print(&quot;f_P_master&quot;, f_P_master)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">f_P_master</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span> <span class="c1"># Observation is (perhaps (since determined at nominal instrument look-angle, some parts of the swath may not be observable)) possible at PRF = f_P        </span>
            
            <span class="n">R</span> <span class="o">=</span> <span class="n">range_km</span><span class="o">*</span><span class="mf">1e3</span>

            <span class="n">lamb</span> <span class="o">=</span> <span class="n">c</span><span class="o">/</span><span class="n">fc</span>

            <span class="c1"># Note that this may not be the same as incidence angle to middle of swath.</span>
            <span class="n">theta_i</span> <span class="o">=</span> <span class="n">inc_angle</span>
                            
            <span class="n">psi_g</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">2.0</span> <span class="o">-</span> <span class="n">theta_i</span> <span class="c1"># grazing angle   </span>
            
            <span class="c1"># [1] equation 17, find P_avg (average transmit power)</span>
            <span class="n">T_eff</span> <span class="o">=</span> <span class="n">tau_p</span> <span class="c1"># approximate effective pulse duration to be the actual pulse duration, as in case of matched filter processing</span>
            <span class="c1"># In case of AIRSAR dual-pol configuration, the channel PRF is half of the master PRF.</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polType</span> <span class="o">==</span> <span class="n">PolTypeSAR</span><span class="o">.</span><span class="n">DUAL</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">dualPolPulseConfig</span> <span class="o">==</span> <span class="n">DualPolPulseConfig</span><span class="o">.</span><span class="n">AIRSAR</span><span class="p">):</span>
                <span class="n">f_P_ch</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">f_P_master</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">f_P_ch</span> <span class="o">=</span> <span class="n">f_P_master</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">T_eff</span> <span class="o">*</span> <span class="n">f_P_ch</span> <span class="c1"># [1] equation 17</span>
            <span class="n">P_avg</span> <span class="o">=</span> <span class="n">d</span><span class="o">*</span><span class="n">P_T</span>
            
            <span class="c1"># [1] equation 8, find G_A</span>
            <span class="n">A_A</span> <span class="o">=</span> <span class="n">D_elv</span><span class="o">*</span><span class="n">D_az</span>
            <span class="n">G_A</span> <span class="o">=</span> <span class="mf">4.0</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">eta_ap</span><span class="o">*</span><span class="n">A_A</span><span class="o">/</span><span class="n">lamb</span><span class="o">**</span><span class="mi">2</span>  
            
            <span class="c1"># [1] equation 37 we can get the sigma_N. Note that the spacecraft speed is used in the equation and not the ground-speed, see [2] for explanation.              </span>
            <span class="n">sigma_N</span> <span class="o">=</span> <span class="p">(</span><span class="mf">265.0</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">**</span><span class="mi">3</span><span class="o">*</span><span class="n">k</span><span class="o">*</span><span class="n">T</span> <span class="o">/</span> <span class="n">c</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">R</span><span class="o">**</span><span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="n">sc_speed_kmps</span><span class="o">*</span><span class="mf">1e3</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">psi_g</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">B_T</span><span class="o">*</span><span class="n">F_N</span><span class="o">*</span><span class="n">L_radar</span><span class="o">*</span><span class="n">L_atmos</span><span class="o">/</span> <span class="p">(</span><span class="n">P_avg</span><span class="o">*</span><span class="n">G_A</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="n">lamb</span><span class="o">**</span><span class="mi">3</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">L_r</span><span class="o">*</span><span class="n">L_a</span><span class="o">/</span><span class="p">(</span><span class="n">a_wr</span><span class="o">*</span><span class="n">a_wa</span><span class="p">))</span>
            <span class="n">sigma_N_dB</span> <span class="o">=</span> <span class="mf">10.0</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">sigma_N</span><span class="p">)</span>

            <span class="c1"># [1] equations 36, 23 we can get rho_y</span>
            <span class="n">rho_y</span> <span class="o">=</span> <span class="n">a_wr</span><span class="o">*</span><span class="n">c</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">B_T</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">psi_g</span><span class="p">))</span>

            <span class="c1"># [1] equation 69 we get minimum possible azimuth resolution (for strip mapping)</span>
            <span class="n">rho_a</span> <span class="o">=</span> <span class="n">SyntheticApertureRadarModel</span><span class="o">.</span><span class="n">get_azimuthal_resolution</span><span class="p">(</span><span class="n">sc_speed_kmps</span><span class="p">,</span> <span class="n">sc_gnd_speed_kmps</span><span class="p">,</span> <span class="n">D_az</span><span class="p">)</span>
            <span class="c1"># modify in case of scansar (multiple sub-swaths =&gt; trading off azimuthal resolution)</span>
            <span class="n">rho_a</span> <span class="o">=</span> <span class="n">rho_a</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">numSubSwaths</span>
             
        <span class="n">obsv_metrics</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">obsv_metrics</span><span class="p">[</span><span class="s2">&quot;ground pixel along-track resolution [m]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">rho_a</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">rho_a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        <span class="n">obsv_metrics</span><span class="p">[</span><span class="s2">&quot;ground pixel cross-track resolution [m]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">rho_y</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">rho_y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        <span class="n">obsv_metrics</span><span class="p">[</span><span class="s2">&quot;NESZ [dB]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">sigma_N_dB</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">sigma_N_dB</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        <span class="n">obsv_metrics</span><span class="p">[</span><span class="s2">&quot;incidence angle [deg]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">theta_i</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">theta_i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        <span class="n">obsv_metrics</span><span class="p">[</span><span class="s2">&quot;swath-width [km]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">W_gr_obs</span><span class="o">/</span><span class="mf">1e3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">W_gr_obs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>        
        <span class="n">obsv_metrics</span><span class="p">[</span><span class="s2">&quot;PRF [Hz]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f_P_master</span>

        <span class="k">return</span> <span class="n">obsv_metrics</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">prf_constraint_eval</span><span class="p">(</span><span class="n">f_P_min</span><span class="p">,</span> <span class="n">f_P_max</span><span class="p">,</span> <span class="n">sc_speed_kmps</span><span class="p">,</span> <span class="n">sc_gnd_speed_kmps</span><span class="p">,</span> <span class="n">alt_km</span><span class="p">,</span> 
                            <span class="n">instru_look_angle_rad</span><span class="p">,</span> <span class="n">tau_p_ch</span><span class="p">,</span> <span class="n">D_az</span><span class="p">,</span> <span class="n">D_elv</span><span class="p">,</span> <span class="n">fc</span><span class="p">,</span> 
                            <span class="n">pol_type</span><span class="o">=</span><span class="n">PolTypeSAR</span><span class="o">.</span><span class="n">SINGLE</span><span class="p">,</span> <span class="n">dual_pol_conf</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dual_pol_ps</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                            <span class="n">swath_type</span><span class="o">=</span><span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FULL</span><span class="p">,</span> <span class="n">fixed_swath_size_km</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                            <span class="n">num_sub_swath</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Function to find the highest possible pulse repetition frequency within the user supplied range of PRF, which </span>
<span class="sd">            shall allow observation of target. Not all PRFs are valid and a valid PRF has to be chosen so that it meets all</span>
<span class="sd">            the below conditions:</span>

<span class="sd">            1. The length of the echo from illuminated/ desired swath is less than inter-pulse period.</span>
<span class="sd">            2. The PRFs should be high enough to allow for unambiguous detection of Doppler shifts.</span>
<span class="sd">            3. A transmit pulse does not overlap with the desired echo.</span>
<span class="sd">            4. The Nadir echoes from other transmit pulses do not overlap with the desired echo.</span>

<span class="sd">        [2] is the primary reference for this formulation, although some errors have been found (and corrected for the current</span>
<span class="sd">        implementation). [3] contains the corrections. The referenced formulation is further modified to incorporate the PRF constraints</span>
<span class="sd">        involving observations of multiple polarizations and fixed-swath (desired echo) (original formulation is for full-swath).</span>

<span class="sd">        Of all the available valid PRFs, the highest PRF is chosen since it improves the NESZ observation data-metric.</span>
<span class="sd">        The near-range and far-range calculations are based on the input instrument look-angle. </span>

<span class="sd">        :param f_P_min: Minimum PRF in [Hz].</span>
<span class="sd">        :paramtype f_P_min: float</span>

<span class="sd">        :param f_P_max: Maximum PRF in [Hz].</span>
<span class="sd">        :paramtype f_P_max: float</span>

<span class="sd">        :param sc_speed_kmps: Satellite speed in [km/s].</span>
<span class="sd">        :paramtype sc_speed_kmps: float</span>

<span class="sd">        :param sc_gnd_speed_kmps: Satellite ground speed in [km/s].</span>
<span class="sd">        :paramtype sc_gnd_speed_kmps: float</span>

<span class="sd">        :param alt_km: Altitude of satellite in [km].</span>
<span class="sd">        :paramtype alt_km: float</span>

<span class="sd">        :param instru_look_angle_rad: Instrument look angle (to the middle of the swath) in [radians].</span>
<span class="sd">        :paramtype instru_look_angle_rad: float</span>

<span class="sd">        :param tau_p_ch: Pulse width in [s] per polarization (channel).</span>
<span class="sd">        :paramtype tau_p_ch: float</span>

<span class="sd">        :param D_az: Antenna dimension along cross-range direction in [m].</span>
<span class="sd">        :paramtype D_az: float</span>

<span class="sd">        :param D_elv: Antenna dimension along-range direction in [m].</span>
<span class="sd">        :paramtype D_elv: float</span>

<span class="sd">        :param fc: Carrier center frequency in [Hz].</span>
<span class="sd">        :paramtype fc: float</span>

<span class="sd">        :param pol_type: SAR polarization type (default PolTypeSAR.SINGLE).</span>
<span class="sd">        :paramtype pol_type: :class:`PolTypeSAR`</span>

<span class="sd">        :cvar dual_pol_conf: In case of SMAP dual-pol configuration, this parameter indicates the pulse configuration.</span>
<span class="sd">        :vartype dual_pol_conf: :class:`DualPolPulseConfig` or None</span>

<span class="sd">        :param dual_pol_ps: In case of SMAP dual-pol configuration, this parameter indicates the pulse seperation in seconds.</span>
<span class="sd">        :paramtype dual_pol_ps: float or None</span>

<span class="sd">        :param swath_type: Desired swath type. For ScanSAR only &quot;FULL&quot; is accepted. (default = SwathTypeSAR.FULL)</span>
<span class="sd">        :paramtype swath_type: :class:`SwathTypeSAR` </span>

<span class="sd">        :param fixed_swath_size_km: In case of fixed swath configuration this parameter indicates the size of the fixed swath. Not applicable for ScanSAR.</span>
<span class="sd">        :paramtype fixed_swath_size_km: float</span>

<span class="sd">        :param num_sub_swath: Number of subswaths (default = 1). In case of ScanTech.SCANSAR the number of sub-swaths maybe more than 1.</span>
<span class="sd">        :paramtype num_sub_swath: int</span>

<span class="sd">        :returns: Tuple with the highest possible master PRF which can be used for observation and observed swath-width.</span>
<span class="sd">        :rtype: tuple (int, float)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">alt_km</span> <span class="o">*</span> <span class="mf">1e3</span>
        <span class="n">Re</span> <span class="o">=</span> <span class="n">Constants</span><span class="o">.</span><span class="n">radiusOfEarthInKM</span> <span class="o">*</span> <span class="mf">1e3</span>         
        <span class="n">c</span> <span class="o">=</span> <span class="n">Constants</span><span class="o">.</span><span class="n">speedOfLight</span>
        <span class="n">Rs</span> <span class="o">=</span> <span class="n">Re</span> <span class="o">+</span> <span class="n">h</span> <span class="c1"># [2]  part of equation 5.1.2.3</span>

        <span class="n">lamb</span> <span class="o">=</span> <span class="n">c</span><span class="o">/</span><span class="n">fc</span>        

        <span class="n">theta_elv</span> <span class="o">=</span> <span class="n">lamb</span><span class="o">/</span> <span class="n">D_elv</span> <span class="c1"># (full-beamwidth) illuminating the (sub)swath</span>
        
        <span class="k">if</span><span class="p">(</span><span class="n">swath_type</span> <span class="o">==</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FULL</span> <span class="ow">and</span> <span class="n">num_sub_swath</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">):</span> <span class="c1"># condition is true in case of ScanSAR operation with multiple sub-swaths</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                Consider the PRF evaluation for the farthest (off-nadir) sub-swath. In practice the different sub-swaths</span>
<span class="sd">                may have different operating PRFs. The PRF is expected to be most constrained for the farthest sub-swath.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">instru_look_angle_rad</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">num_sub_swath</span> <span class="o">*</span> <span class="n">theta_elv</span> 
            <span class="n">gamma_m</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">theta_elv</span> <span class="c1"># modify the look angle to that of the farthest subswath</span>
        
        <span class="k">elif</span><span class="p">(</span><span class="n">swath_type</span> <span class="o">==</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FIXED</span> <span class="ow">and</span> <span class="n">num_sub_swath</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span>

        <span class="k">elif</span><span class="p">(</span><span class="n">num_sub_swath</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span> <span class="c1"># condition is reached for Stripmap operation or ScanSAR operation with 1 subswath</span>
            <span class="n">gamma_m</span> <span class="o">=</span> <span class="n">instru_look_angle_rad</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unknown condition reached.&quot;</span><span class="p">)</span>

        <span class="c1"># NOTE: While calculating swath width (FULL or FIXED) the instrument look angle is used!!!! Not the Target look angle (which could be equal to or not equal to the instrument look angle).</span>
        <span class="n">gamma_n_illum</span> <span class="o">=</span> <span class="n">gamma_m</span> <span class="o">-</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">theta_elv</span>
        <span class="n">gamma_f_illum</span> <span class="o">=</span> <span class="n">gamma_m</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">theta_elv</span>
        <span class="n">theta_in_illum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">gamma_n_illum</span><span class="p">)</span><span class="o">*</span><span class="n">Rs</span><span class="o">/</span><span class="n">Re</span><span class="p">)</span>
        <span class="n">theta_horizon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">Re</span><span class="o">/</span><span class="n">Rs</span><span class="p">)</span>
        <span class="n">theta_if_illum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">gamma_f_illum</span><span class="p">)</span><span class="o">*</span><span class="n">Rs</span><span class="o">/</span><span class="n">Re</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">theta_if_illum</span><span class="p">)):</span>
            <span class="c1"># beyond horizon, hence set to horizon angle</span>
            <span class="n">theta_if_illum</span> <span class="o">=</span> <span class="n">theta_horizon</span>

        <span class="n">alpha_n_illum</span> <span class="o">=</span> <span class="n">theta_in_illum</span> <span class="o">-</span> <span class="n">gamma_n_illum</span>
        <span class="n">alpha_f_illum</span> <span class="o">=</span> <span class="n">theta_if_illum</span> <span class="o">-</span> <span class="n">gamma_f_illum</span>
        <span class="n">alpha_s_illum</span> <span class="o">=</span> <span class="n">alpha_f_illum</span> <span class="o">-</span> <span class="n">alpha_n_illum</span>
        <span class="n">W_gr_illum</span> <span class="o">=</span> <span class="n">Re</span><span class="o">*</span><span class="n">alpha_s_illum</span>  <span class="c1"># illuminated (sub)swath</span>

        <span class="n">Rn_illum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">Re</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">Rs</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span><span class="o">*</span><span class="n">Re</span><span class="o">*</span><span class="n">Rs</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha_n_illum</span><span class="p">))</span> <span class="c1"># [2] equation 5.1.3.9 slant-range to near edge of swath</span>
        <span class="n">Rf_illum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">Re</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">Rs</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span><span class="o">*</span><span class="n">Re</span><span class="o">*</span><span class="n">Rs</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha_f_illum</span><span class="p">))</span> <span class="c1"># [2] equation 5.1.3.10 slant-range to far edge of swath</span>
        
        <span class="n">tau_near_illum</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">Rn_illum</span><span class="o">/</span><span class="n">c</span> <span class="c1"># [2] equation 5.1.3.11</span>
        <span class="n">tau_far_illum</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">Rf_illum</span><span class="o">/</span><span class="n">c</span> <span class="c1"># [2] equation 5.1.3.12</span>

        <span class="k">if</span><span class="p">(</span><span class="n">swath_type</span> <span class="o">==</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FULL</span><span class="p">):</span>
            <span class="n">W_gr_obs</span> <span class="o">=</span> <span class="n">W_gr_illum</span>  <span class="c1"># desired (observed) swath</span>

        <span class="k">elif</span><span class="p">(</span><span class="n">swath_type</span> <span class="o">==</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FIXED</span><span class="p">):</span> <span class="c1"># fixed swath</span>
            
            <span class="k">if</span><span class="p">(</span><span class="n">fixed_swath_size_km</span><span class="o">*</span><span class="mf">1e3</span> <span class="o">&lt;</span> <span class="n">W_gr_illum</span><span class="p">):</span>
                <span class="n">W_gr_obs</span> <span class="o">=</span> <span class="n">fixed_swath_size_km</span><span class="o">*</span><span class="mf">1e3</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">W_gr_obs</span> <span class="o">=</span> <span class="n">W_gr_illum</span>

            <span class="n">alpha_s_obs</span> <span class="o">=</span> <span class="n">W_gr_obs</span><span class="o">/</span><span class="n">Re</span>
            <span class="n">theta_im</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">gamma_m</span><span class="p">)</span><span class="o">*</span><span class="n">Rs</span><span class="o">/</span><span class="n">Re</span><span class="p">)</span>
            <span class="n">alpha_m</span> <span class="o">=</span> <span class="n">theta_im</span> <span class="o">-</span> <span class="n">gamma_m</span>  <span class="c1"># [2] equation 5.1.3.5</span>
            <span class="n">alpha_n_obs</span> <span class="o">=</span> <span class="n">alpha_m</span> <span class="o">-</span> <span class="n">alpha_s_obs</span><span class="o">/</span><span class="mf">2.0</span> <span class="c1"># [2] equation 5.1.3.7</span>
            <span class="n">alpha_f_obs</span> <span class="o">=</span> <span class="n">alpha_m</span> <span class="o">+</span> <span class="n">alpha_s_obs</span><span class="o">/</span><span class="mf">2.0</span> <span class="c1"># [2] equation 5.1.3.8</span>

            <span class="n">Rn_obs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">Re</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">Rs</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span><span class="o">*</span><span class="n">Re</span><span class="o">*</span><span class="n">Rs</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha_n_obs</span><span class="p">))</span> <span class="c1"># [2] equation 5.1.3.9 slant-range to near edge of swath</span>
            <span class="n">Rf_obs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">Re</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">Rs</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span><span class="o">*</span><span class="n">Re</span><span class="o">*</span><span class="n">Rs</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha_f_obs</span><span class="p">))</span> <span class="c1"># [2] equation 5.1.3.10 slant-range to far edge of swath</span>
            
            <span class="n">tau_near_obs</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">Rn_obs</span><span class="o">/</span><span class="n">c</span> <span class="c1"># [2] equation 5.1.3.11</span>
            <span class="n">tau_far_obs</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">Rf_obs</span><span class="o">/</span><span class="n">c</span> <span class="c1"># [2] equation 5.1.3.12</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unknown swath configuration type.&quot;</span><span class="p">)</span>

        <span class="n">PRFmin_f</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># Factor by which the minimum PRF constraint must be increased. Becomes significant in case of dual-pol.</span>
        <span class="k">if</span><span class="p">(</span><span class="n">pol_type</span> <span class="o">==</span> <span class="n">PolTypeSAR</span><span class="o">.</span><span class="n">SINGLE</span> <span class="ow">or</span> <span class="n">pol_type</span> <span class="o">==</span> <span class="n">PolTypeSAR</span><span class="o">.</span><span class="n">COMPACT</span><span class="p">):</span>
            <span class="n">tau_p</span> <span class="o">=</span> <span class="n">tau_p_ch</span>
        <span class="k">elif</span><span class="p">(</span><span class="n">pol_type</span> <span class="o">==</span> <span class="n">PolTypeSAR</span><span class="o">.</span><span class="n">DUAL</span><span class="p">):</span>
            <span class="k">if</span><span class="p">(</span><span class="n">dual_pol_conf</span> <span class="o">==</span> <span class="n">DualPolPulseConfig</span><span class="o">.</span><span class="n">AIRSAR</span><span class="p">):</span>
                <span class="n">tau_p</span> <span class="o">=</span> <span class="n">tau_p_ch</span>
                <span class="n">PRFmin_f</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">elif</span><span class="p">(</span><span class="n">dual_pol_conf</span> <span class="o">==</span> <span class="n">DualPolPulseConfig</span><span class="o">.</span><span class="n">SMAP</span><span class="p">):</span>
                <span class="c1">#print(dual_pol_ps)</span>
                <span class="n">tau_p</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">tau_p_ch</span> <span class="o">+</span> <span class="n">dual_pol_ps</span>            
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unknown dual-pol pulse configuration type.&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unknown polarization type.&quot;</span><span class="p">)</span>       
        
        <span class="k">if</span><span class="p">(</span><span class="n">swath_type</span> <span class="o">==</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FULL</span><span class="p">):</span>
            <span class="n">PRFmax</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mf">2.0</span><span class="o">*</span><span class="n">tau_p</span> <span class="o">+</span> <span class="n">tau_far_illum</span> <span class="o">-</span> <span class="n">tau_near_illum</span><span class="p">)</span> <span class="c1"># max allowable PRF [2] equation 5.1.3.13. This condition ensures that only one swath-echo is in a pulse period.</span>
        <span class="k">elif</span><span class="p">(</span><span class="n">swath_type</span> <span class="o">==</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FIXED</span><span class="p">):</span>
            <span class="c1"># PRF max constraint is loosened by considering a &#39;desired echo length&#39; which is less than the illuminated echo length.</span>
            <span class="n">PRFmax</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mf">2.0</span><span class="o">*</span><span class="n">tau_p</span> <span class="o">+</span> <span class="n">tau_far_obs</span> <span class="o">-</span> <span class="n">tau_near_obs</span><span class="p">)</span> <span class="c1"># max allowable PRF [2] equation 5.1.3.13        </span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unknown swath configuration type.&quot;</span><span class="p">)</span>
        
        <span class="c1"># Note that the PRFmin is independent of the number of sub-swaths (PRFmin(stripmap) = PRFmin(scansar)) </span>
        <span class="n">PRFmin</span> <span class="o">=</span> <span class="n">PRFmin_f</span><span class="o">*</span><span class="n">sc_speed_kmps</span><span class="o">*</span><span class="mf">1e3</span><span class="o">/</span><span class="n">SyntheticApertureRadarModel</span><span class="o">.</span><span class="n">get_azimuthal_resolution</span><span class="p">(</span><span class="n">sc_speed_kmps</span><span class="p">,</span> <span class="n">sc_gnd_speed_kmps</span><span class="p">,</span> <span class="n">D_az</span><span class="p">)</span> <span class="c1"># minimum allowable PRF to satisfy Nyquist sampling criteria [2] equation 5.1.2.1 modified to [2] equation (5.4.4.2)</span>
        
        <span class="c1">#print(&quot;PRFmax: &quot;, PRFmax)</span>
        <span class="c1">#print(&quot;PRFmin: &quot;, PRFmin)</span>

        <span class="n">f_P</span> <span class="o">=</span> <span class="kc">None</span>   <span class="c1"># Note that this is the Master PRF</span>
        <span class="c1"># Find the highest possible prf within the input prf range which allows for unambiguous echo detection. </span>
        <span class="k">for</span> <span class="n">_f_P</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">f_P_max</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">f_P_min</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span> <span class="c1"># step down in steps of 1 Hz</span>
            <span class="n">PRFOK</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="c1"># perform first and second check of PRF validity</span>
            <span class="k">if</span><span class="p">((</span><span class="n">_f_P</span><span class="o">&lt;</span> <span class="n">PRFmin</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">_f_P</span><span class="o">&gt;</span><span class="n">PRFmax</span><span class="p">)):</span>
                <span class="n">PRFOK</span> <span class="o">=</span> <span class="kc">False</span> 
                <span class="k">continue</span> <span class="c1"># goto next iteration of _f_P</span>
            
            <span class="k">if</span><span class="p">(</span><span class="n">swath_type</span> <span class="o">==</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FULL</span><span class="p">):</span>
                <span class="c1"># perform third check of PRF validity, check that target echo is not eclipsed by transmit pulse</span>
                <span class="c1"># inequality [2] 5.1.4.1 </span>
                <span class="n">N</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_f_P</span><span class="o">*</span><span class="mf">2.0</span><span class="o">*</span><span class="n">Rn_illum</span><span class="o">/</span><span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">if</span><span class="p">(</span><span class="ow">not</span><span class="p">(((</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">tau_near_illum</span><span class="o">-</span><span class="n">tau_p</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">_f_P</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">_f_P</span> <span class="o">&lt;</span> <span class="n">N</span><span class="o">/</span><span class="p">(</span><span class="n">tau_far_illum</span> <span class="o">+</span> <span class="n">tau_p</span><span class="p">)))):</span>
                    <span class="n">PRFOK</span> <span class="o">=</span> <span class="kc">False</span> 
                    <span class="k">continue</span> <span class="c1"># goto next iteration of _f_P</span>
                            
                <span class="c1"># perform fourth check of PRF validity, check that target echo is not eclipsed by nadir echo </span>
                <span class="c1"># from any of the succeeding pulses (from the transmit pulse under consideration to the pulse </span>
                <span class="c1"># just before the echo)</span>
                <span class="c1"># Inequality [2] 5.1.5.2 seems wrong. Refer to [3] Appendix Section A for the corrected version (R2 in eqn(38) is a typo, and must be replaced by Rn). </span>
                <span class="n">tau_nadir</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">*</span><span class="n">h</span><span class="o">/</span><span class="n">c</span>
                <span class="k">if</span><span class="p">(</span><span class="n">tau_near_illum</span> <span class="o">-</span><span class="n">tau_nadir</span> <span class="o">-</span> <span class="n">tau_p</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span> <span class="c1"># evaluate the condition independent of f_P</span>
                    <span class="n">PRFOK</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># there is nadir echo overlap with desired echo for the mth pulse</span>
                    <span class="k">break</span> <span class="c1"># break used since condition is independent of f_P</span>
                <span class="n">M</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_f_P</span><span class="o">*</span><span class="mf">2.0</span><span class="o">*</span><span class="n">Rf_illum</span><span class="o">/</span><span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">M</span><span class="p">):</span>
                    <span class="k">if</span><span class="p">(((</span><span class="n">m</span><span class="o">/</span><span class="p">(</span><span class="n">tau_near_illum</span> <span class="o">-</span> <span class="n">tau_p</span> <span class="o">-</span> <span class="n">tau_nadir</span><span class="p">))</span> <span class="o">&gt;</span> <span class="n">_f_P</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">_f_P</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">m</span><span class="o">/</span><span class="p">(</span><span class="n">tau_far_illum</span> <span class="o">+</span> <span class="n">tau_p</span> <span class="o">-</span> <span class="n">tau_nadir</span><span class="p">)))):</span>
                        <span class="n">PRFOK</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># there is nadir echo overlap with desired echo for the mth pulse</span>
                        <span class="k">continue</span> <span class="c1"># goto next iteration of _f_P </span>

            <span class="k">elif</span><span class="p">(</span><span class="n">swath_type</span> <span class="o">==</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FIXED</span><span class="p">):</span>
                <span class="c1"># If fixed swath check only in the desired echo window region</span>

                <span class="c1"># perform third check of PRF validity, check that target echo is not eclipsed by transmit pulse</span>
                <span class="c1"># inequality [2] 5.1.4.1 </span>
                <span class="n">N</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_f_P</span><span class="o">*</span><span class="mf">2.0</span><span class="o">*</span><span class="n">Rn_obs</span><span class="o">/</span><span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">if</span><span class="p">(</span><span class="ow">not</span><span class="p">(((</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">tau_near_obs</span><span class="o">-</span><span class="n">tau_p</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">_f_P</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">_f_P</span> <span class="o">&lt;</span> <span class="n">N</span><span class="o">/</span><span class="p">(</span><span class="n">tau_far_obs</span> <span class="o">+</span> <span class="n">tau_p</span><span class="p">)))):</span>
                    <span class="n">PRFOK</span> <span class="o">=</span> <span class="kc">False</span> 
                    <span class="k">continue</span> <span class="c1"># goto next iteration of _f_P     </span>

                <span class="c1"># perform fourth check of PRF validity, check that target echo is not eclipsed by nadir echo </span>
                <span class="c1"># from any of the succeeding pulses (from the transmit pulse under consideration to the pulse </span>
                <span class="c1"># just before the echo)</span>
                <span class="c1"># inequality [2] 5.1.5.2 seems wrong.  Refer to [3] Appendix Section A for the corrected version (R2 in eqn(38) is a type, and must be replaced by Rn). </span>
                
                <span class="n">tau_nadir</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">*</span><span class="n">h</span><span class="o">/</span><span class="n">c</span>
                <span class="k">if</span><span class="p">(</span><span class="n">tau_near_obs</span> <span class="o">-</span><span class="n">tau_nadir</span> <span class="o">-</span> <span class="n">tau_p</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span> <span class="c1"># evaluate the condition independent of f_P</span>
                    <span class="n">PRFOK</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># there is nadir echo overlap with desired echo for the mth pulse</span>
                    <span class="k">break</span> <span class="c1"># break used since condition is independent of f_P</span>

                <span class="n">M</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_f_P</span><span class="o">*</span><span class="mf">2.0</span><span class="o">*</span><span class="n">Rf_obs</span><span class="o">/</span><span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">M</span><span class="p">):</span>
                    <span class="k">if</span><span class="p">(((</span><span class="n">m</span><span class="o">/</span><span class="p">(</span><span class="n">tau_near_obs</span> <span class="o">-</span> <span class="n">tau_p</span> <span class="o">-</span> <span class="n">tau_nadir</span><span class="p">))</span> <span class="o">&gt;</span> <span class="n">_f_P</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">_f_P</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">m</span><span class="o">/</span><span class="p">(</span><span class="n">tau_far_obs</span> <span class="o">+</span> <span class="n">tau_p</span> <span class="o">-</span> <span class="n">tau_nadir</span><span class="p">)))):</span>
                        <span class="n">PRFOK</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># there is nadir echo overlap with desired echo </span>
                        <span class="k">continue</span> <span class="c1"># goto next iteration of _f_P </span>
                
                <span class="c1"># To prevent range ambiguity the previous echos from the total illuminated swath should not </span>
                <span class="c1"># overlap with the desired echo (current). This condition can be formulated similar to the Nadir</span>
                <span class="c1"># interference condition, albeit with the nadir-echo replaced in terms of main-lobe echo from pulses</span>
                <span class="c1"># occuring after the reference pulse until the desired echo window has ended.</span>
                <span class="n">tau_ML_start</span> <span class="o">=</span> <span class="n">tau_near_illum</span> <span class="c1"># ML =&gt; Main Lobe</span>
                <span class="n">tau_ML_len</span> <span class="o">=</span> <span class="n">tau_far_illum</span> <span class="o">-</span> <span class="n">tau_near_illum</span> <span class="c1"># length of main-lobe echo</span>
                <span class="n">W</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_f_P</span><span class="o">*</span><span class="mf">2.0</span><span class="o">*</span><span class="n">Rf_obs</span><span class="o">/</span><span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">W</span><span class="p">):</span>                    
<span class="w">                    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                    # below code causes errors</span>
<span class="sd">                    print(1, (w/(tau_near_obs - tau_ML_len - tau_ML_start)) &lt; _f_P)</span>
<span class="sd">                    print(2, _f_P &lt; (w/(tau_far_obs + tau_p - tau_ML_start)))</span>
<span class="sd">                    if(((w/(tau_near_obs - tau_ML_len - tau_ML_start)) &gt; _f_P) and (_f_P &gt; (w/(tau_far_obs + tau_p - tau_ML_start)))):</span>
<span class="sd">                        PRFOK = False # there is main echo overlap with desired echo </span>
<span class="sd">                        print(&quot;main echo overlap&quot;)</span>
<span class="sd">                        continue # goto next iteration of _f_P </span>
<span class="sd">                    &quot;&quot;&quot;</span>
                    <span class="n">cond1</span> <span class="o">=</span> <span class="p">(</span><span class="n">tau_near_obs</span> <span class="o">&gt;</span> <span class="n">tau_ML_len</span> <span class="o">+</span> <span class="n">tau_ML_start</span> <span class="o">+</span> <span class="n">w</span><span class="o">/</span><span class="n">_f_P</span><span class="p">)</span>                    
                    <span class="n">cond2</span> <span class="o">=</span>  <span class="n">tau_ML_start</span> <span class="o">&gt;</span> <span class="n">tau_far_obs</span> <span class="o">+</span> <span class="n">tau_p</span> <span class="o">-</span> <span class="n">w</span><span class="o">/</span><span class="n">_f_P</span>
                    <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="ow">not</span> <span class="n">cond1</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">cond2</span><span class="p">)):</span>
                        <span class="n">PRFOK</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># there is main echo overlap with desired echo </span>
                        <span class="c1">#print(&quot;main echo overlap&quot;)</span>
                        <span class="k">continue</span> <span class="c1"># goto next iteration of _f_P </span>
                

            <span class="c1"># If control has reached here and if PRFOK is still True, then this is a valid PRF</span>
            <span class="k">if</span><span class="p">(</span><span class="n">PRFOK</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
                <span class="n">f_P</span> <span class="o">=</span> <span class="n">_f_P</span>
                <span class="k">break</span>

        <span class="c1"># compute swath-size</span>
        <span class="k">if</span><span class="p">(</span><span class="n">swath_type</span> <span class="o">==</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FULL</span> <span class="ow">and</span> <span class="n">num_sub_swath</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">):</span> <span class="c1"># condition is true in case of ScanSAR mode with multiple sub-swaths</span>
            <span class="c1"># imaged swath consists of multiple sub-swaths, each sub-swath size is different.</span>
            <span class="n">swath_bw</span> <span class="o">=</span> <span class="n">num_sub_swath</span> <span class="o">*</span> <span class="n">theta_elv</span> <span class="c1"># in case of scan-sar, the num_sub_swath &gt; 1</span>
            <span class="n">gamma_n_illum</span> <span class="o">=</span> <span class="n">instru_look_angle_rad</span> <span class="o">-</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">swath_bw</span>
            <span class="n">gamma_f_illum</span> <span class="o">=</span> <span class="n">instru_look_angle_rad</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">swath_bw</span>
            <span class="n">theta_in_illum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">gamma_n_illum</span><span class="p">)</span><span class="o">*</span><span class="n">Rs</span><span class="o">/</span><span class="n">Re</span><span class="p">)</span>
            <span class="n">theta_horizon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">Re</span><span class="o">/</span><span class="n">Rs</span><span class="p">)</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">gamma_f_illum</span><span class="p">)</span><span class="o">*</span><span class="n">Rs</span><span class="o">/</span><span class="n">Re</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">theta_if_illum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">gamma_f_illum</span><span class="p">)</span><span class="o">*</span><span class="n">Rs</span><span class="o">/</span><span class="n">Re</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># beyond horizon, hence set to horizon angle</span>
                <span class="n">theta_if_illum</span> <span class="o">=</span> <span class="n">theta_horizon</span>
            <span class="n">alpha_n_illum</span> <span class="o">=</span> <span class="n">theta_in_illum</span> <span class="o">-</span> <span class="n">gamma_n_illum</span>
            <span class="n">alpha_f_illum</span> <span class="o">=</span> <span class="n">theta_if_illum</span> <span class="o">-</span> <span class="n">gamma_f_illum</span>
            <span class="n">alpha_s_illum</span> <span class="o">=</span> <span class="n">alpha_f_illum</span> <span class="o">-</span> <span class="n">alpha_n_illum</span>
            <span class="n">swath_size</span> <span class="o">=</span> <span class="n">Re</span><span class="o">*</span><span class="n">alpha_s_illum</span>  

        <span class="k">elif</span><span class="p">(</span><span class="n">swath_type</span> <span class="o">==</span> <span class="n">SwathTypeSAR</span><span class="o">.</span><span class="n">FIXED</span> <span class="ow">and</span> <span class="n">num_sub_swath</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span>

        <span class="k">elif</span><span class="p">(</span><span class="n">num_sub_swath</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span> <span class="c1"># condition is reached for Stripmap operation or ScanSAR operation with 1 subswath</span>
            <span class="n">swath_size</span> <span class="o">=</span> <span class="n">W_gr_obs</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unknown condition reached.&quot;</span><span class="p">)</span>
                        
        <span class="k">return</span> <span class="p">(</span><span class="n">f_P</span><span class="p">,</span> <span class="n">swath_size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get the instrument identifier.</span>

<span class="sd">        :returns: instrument identifier.</span>
<span class="sd">        :rtype: str</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
    
    <span class="k">def</span> <span class="nf">get_field_of_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get the instrument field-of-view.</span>

<span class="sd">        :returns: Instrument field-of-view. </span>
<span class="sd">        :rtype: :class:`instrupy.util.ViewGeometry`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fieldOfView</span>

    <span class="k">def</span> <span class="nf">get_scene_field_of_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get the scene-field-of-view (sceneFOV).</span>

<span class="sd">        :returns: Scene-field-of-view.</span>
<span class="sd">        :rtype: :class:`instrupy.util.ViewGeometry`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneFieldOfView</span>

    <span class="k">def</span> <span class="nf">get_field_of_regard</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get the instrument field of regard. </span>

<span class="sd">        :returns: Field of regard (list of ``ViewGeometry`` objects). </span>
<span class="sd">        :rtype: list, :class:`instrupy.util.ViewGeometry`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fieldOfRegard</span>

    <span class="k">def</span> <span class="nf">get_orientation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get the instrument orientation.</span>

<span class="sd">        :returns: Instrument orientation.</span>
<span class="sd">        :rtype: :class:`instrupy.util.Orientation`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span>
    
    <span class="k">def</span> <span class="nf">get_pointing_option</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get the list of pointing options.</span>

<span class="sd">        :returns: List of pointing options.</span>
<span class="sd">        :rtype: list, :class:`instrupy.util.Orientation`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointingOption</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, BAERI.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>