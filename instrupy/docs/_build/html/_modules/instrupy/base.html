

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>instrupy.base &mdash; InstruPy 0.2 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> InstruPy
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../instrument_models.html">Instrument Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../miscellaneous.html">Miscellaneous</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../use_cases.html">Use Cases</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">InstruPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>instrupy.base</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for instrupy.base</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot; </span>
<span class="sd">.. module:: base</span>

<span class="sd">:synopsis: *Provides the factory class :class:`InstrumentModelFactory` for dishing out instrument-model objects</span>
<span class="sd">            based on the input dict/json-string specifications, and also provides the :class:`Instrument` class</span>
<span class="sd">            to be used as primary means of instrument initialization.*</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">instrupy.util</span> <span class="kn">import</span> <span class="n">Entity</span>
<span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<span class="kn">import</span> <span class="nn">copy</span>

<span class="kn">from</span> <span class="nn">.basic_sensor_model</span> <span class="kn">import</span> <span class="n">BasicSensorModel</span>
<span class="kn">from</span> <span class="nn">.passive_optical_scanner_model</span> <span class="kn">import</span> <span class="n">PassiveOpticalScannerModel</span>
<span class="kn">from</span> <span class="nn">.synthetic_aperture_radar_model</span> <span class="kn">import</span> <span class="n">SyntheticApertureRadarModel</span>
<span class="kn">from</span> <span class="nn">.radiometer_model</span> <span class="kn">import</span> <span class="n">RadiometerModel</span>

<div class="viewcode-block" id="InstrumentModelFactory"><a class="viewcode-back" href="../../generated/instrupy.base.InstrumentModelFactory.html#instrupy.base.InstrumentModelFactory">[docs]</a><span class="k">class</span> <span class="nc">InstrumentModelFactory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Factory class which allows to register and invoke the appropriate instrument-model class. </span>
<span class="sd">    </span>
<span class="sd">    :class:`BasicSensorModel`, :class:`PassiveOpticalScannerModel`, :class:`SyntheticApertureRadarModel` and :class:`RadiometerModel`</span>
<span class="sd">    instrument-model classes are registered in the factory. Additional user-defined instrument-model classes</span>
<span class="sd">    can be registered as shown below: </span>

<span class="sd">    Usage: </span>
<span class="sd">    </span>
<span class="sd">    .. code-block:: python</span>
<span class="sd">        </span>
<span class="sd">        factory = instrupy.InstrumentModelFactory()</span>
<span class="sd">        factory.register_instrument_model(&#39;Doppler Radar 2021&#39;, DopplerRadar)</span>
<span class="sd">        instru1 = factory.get_instrument_model(&#39;Doppler Radar 2021&#39;)</span>

<span class="sd">    :ivar _creators: Dictionary mapping instrument type label to the appropriate instrument class. </span>
<span class="sd">    :vartype _creators: dict</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_creators</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_instrument_model</span><span class="p">(</span><span class="s1">&#39;Basic Sensor&#39;</span><span class="p">,</span> <span class="n">BasicSensorModel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_instrument_model</span><span class="p">(</span><span class="s1">&#39;Passive Optical Scanner&#39;</span><span class="p">,</span> <span class="n">PassiveOpticalScannerModel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_instrument_model</span><span class="p">(</span><span class="s1">&#39;Synthetic Aperture Radar&#39;</span><span class="p">,</span> <span class="n">SyntheticApertureRadarModel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_instrument_model</span><span class="p">(</span><span class="s1">&#39;Radiometer&#39;</span><span class="p">,</span> <span class="n">RadiometerModel</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">register_instrument_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_type</span><span class="p">,</span> <span class="n">creator</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Function to register instruments.</span>

<span class="sd">        :var _type: Instrument type (label).</span>
<span class="sd">        :vartype _type: str</span>

<span class="sd">        :var creator: Instrument class.</span>
<span class="sd">        :vartype creator: Instrument class.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_creators</span><span class="p">[</span><span class="n">_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">creator</span>

    <span class="k">def</span> <span class="nf">get_instrument_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">specs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Function to get the appropriate instrument-model instance.</span>

<span class="sd">        :var specs: Instrument-model specifications which also contains a valid instrument</span>
<span class="sd">                    type in the &quot;@type&quot; dict key. The instrument type is valid if it has been</span>
<span class="sd">                    registered with the ``InstrumentModelFactory`` instance.</span>
<span class="sd">        :vartype _type: dict</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_type</span> <span class="o">=</span> <span class="n">specs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Instrument type key/value pair not found in specifications dictionary.&#39;</span><span class="p">)</span>

        <span class="n">creator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_creators</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">creator</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">creator</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">specs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Instrument"><a class="viewcode-back" href="../../generated/instrupy.base.Instrument.html#instrupy.base.Instrument">[docs]</a><span class="k">class</span> <span class="nc">Instrument</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main class used to initialize instruments with consideration of multiple operating modes. </span>
<span class="sd">       Each operating mode is stored as a of the type of the respective instrument-model class </span>
<span class="sd">       in a variable length list.       </span>

<span class="sd">       :ivar _type: Type of instrument.</span>
<span class="sd">       :vartype _type: str</span>

<span class="sd">       :ivar name: Name of instrument.</span>
<span class="sd">       :vartype name: str</span>

<span class="sd">       :ivar mode: List of the objects of types corresponding to the instrument type. Each object stores the corresponding mode specifications.</span>
<span class="sd">       :vartype mode: list, :class:`instrupy.basic_sensor_model` (or) :class:`instrupy.passive_optical_scanner_model` (or) :class:`instrupy.synthetic_aperture_radar_model`</span>

<span class="sd">       :ivar mode_id: List of identifiers of the instrument modes. Note the order of the ids in the list is synced to the order of the modes in :code:`mode` instance variable list.</span>
<span class="sd">       :vartype mode_id: list, str</span>

<span class="sd">       :ivar _id: Instrument identifier.</span>
<span class="sd">       :vartype _id: str</span>

<span class="sd">       Usage: </span>
<span class="sd">    </span>
<span class="sd">        .. code-block:: python</span>
<span class="sd">            </span>
<span class="sd">            x = Instrument.from_dict(specs) </span>
<span class="sd">            mode1_fov = x.get_fov(mode=1) </span>
<span class="sd">            metrics = x.calc_data_metrics(mode=4)</span>
<span class="sd">            obsv1 = x.synthesize_observations(2459266.6, [{...},{...},{...},.....,{...}], 4) </span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Initialization.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">_type</span><span class="p">)</span> <span class="k">if</span> <span class="n">_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span> <span class="k">if</span> <span class="n">mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="k">if</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">):</span>     
            <span class="c1"># Make list of all mode ids. Note the order of the ids in the list is synced to the order of the modes in self.mode list.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode_id</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mode_id</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">get_id</span><span class="p">())</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Instrument</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span><span class="p">)</span>     

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Parses an instrument from a normalized JSON dictionary.</span>

<span class="sd">        :param d: Normalized JSON dictionary with the corresponding instrument specifications. </span>
<span class="sd">        :paramtype d: dict</span>

<span class="sd">        :returns: Instrument object initialized with the input specifications.</span>
<span class="sd">        :rtype: :class:`instrupy.Instrument`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check and store instrument type</span>
        <span class="n">_type</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Instrument type key/value pair not found in specifications dictionary.&#39;</span><span class="p">)</span>

        <span class="c1"># ensure valid id for the instrument</span>
        <span class="k">if</span><span class="p">(</span><span class="s2">&quot;@id&quot;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">):</span>
            <span class="n">_id</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span> <span class="c1"># assign a random id.</span>
            <span class="n">d</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;@id&quot;</span><span class="p">:</span><span class="n">_id</span><span class="p">})</span>

        <span class="n">fac</span> <span class="o">=</span> <span class="n">InstrumentModelFactory</span><span class="p">()</span>
        <span class="k">if</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;mode&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span> <span class="c1"># multiple modes may exist</span>
            <span class="n">mode_specs</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;mode&quot;</span><span class="p">]</span> <span class="c1"># a list</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># list of instrument objects with the corresponding mode-spec</span>
            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">_spec</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">mode_specs</span><span class="p">):</span> <span class="c1"># iterate over list of modes</span>
                
                <span class="c1">##### Start create mode specifications dict by combining the data specific to the mode and common data #####</span>

                <span class="n">_mode</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;mode&#39;</span><span class="p">}</span> <span class="c1"># copy all common d to new dict                 </span>
                <span class="c1"># ensure valid mode id</span>
                <span class="k">if</span><span class="p">(</span><span class="n">_spec</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span> <span class="c1"># check if mode id is specified by user</span>
                   <span class="n">_mode_id</span> <span class="o">=</span> <span class="n">_spec</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">]</span>   
                   <span class="k">del</span> <span class="n">_spec</span><span class="p">[</span><span class="s1">&#39;@id&#39;</span><span class="p">]</span>              
                <span class="k">else</span><span class="p">:</span> 
                   <span class="n">_mode_id</span> <span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span> <span class="c1"># assign a mode-id</span>
                
                <span class="n">_mode</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;@id&quot;</span><span class="p">:</span><span class="n">_mode_id</span><span class="p">})</span>                
                <span class="c1"># update and copy the mode specific specifications to the mode dict   </span>
                <span class="n">_mode</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">_spec</span><span class="p">)</span> 

                <span class="c1">##### End create mode specifications dict #####       </span>
                
                <span class="n">mode</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fac</span><span class="o">.</span><span class="n">get_instrument_model</span><span class="p">(</span><span class="n">_mode</span><span class="p">))</span>
                
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># no mode definition =&gt; default single mode of operation is to be considered</span>
            <span class="n">mode_dict</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
            <span class="n">mode_dict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;@id&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">})</span> <span class="c1"># assign mode_id different from instrument id</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">mode_dict</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="c1"># delete name from dictionary (if present) since it is name of instrument</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="p">[</span><span class="n">fac</span><span class="o">.</span><span class="n">get_instrument_model</span><span class="p">(</span><span class="n">mode_dict</span><span class="p">)]</span>            
        
        <span class="k">return</span> <span class="n">Instrument</span><span class="p">(</span> <span class="n">_type</span> <span class="o">=</span> <span class="n">_type</span><span class="p">,</span>
                           <span class="n">name</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                           <span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span><span class="p">,</span>
                           <span class="n">_id</span> <span class="o">=</span> <span class="n">_id</span>                          
                          <span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Translate the Instrument object to a Python dictionary such that it can be uniquely reconstructed back from the dictionary.</span>

<span class="sd">        :returns: Instrument specifications as python dictionary.</span>
<span class="sd">        :rtype: dict</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">({</span>
                  <span class="s2">&quot;@type&quot;</span><span class="p">:</span>  <span class="bp">self</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span>
                  <span class="s2">&quot;name&quot;</span> <span class="p">:</span>  <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                  <span class="s2">&quot;@id&quot;</span>  <span class="p">:</span>  <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
                  <span class="p">})</span>
        <span class="n">mode_dict</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_mode</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
            <span class="n">mode_dict</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_mode</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
        <span class="n">d</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="n">mode_dict</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">d</span>
    
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Instrument.from_dict(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get instrument identifier.</span>

<span class="sd">        :returns: Instrument identifier.</span>
<span class="sd">        :rtype: str</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
    
    <span class="k">def</span> <span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get instrument type.</span>

<span class="sd">        :returns: Instrument type.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>

    <span class="k">def</span> <span class="nf">get_mode_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Return the list of mode identifiers.</span>

<span class="sd">        :returns: Mode identifiers.</span>
<span class="sd">        :rtype: list, str</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode_id</span>

    <span class="k">def</span> <span class="nf">get_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Return instrument mode corresponding to the input mode identifier. In case of invalid or no input mode ids, </span>
<span class="sd">            the first mode in the list of modes is returned.</span>

<span class="sd">            :param mode_id: Mode identifer.</span>
<span class="sd">            :paramtype mode_id: str</span>

<span class="sd">            :returns: Instrument model object initialized to the corresponding mode specifications.</span>
<span class="sd">            :rtype: :class:`instrupy.BasicSensorModel` (or) :class:`instrupy.PassiveOpticalScannerModel` (or) :class:`instrupy.SyntheticApertureRadarModel` (or) user-defined instrument model class</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mode_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">_mode_id_indx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode_id</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">mode_id</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Invalid instrument mode-id </span><span class="si">{}</span><span class="s1">, defaulting to the first mode in the list of modes.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mode_id</span><span class="p">))</span>
                <span class="n">_mode_id_indx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">[</span><span class="n">_mode_id_indx</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">_mode</span>

    <span class="k">def</span> <span class="nf">get_field_of_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get field-of-view (of a specific instrument mode). If no mode identifier is specified, the </span>
<span class="sd">            the first mode in the list of modes of the instrument is considered.</span>

<span class="sd">        :param mode_id: Identifier of the mode.</span>
<span class="sd">        :paramtype mode_id: str</span>
<span class="sd">        </span>
<span class="sd">        :returns: Field-of-view (of a specific instrument mode).</span>
<span class="sd">        :rtype: :class:`instrupy.util.ViewGeometry`</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        <span class="n">_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mode</span><span class="p">(</span><span class="n">mode_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_mode</span><span class="o">.</span><span class="n">get_field_of_view</span><span class="p">()</span>
    
    <span class="k">def</span> <span class="nf">get_scene_field_of_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get the scene-field-of-view (of a specific instrument mode). If no mode identifier is specified, the </span>
<span class="sd">            the first mode in the list of modes of the instrument is considered.</span>

<span class="sd">        :param mode_id: Identifier of the mode.</span>
<span class="sd">        :paramtype mode_id: str</span>
<span class="sd">        </span>
<span class="sd">        :returns: Scene-field-of-view (of a specific instrument mode).</span>
<span class="sd">        :rtype: :class:`instrupy.util.ViewGeometry`</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        <span class="n">_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mode</span><span class="p">(</span><span class="n">mode_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_mode</span><span class="o">.</span><span class="n">get_scene_field_of_view</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_field_of_regard</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get field-of-regard (of a specific instrument mode). If no mode identifier is specified, the </span>
<span class="sd">            the first mode in the list of modes of the instrument is considered. </span>

<span class="sd">        :param mode_id: Identifier of the mode.</span>
<span class="sd">        :paramtype mode_id: str</span>
<span class="sd">        </span>
<span class="sd">        :returns: Field-of-regard (of a specific instrument mode).</span>
<span class="sd">        :rtype: :class:`instrupy.util.ViewGeometry`</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span> 
        <span class="n">_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mode</span><span class="p">(</span><span class="n">mode_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_mode</span><span class="o">.</span><span class="n">get_field_of_regard</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_orientation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get orientation (of a specific instrument mode). If no mode identifier is specified, the </span>
<span class="sd">            the first mode in the list of modes of the instrument is considered.</span>

<span class="sd">        :param mode_id: Identifier of the mode.</span>
<span class="sd">        :paramtype mode_id: str</span>

<span class="sd">        :returns: Orientation (of a specific instrument mode).</span>
<span class="sd">        :rtype: :class:`instrupy.util.Orientation`</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mode</span><span class="p">(</span><span class="n">mode_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_mode</span><span class="o">.</span><span class="n">get_orientation</span><span class="p">()</span>
    
    <span class="k">def</span> <span class="nf">get_pointing_option</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get pointing-options (associated with a specific instrument mode). If no mode identifier is specified, the </span>
<span class="sd">            the first mode in the list of modes of the instrument is considered.</span>

<span class="sd">        :param mode_id: Identifier of the mode.</span>
<span class="sd">        :paramtype mode_id: str</span>

<span class="sd">        :returns: List of pointing-options (Orientation objects) associated with the specified instrument mode.</span>
<span class="sd">        :rtype: list, :class:`instrupy.util.Orientation`</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mode</span><span class="p">(</span><span class="n">mode_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_mode</span><span class="o">.</span><span class="n">get_pointing_option</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_pixel_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get pixel-configuration (of a specific instrument mode). If no mode identifier is specified, the </span>
<span class="sd">            the first mode in the list of modes of the instrument is considered.</span>

<span class="sd">        :param mode_id: Identifier of the mode.</span>
<span class="sd">        :paramtype mode_id: str</span>
<span class="sd">        </span>
<span class="sd">        :returns: Pixel-configuration (of a specific instrument mode).</span>
<span class="sd">        :rtype: namedtuple, (int, int)</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mode</span><span class="p">(</span><span class="n">mode_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_mode</span><span class="o">.</span><span class="n">get_pixel_config</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">calc_data_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Calculate the observation data metrics associated with the instrument. Please refer to the documentation </span>
<span class="sd">            of the instrument-model of interest for description on the calculations. </span>

<span class="sd">        :param mode_id: Identifier of the mode.</span>
<span class="sd">        :paramtype mode_id: str</span>

<span class="sd">        :param \*args: Positional arguments. Refer to the ``calc_data_metrics(...)`` function of the instrument model class of interest. </span>

<span class="sd">        :param \**kwargs: Keyword arguments. Refer to the ``calc_data_metrics(...)`` function of the instrument model class of interest. </span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>       
        <span class="n">_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mode</span><span class="p">(</span><span class="n">mode_id</span><span class="p">)</span>
        <span class="n">obsv_metrics</span> <span class="o">=</span> <span class="n">_mode</span><span class="o">.</span><span class="n">calc_data_metrics</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obsv_metrics</span>    
    
    <span class="k">def</span> <span class="nf">synthesize_observation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Compute the value of the geophysical variable (associated with the instrument) at the input pixel (center) positions. </span>
<span class="sd">            </span>
<span class="sd">        :param mode_id: Identifier of the mode.</span>
<span class="sd">        :paramtype mode_id: str</span>

<span class="sd">        :param \*args: Positional arguments. Refer to the ``synthesize_observation(...)`` function of the instrument-model class of interest. </span>

<span class="sd">        :param \**kwargs: Keyword arguments. Refer to the ``synthesize_observation(...)`` function of the instrument-model class of interest. </span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mode</span><span class="p">(</span><span class="n">mode_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_mode</span><span class="o">.</span><span class="n">synthesize_observation</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, BAERI.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>