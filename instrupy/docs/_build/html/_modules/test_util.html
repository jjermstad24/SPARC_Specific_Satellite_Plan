

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>test_util &mdash; InstruPy 0.2 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> InstruPy
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../instrument_models.html">Instrument Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous.html">Miscellaneous</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use_cases.html">Use Cases</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">InstruPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Module code</a> &raquo;</li>
        
      <li>test_util</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for test_util</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Unit tests for instrupy.util module.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">instrupy.util</span> <span class="kn">import</span> <span class="o">*</span>

<div class="viewcode-block" id="TestEntity"><a class="viewcode-back" href="../tests.html#test_util.TestEntity">[docs]</a><span class="k">class</span> <span class="nc">TestEntity</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
  
<div class="viewcode-block" id="TestEntity.ChildClass"><a class="viewcode-back" href="../tests.html#test_util.TestEntity.ChildClass">[docs]</a>    <span class="k">class</span> <span class="nc">ChildClass</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>            
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="mi">123</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Ramesh&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">record</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;workexp&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">:</span> <span class="s2">&quot;electrical&quot;</span><span class="p">}</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">TestEntity</span><span class="o">.</span><span class="n">ChildClass</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;TestClass&quot;</span><span class="p">)</span></div>
    
    <span class="k">def</span> <span class="nf">test_eq</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">Entity</span><span class="p">(),</span> <span class="n">Entity</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">Entity</span><span class="p">(),</span> <span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">),</span> <span class="n">Entity</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">),</span> <span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">),</span> <span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">)),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">test_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">Entity</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@type&quot;</span><span class="p">),</span> <span class="s2">&quot;Entity&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@id&quot;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_to_dict_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@id&quot;</span><span class="p">),</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>

        <span class="n">d</span> <span class="o">=</span> <span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@id&quot;</span><span class="p">),</span><span class="mi">123</span><span class="p">)</span>

        <span class="n">d</span> <span class="o">=</span> <span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@id&quot;</span><span class="p">),</span><span class="s2">&quot;123&quot;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">test_to_dict_childclass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                
        <span class="n">x</span> <span class="o">=</span> <span class="n">TestEntity</span><span class="o">.</span><span class="n">ChildClass</span><span class="p">()</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@id&quot;</span><span class="p">),</span> <span class="mi">123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@type&quot;</span><span class="p">),</span> <span class="s2">&quot;TestClass&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">),</span> <span class="s2">&quot;Ramesh&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;record&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;workexp&quot;</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;record&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">),</span> <span class="s2">&quot;electrical&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Entity</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Entity&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_from_dict_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Entity</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="nb">dict</span><span class="p">({</span><span class="s2">&quot;@id&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">Entity</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="nb">dict</span><span class="p">({</span><span class="s2">&quot;@id&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">Entity</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="nb">dict</span><span class="p">({</span><span class="s2">&quot;@id&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;123&quot;</span><span class="p">)</span>    
        
    <span class="k">def</span> <span class="nf">test_to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">Entity</span><span class="p">()</span><span class="o">.</span><span class="n">to_json</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@type&quot;</span><span class="p">),</span> <span class="s2">&quot;Entity&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@id&quot;</span><span class="p">))</span>       

    <span class="k">def</span> <span class="nf">test_to_json_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@id&quot;</span><span class="p">),</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>

        <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@id&quot;</span><span class="p">),</span><span class="mi">123</span><span class="p">)</span>

        <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">Entity</span><span class="p">(</span><span class="n">_id</span><span class="o">=</span><span class="s2">&quot;123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@id&quot;</span><span class="p">),</span><span class="s2">&quot;123&quot;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">test_to_json_childclass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                
        <span class="n">x</span> <span class="o">=</span> <span class="n">TestEntity</span><span class="o">.</span><span class="n">ChildClass</span><span class="p">()</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">to_json</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@id&quot;</span><span class="p">),</span> <span class="mi">123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@type&quot;</span><span class="p">),</span> <span class="s2">&quot;TestClass&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">),</span> <span class="s2">&quot;Ramesh&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;record&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;workexp&quot;</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;record&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">),</span> <span class="s2">&quot;electrical&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_from_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Entity</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Entity&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_from_json_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Entity</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;@id&quot;: &quot;test&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">Entity</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;@id&quot;: 123}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">Entity</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;@id&quot;: &quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;123&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestOrientation"><a class="viewcode-back" href="../tests.html#test_util.TestOrientation">[docs]</a><span class="k">class</span> <span class="nc">TestOrientation</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_from_json_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="c1"># Test valid nominal case</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;SIDE_LOOK&quot;,&quot;sideLookAngle&quot;:10, &quot;@id&quot;: 123}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">ref_frame</span><span class="p">,</span> <span class="n">ReferenceFrame</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SC_BODY_FIXED&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="c1"># No reference frame specification</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;convention&quot;: &quot;SIDE_LOOK&quot;,&quot;sideLookAngle&quot;:10, &quot;@id&quot;: 123}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">ref_frame</span><span class="p">,</span> <span class="n">ReferenceFrame</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NADIR_POINTING&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>        
        <span class="c1"># Test for wrong convention specification</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;NADIR_POINTING&quot;, &quot;convention&quot;: &quot;SIDE_LOOK1&quot;,&quot;sideLookAngle&quot;:10}&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;NADIR_POINTING&quot;, &quot;convention&quot;: &quot;XXZ&quot;,&quot;xRotation&quot;:10,&quot;yRotation&quot;:-10.4,&quot;zRotation&quot;:20.78}&#39;</span><span class="p">)</span>
        <span class="c1"># Test for case-insensitivity</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;NADIR_POINTING&quot;, &quot;convention&quot;: &quot;SIDE_look&quot;,&quot;sideLookAngle&quot;:10}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="c1"># Test wraping of angle values to [0, 360]deg range.</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;NADIR_POINTING&quot;, &quot;convention&quot;: &quot;XYz&quot;,&quot;xRotation&quot;:10,&quot;yRotation&quot;:-10.4,&quot;zRotation&quot;:20.78}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">,</span> <span class="mi">360</span><span class="o">-</span><span class="mf">10.4</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_from_json_SIDELOOKANGLE_convention</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Test for positive angle less than 360 deg</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;SIDE_LOOK&quot;,&quot;sideLookAngle&quot;:10}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">ref_frame</span><span class="p">,</span> <span class="n">ReferenceFrame</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SC_BODY_FIXED&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
        <span class="c1"># Test for negative angle</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;SIDE_LOOK&quot;,&quot;sideLookAngle&quot;:-10}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">ref_frame</span><span class="p">,</span> <span class="n">ReferenceFrame</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SC_BODY_FIXED&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">,</span> <span class="mi">350</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
        <span class="c1"># Test for positive angle greater than 360 deg</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;NADIR_POINTING&quot;, &quot;convention&quot;: &quot;SIDE_LOOK&quot;,&quot;sideLookAngle&quot;:380}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">ref_frame</span><span class="p">,</span> <span class="n">ReferenceFrame</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NADIR_POINTING&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
        <span class="c1"># Test for negative angle less than -360 deg</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;convention&quot;: &quot;SIDE_LOOK&quot;,&quot;sideLookAngle&quot;:-380}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">ref_frame</span><span class="p">,</span> <span class="n">ReferenceFrame</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NADIR_POINTING&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">,</span> <span class="mi">340</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
        <span class="c1"># Test for no convention specification</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;sideLookAngle&quot;:-30}&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_from_json_XYZ_convention</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Test for positive, negative angles</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;EARTH_CENTERED_INERTIAL&quot;, &quot;convention&quot;: &quot;XYZ&quot;,&quot;xRotation&quot;:10,&quot;yRotation&quot;:-10.4,&quot;zRotation&quot;:20.78}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">ref_frame</span><span class="p">,</span> <span class="n">ReferenceFrame</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;EARTH_CENTERED_INERTIAL&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">,</span> <span class="mf">349.6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle3</span><span class="p">,</span> <span class="mf">20.78</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
        <span class="c1"># Test for positive angles greater than 360 deg, negative angles lesser than -360 deg</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;EARTH_CENTERED_INERTIAL&quot;, &quot;convention&quot;: &quot;XYZ&quot;,&quot;xRotation&quot;:410,&quot;yRotation&quot;:1045.8,&quot;zRotation&quot;:-458}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">ref_frame</span><span class="p">,</span> <span class="n">ReferenceFrame</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;EARTH_CENTERED_INERTIAL&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle1</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">,</span> <span class="mf">325.8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle3</span><span class="p">,</span> <span class="mi">262</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">test_from_json_REF_FRAME_ALIGNED_convention</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;NADIR_POINTING&quot;, &quot;convention&quot;: &quot;REF_FRAME_ALIGNED&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">ref_frame</span><span class="p">,</span> <span class="n">ReferenceFrame</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NADIR_POINTING&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;REF_FRAME_ALIGNED&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">ref_frame</span><span class="p">,</span> <span class="n">ReferenceFrame</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SC_BODY_FIXED&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_from_json_EULER_convention</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;EULER&quot;,&quot;eulerAngle1&quot;:400,&quot;eulerAngle2&quot;:1345.8, </span><span class="se">\</span>
<span class="s1">              &quot;eulerAngle3&quot;:-458,&quot;eulerSeq1&quot;:3, &quot;eulerSeq2&quot;:1, &quot;eulerSeq3&quot;:3}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">ref_frame</span><span class="p">,</span> <span class="n">ReferenceFrame</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SC_BODY_FIXED&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle1</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle2</span><span class="p">,</span> <span class="mf">265.8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_angle3</span><span class="p">,</span> <span class="mi">262</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">euler_seq3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># SIDE_LOOK convention</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;SIDE_LOOK&quot;,&quot;sideLookAngle&quot;:10}&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;referenceFrame&quot;</span><span class="p">],</span> <span class="s2">&quot;SC_BODY_FIXED&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;convention&quot;</span><span class="p">],</span> <span class="s2">&quot;EULER&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerAngle1&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerAngle2&quot;</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerAngle3&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerSeq1&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerSeq2&quot;</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerSeq3&quot;</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">])</span>
        <span class="c1"># XYZ convention</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;EARTH_CENTERED_INERTIAL&quot;, &quot;convention&quot;: &quot;XYZ&quot;,&quot;xRotation&quot;:-10,&quot;yRotation&quot;:-78.2,&quot;zRotation&quot;:-20.5}&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;referenceFrame&quot;</span><span class="p">],</span> <span class="s2">&quot;EARTH_CENTERED_INERTIAL&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;convention&quot;</span><span class="p">],</span> <span class="s2">&quot;EULER&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerAngle1&quot;</span><span class="p">],</span> <span class="mi">350</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerAngle2&quot;</span><span class="p">],</span> <span class="mf">281.8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerAngle3&quot;</span><span class="p">],</span> <span class="mf">339.5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerSeq1&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerSeq2&quot;</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerSeq3&quot;</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">])</span>
        <span class="c1"># REF_FRAME_ALIGNED convention</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SENSOR_BODY_FIXED&quot;, &quot;convention&quot;: &quot;REF_FRAME_ALIGNED&quot;, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;referenceFrame&quot;</span><span class="p">],</span> <span class="s2">&quot;SENSOR_BODY_FIXED&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;convention&quot;</span><span class="p">],</span> <span class="s2">&quot;EULER&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerAngle1&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerAngle2&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerAngle3&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerSeq1&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerSeq2&quot;</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerSeq3&quot;</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">],</span> <span class="s2">&quot;123&quot;</span><span class="p">)</span>
        <span class="c1"># EULER convention</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;EULER&quot;,&quot;eulerAngle1&quot;:400,&quot;eulerAngle2&quot;:1345.8, </span><span class="se">\</span>
<span class="s1">              &quot;eulerAngle3&quot;:-458,&quot;eulerSeq1&quot;:3, &quot;eulerSeq2&quot;:1, &quot;eulerSeq3&quot;:3, &quot;@id&quot;:123}&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;referenceFrame&quot;</span><span class="p">],</span> <span class="s2">&quot;SC_BODY_FIXED&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;convention&quot;</span><span class="p">],</span> <span class="s2">&quot;EULER&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerAngle1&quot;</span><span class="p">],</span> <span class="mi">40</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerAngle2&quot;</span><span class="p">],</span> <span class="mf">265.8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerAngle3&quot;</span><span class="p">],</span> <span class="mi">262</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerSeq1&quot;</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerSeq2&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;eulerSeq3&quot;</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">],</span> <span class="mi">123</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">test___eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># SIDE_LOOK convention</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;SIDE_LOOK&quot;,&quot;sideLookAngle&quot;:10}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;SIDE_LOOK&quot;,&quot;sideLookAngle&quot;:10}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;SIDE_LOOK&quot;,&quot;sideLookAngle&quot;:10}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;NADIR_POINTING&quot;, &quot;convention&quot;: &quot;SIDE_LOOK&quot;,&quot;sideLookAngle&quot;:10}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>

        <span class="c1"># XYZ convention</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;EARTH_CENTERED_INERTIAL&quot;, &quot;convention&quot;: &quot;XYZ&quot;,&quot;xRotation&quot;:-10,&quot;yRotation&quot;:-78.2,&quot;zRotation&quot;:-20.5, &quot;@id&quot;:123}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;EARTH_CENTERED_INERTIAL&quot;, &quot;convention&quot;: &quot;XYZ&quot;,&quot;xRotation&quot;:-10,&quot;yRotation&quot;:-78.2,&quot;zRotation&quot;:-20.5, &quot;@id&quot;:&quot;xyz&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span> <span class="c1"># @id parameter could be different, but the equality holds</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;EARTH_CENTERED_INERTIAL&quot;, &quot;convention&quot;: &quot;XYZ&quot;,&quot;xRotation&quot;:-10,&quot;yRotation&quot;:-78.2,&quot;zRotation&quot;:-20.5}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;EARTH_CENTERED_INERTIAL&quot;, &quot;convention&quot;: &quot;XYZ&quot;,&quot;xRotation&quot;: 10,&quot;yRotation&quot;:-78.2,&quot;zRotation&quot;:-20.5}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>

        <span class="c1"># REF_FRAME_ALIGNED convention</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SENSOR_BODY_FIXED&quot;, &quot;convention&quot;: &quot;REF_FRAME_ALIGNED&quot;, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SENSOR_BODY_FIXED&quot;, &quot;convention&quot;: &quot;REF_FRAME_ALIGNED&quot;, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SENSOR_BODY_FIXED&quot;, &quot;convention&quot;: &quot;REF_FRAME_ALIGNED&quot;, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;EARTH_CENTERED_INERTIAL&quot;, &quot;convention&quot;: &quot;REF_FRAME_ALIGNED&quot;, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>

        <span class="c1"># EULER convention</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;EULER&quot;,&quot;eulerAngle1&quot;:10,&quot;eulerAngle2&quot;:13.8, </span><span class="se">\</span>
<span class="s1">              &quot;eulerAngle3&quot;:-45,&quot;eulerSeq1&quot;:3, &quot;eulerSeq2&quot;:1, &quot;eulerSeq3&quot;:3}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;EULER&quot;,&quot;eulerAngle1&quot;:10,&quot;eulerAngle2&quot;:13.8, </span><span class="se">\</span>
<span class="s1">              &quot;eulerAngle3&quot;:-45,&quot;eulerSeq1&quot;:3, &quot;eulerSeq2&quot;:1, &quot;eulerSeq3&quot;:3, &quot;@id&quot;:123}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;EULER&quot;,&quot;eulerAngle1&quot;:10,&quot;eulerAngle2&quot;:13.8, </span><span class="se">\</span>
<span class="s1">              &quot;eulerAngle3&quot;:-45,&quot;eulerSeq1&quot;:3, &quot;eulerSeq2&quot;:1, &quot;eulerSeq3&quot;:3}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;EULER&quot;,&quot;eulerAngle1&quot;:400,&quot;eulerAngle2&quot;:1345.8, </span><span class="se">\</span>
<span class="s1">              &quot;eulerAngle3&quot;:-45,&quot;eulerSeq1&quot;:1, &quot;eulerSeq2&quot;:2, &quot;eulerSeq3&quot;:3, &quot;@id&quot;:123}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>
                
    <span class="k">def</span> <span class="nf">test___repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># _id = None</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;SC_BODY_FIXED&quot;, &quot;convention&quot;: &quot;EULER&quot;,&quot;eulerAngle1&quot;:400,&quot;eulerAngle2&quot;:20, </span><span class="se">\</span>
<span class="s1">              &quot;eulerAngle3&quot;:-458,&quot;eulerSeq1&quot;:3, &quot;eulerSeq2&quot;:1, &quot;eulerSeq3&quot;:3}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">(),</span> <span class="s2">&quot;Orientation(ref_frame=&#39;SC_BODY_FIXED&#39;,euler_angle1=40.0,euler_angle2=20.0,euler_angle3=262.0,euler_seq1=3,euler_seq2=1,euler_seq3=3,_id=None)&quot;</span><span class="p">)</span>
        <span class="c1"># _id = 123 (integer)</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;referenceFrame&quot;: &quot;NADIR_POINTING&quot;, &quot;convention&quot;: &quot;REF_FRAME_ALIGNED&quot;, &quot;@id&quot;: 123}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">(),</span> <span class="s2">&quot;Orientation(ref_frame=&#39;NADIR_POINTING&#39;,euler_angle1=0.0,euler_angle2=0.0,euler_angle3=0.0,euler_seq1=1,euler_seq2=2,euler_seq3=3,_id=123)&quot;</span><span class="p">)</span>
        <span class="c1"># _id = 123 (string)</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;convention&quot;: &quot;SIDE_LOOK&quot;,&quot;sideLookAngle&quot;:-380,&quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">(),</span> <span class="s2">&quot;Orientation(ref_frame=&#39;NADIR_POINTING&#39;,euler_angle1=0.0,euler_angle2=340.0,euler_angle3=0.0,euler_seq1=1,euler_seq2=2,euler_seq3=3,_id=&#39;123&#39;)&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestSphericalGeometry"><a class="viewcode-back" href="../tests.html#test_util.TestSphericalGeometry">[docs]</a><span class="k">class</span> <span class="nc">TestSphericalGeometry</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_from_json_custom_specs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Test for typical case</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;CUSTOM&quot;, &quot;customConeAnglesVector&quot;: [10,10,10,10,10] , &quot;customClockAnglesVector&quot;: [30,60,180,220,30]}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">CUSTOM</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">cone_angle_vec</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">,</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">30</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_height</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;Custom&quot;, &quot;customConeAnglesVector&quot;: [10], &quot;@id&quot;: 123}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">CUSTOM</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">cone_angle_vec</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_height</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;CusTOM&quot;, &quot;customConeAnglesVector&quot;: 10, &quot;@id&quot;: &quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">CUSTOM</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">cone_angle_vec</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_height</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;123&quot;</span><span class="p">)</span>

        <span class="c1"># test Exception is raised for invalid cone, clock angle inputs</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;shape&quot;: &quot;CUSTOM&quot;, &quot;customConeAnglesVector&quot;: [10] , &quot;customClockAnglesVector&quot;: [30]}&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;shape&quot;: &quot;CUSTOM&quot;, &quot;customConeAnglesVector&quot;: 10 , &quot;customClockAnglesVector&quot;: 30}&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;shape&quot;: &quot;CUSTOM&quot;, &quot;customConeAnglesVector&quot;: [10,10,100,10] , &quot;customClockAnglesVector&quot;: [30,60,180,220,30]}&#39;</span><span class="p">)</span> <span class="c1"># number of entires in the cone angle vector is different from that in the clock angle vector</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;shape&quot;: &quot;CUSTOM&quot;, &quot;customConeAnglesVector&quot;: [10,10,100] , &quot;customClockAnglesVector&quot;: [30,60,180]}&#39;</span><span class="p">)</span> <span class="c1"># last vertex not same as the first vertex</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;shape&quot;: &quot;CUSTOM&quot;, &quot;customConeAnglesVector&quot;: [10,20,10] , &quot;customClockAnglesVector&quot;: [30,20,30]}&#39;</span><span class="p">)</span> <span class="c1"># minimum number of vertices not satisfied.</span>

    <span class="k">def</span> <span class="nf">test_from_json_circular_specs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Test for typical case</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;CIRCULAR&quot;, &quot;diameter&quot;: 30.56}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">CIRCULAR</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">cone_angle_vec</span><span class="p">,</span> <span class="p">[</span><span class="mf">15.28</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">,</span> <span class="mf">30.56</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_height</span><span class="p">,</span> <span class="mf">30.56</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_width</span><span class="p">,</span> <span class="mf">30.56</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>        

        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;Circular&quot;, &quot;diameter&quot;: 15.4242, &quot;@id&quot;:123}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">CIRCULAR</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">cone_angle_vec</span><span class="p">,</span> <span class="p">[</span><span class="mf">7.7121</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">,</span> <span class="mf">15.4242</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_height</span><span class="p">,</span> <span class="mf">15.4242</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_width</span><span class="p">,</span> <span class="mf">15.4242</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;CirCuLar&quot;, &quot;diameter&quot;: 25, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">CIRCULAR</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">cone_angle_vec</span><span class="p">,</span> <span class="p">[</span><span class="mf">12.5</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_height</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_width</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;123&quot;</span><span class="p">)</span>
        <span class="c1"># Test for incomplete specification</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;shape&quot;: &quot;CIRCULAR&quot;}&#39;</span><span class="p">)</span>
        <span class="c1"># Test for full cone angle more than 180 deg</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;shape&quot;: &quot;CIRCULAR&quot;, &quot;diameter&quot;: 230}&#39;</span><span class="p">)</span>
        <span class="c1"># Test for full cone angle less than 0 deg</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;shape&quot;: &quot;CIRCULAR&quot;, &quot;diameter&quot;: -10}&#39;</span><span class="p">)</span>        

    <span class="k">def</span> <span class="nf">test_from_json_rectangular_specs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Test for typical cases</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 10 , &quot;angleWidth&quot;: 30}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">RECTANGULAR</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_almost_equal</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">cone_angle_vec</span><span class="p">,</span> <span class="p">[</span>
                         <span class="mf">15.79322415135941</span><span class="p">,</span> <span class="mf">15.79322415135941</span><span class="p">,</span> <span class="mf">15.79322415135941</span><span class="p">,</span> <span class="mf">15.79322415135941</span><span class="p">,</span> <span class="mf">15.79322415135941</span><span class="p">])</span>
        <span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_almost_equal</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">,</span> <span class="p">[</span>
                         <span class="mf">18.6768081421232</span><span class="p">,</span> <span class="mf">161.3231918578768</span><span class="p">,</span> <span class="mf">198.6768081421232</span><span class="p">,</span> <span class="mf">341.3231918578768</span><span class="p">,</span> <span class="mf">18.6768081421232</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_height</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_width</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

        <span class="c1"># Square FOV =&gt; Clock angle almost(?) 45 deg</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 15 , &quot;angleWidth&quot;: 15, &quot;@id&quot;: 123}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">RECTANGULAR</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_almost_equal</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">cone_angle_vec</span><span class="p">,</span> <span class="p">[</span>
                         <span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">])</span>
        <span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_almost_equal</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">,</span> <span class="p">[</span>
                         <span class="mf">45.246138033024906</span><span class="p">,</span> <span class="mf">134.75386196697508</span><span class="p">,</span> <span class="mf">225.24613803302492</span><span class="p">,</span> <span class="mf">314.7538619669751</span><span class="p">,</span> <span class="mf">45.246138033024906</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_height</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_width</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>

        <span class="c1"># angleWidth &gt; angleHeight</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 30 , &quot;angleWidth&quot;: 10}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">RECTANGULAR</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_almost_equal</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">cone_angle_vec</span><span class="p">,</span> <span class="p">[</span>
                         <span class="mf">15.79322415135941</span><span class="p">,</span> <span class="mf">15.79322415135941</span><span class="p">,</span> <span class="mf">15.79322415135941</span><span class="p">,</span> <span class="mf">15.79322415135941</span><span class="p">,</span> <span class="mf">15.79322415135941</span><span class="p">])</span>
        <span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_almost_equal</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">,</span> <span class="p">[</span>
                         <span class="mf">71.98186515628623</span><span class="p">,</span> <span class="mf">108.01813484371377</span><span class="p">,</span> <span class="mf">251.98186515628623</span><span class="p">,</span> <span class="mf">288.01813484371377</span><span class="p">,</span> <span class="mf">71.98186515628623</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_height</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_width</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

        <span class="c1"># Test a edge case when the along-track fov is very small.</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 0.1 , &quot;angleWidth&quot;: 50, &quot;@id&quot;: &quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">RECTANGULAR</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">cone_angle_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">180</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">180</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">360</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_height</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">angle_width</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;123&quot;</span><span class="p">)</span>

        <span class="c1"># Test case with incomplete specification</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 60 }&#39;</span><span class="p">)</span>
        <span class="c1"># Test for out-of-range specification</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 30 , &quot;angleWidth&quot;: 210}&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: -10 , &quot;angleWidth&quot;: 5}&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
                <span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: -1110 , &quot;angleWidth&quot;: 50}&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_get_rect_poly_specs_from_cone_clock_angles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="c1"># Square case</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 15 , &quot;angleWidth&quot;: 15}&#39;</span><span class="p">)</span>
        <span class="p">[</span><span class="n">angle_height</span><span class="p">,</span> <span class="n">angle_width</span><span class="p">]</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">get_rect_poly_specs_from_cone_clock_angles</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">cone_angle_vec</span><span class="p">,</span> <span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">angle_height</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">angle_width</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        
        <span class="c1"># Test edge case with small along-track fov</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 0.1 , &quot;angleWidth&quot;: 30}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SphericalGeometry</span><span class="p">)</span>
        <span class="p">[</span><span class="n">angle_height</span><span class="p">,</span> <span class="n">angle_width</span><span class="p">]</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">get_rect_poly_specs_from_cone_clock_angles</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">cone_angle_vec</span><span class="p">,</span> <span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">angle_height</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">angle_width</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;CUSTOM&quot;, &quot;customConeAnglesVector&quot;: [30,30,30,30,30] , &quot;customClockAnglesVector&quot;: [20,160,200,-20,20]}&#39;</span><span class="p">)</span>
        <span class="p">[</span><span class="n">angle_height</span><span class="p">,</span> <span class="n">angle_width</span><span class="p">]</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">get_rect_poly_specs_from_cone_clock_angles</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">cone_angle_vec</span><span class="p">,</span> <span class="n">o</span><span class="o">.</span><span class="n">clock_angle_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">angle_height</span><span class="p">,</span> <span class="mf">19.693103879668154</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">angle_width</span><span class="p">,</span> <span class="mf">56.96247656267892</span><span class="p">)</span>

        <span class="c1"># Check for cases when the input cone, clock do not correspond to a rectangular fov</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span><span class="o">.</span><span class="n">get_rect_poly_specs_from_cone_clock_angles</span><span class="p">([</span><span class="mi">20</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span><span class="o">.</span><span class="n">get_rect_poly_specs_from_cone_clock_angles</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">180</span><span class="p">,</span><span class="mi">220</span><span class="p">,</span><span class="mi">30</span><span class="p">])</span>
        <span class="c1"># slight tweaking of cone, clock angles corresponding to valid rectangular shape (15 deg x 15 deg) </span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span><span class="o">.</span><span class="n">get_rect_poly_specs_from_cone_clock_angles</span><span class="p">([</span><span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">],</span>
                                                         <span class="p">[</span><span class="mf">45.246138033024906</span><span class="p">,</span> <span class="mf">134.75386196697508</span><span class="p">,</span> <span class="mf">125.24613803302492</span><span class="p">,</span> <span class="mf">314.7538619669751</span><span class="p">,</span> <span class="mf">45.246138033024906</span><span class="p">])</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span><span class="o">.</span><span class="n">get_rect_poly_specs_from_cone_clock_angles</span><span class="p">([</span><span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">],</span> 
                                                         <span class="p">[</span><span class="mf">45.246138033024906</span><span class="p">,</span> <span class="mf">134.75386196697508</span><span class="p">,</span> <span class="mf">225.24613803302492</span><span class="p">,</span> <span class="mf">314.7538619669751</span><span class="p">,</span> <span class="mf">45.246138033024906</span><span class="p">])</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span><span class="o">.</span><span class="n">get_rect_poly_specs_from_cone_clock_angles</span><span class="p">([</span><span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">20.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">,</span> <span class="mf">10.591411134810208</span><span class="p">],</span> 
                                                         <span class="p">[</span><span class="mf">45.246138033024906</span><span class="p">,</span> <span class="mf">134.75386196697508</span><span class="p">,</span> <span class="mf">225.24613803302492</span><span class="p">,</span> <span class="mf">314.7538619669751</span><span class="p">,</span> <span class="mf">45.246138033024906</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">test_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># custom shape</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;CUSTOM&quot;, &quot;customConeAnglesVector&quot;: [10,10,10,10,10] , &quot;customClockAnglesVector&quot;: [30,60,180,220,30]}&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;shape&quot;</span><span class="p">],</span> <span class="s2">&quot;CUSTOM&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;customConeAnglesVector&quot;</span><span class="p">],</span> <span class="s2">&quot;[10.0,10.0,10.0,10.0,10.0]&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;customClockAnglesVector&quot;</span><span class="p">],</span> <span class="s2">&quot;[30.0,60.0,180.0,220.0,30.0]&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">])</span>
        <span class="c1"># circular shape</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;CIRCULAR&quot;, &quot;diameter&quot;: 30, &quot;@id&quot;: 123}&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;shape&quot;</span><span class="p">],</span> <span class="s2">&quot;CIRCULAR&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;diameter&quot;</span><span class="p">],</span> <span class="mf">30.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">],</span> <span class="mi">123</span><span class="p">)</span>
        
        <span class="c1"># rectangular shape</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 10 , &quot;angleWidth&quot;: 30, &quot;@id&quot;: &quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;shape&quot;</span><span class="p">],</span> <span class="s2">&quot;RECTANGULAR&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;angleHeight&quot;</span><span class="p">],</span> <span class="mf">10.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;angleWidth&quot;</span><span class="p">],</span> <span class="mf">30.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">],</span> <span class="s2">&quot;123&quot;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">test___eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># custom shape</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;CUSTOM&quot;, &quot;customConeAnglesVector&quot;: [10,10,10,10,10] , &quot;customClockAnglesVector&quot;: [30,60,180,220,30]}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;CUSTOM&quot;, &quot;customConeAnglesVector&quot;: [10,10,10,10,10] , &quot;customClockAnglesVector&quot;: [30,60,180,220,30]}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>

        <span class="n">o1</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;CUSTOM&quot;, &quot;customConeAnglesVector&quot;: [20,10,10,10,20] , &quot;customClockAnglesVector&quot;: [30,60,180,220,30]}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;shape&quot;: &quot;CUSTOM&quot;, &quot;customConeAnglesVector&quot;: [10,10,10,10,10] , &quot;customClockAnglesVector&quot;: [30,60,180,220,30]}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>

        <span class="c1"># circular shape</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;shape&quot;: &quot;CIRCULAR&quot;, &quot;diameter&quot;: 30, &quot;@id&quot;: 123}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;shape&quot;: &quot;CIRCULAR&quot;, &quot;diameter&quot;: 30, &quot;@id&quot;: 123}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>
        <span class="c1"># @id may be different, but still satisfies the equality criteria</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;shape&quot;: &quot;CIRCULAR&quot;, &quot;diameter&quot;: 30, &quot;@id&quot;: 245}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;shape&quot;: &quot;CIRCULAR&quot;, &quot;diameter&quot;: 30, &quot;@id&quot;: 123}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>
        
        <span class="n">o1</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;shape&quot;: &quot;CIRCULAR&quot;, &quot;diameter&quot;: 30, &quot;@id&quot;: 123}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;shape&quot;: &quot;CIRCULAR&quot;, &quot;diameter&quot;: 20, &quot;@id&quot;: 123}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>

        <span class="c1"># rectangular shape</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 10 , &quot;angleWidth&quot;: 30, &quot;@id&quot;: &quot;xyz&quot;}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 10 , &quot;angleWidth&quot;: 30, &quot;@id&quot;: &quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>

        <span class="n">o1</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 10 , &quot;angleWidth&quot;: 30}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 10 , &quot;angleWidth&quot;: 40}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>

        <span class="c1"># test equality with object of another type</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;shape&quot;: &quot;RECTANGULAR&quot;, &quot;angleHeight&quot;: 10 , &quot;angleWidth&quot;: 30}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestViewGeometry"><a class="viewcode-back" href="../tests.html#test_util.TestViewGeometry">[docs]</a><span class="k">class</span> <span class="nc">TestViewGeometry</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span> <span class="c1">#TODO</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="TestManeuver"><a class="viewcode-back" href="../tests.html#test_util.TestManeuver">[docs]</a><span class="k">class</span> <span class="nc">TestManeuver</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
  
    <span class="k">def</span> <span class="nf">test_from_json_CIRCULAR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;CIRCULAR&quot;, &quot;diameter&quot;:10.3}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">Maneuver</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">maneuver_type</span><span class="p">,</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">CIRCULAR</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">,</span> <span class="mf">10.3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">A_roll_min</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">A_roll_max</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">B_roll_min</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">B_roll_max</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;circular&quot;, &quot;diameter&quot;:10, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">Maneuver</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">maneuver_type</span><span class="p">,</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">CIRCULAR</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">A_roll_min</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">A_roll_max</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">B_roll_min</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">B_roll_max</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;123&quot;</span><span class="p">)</span>
        
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;CIRCULAR&quot;}&#39;</span><span class="p">)</span>
        
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;CIRCULAR&quot;, &quot;diameter&quot;:-10}&#39;</span><span class="p">)</span>
        
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;CIRCULAR&quot;, &quot;diameter&quot;:190}&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;CIRC&quot;, &quot;diameter&quot;:10}&#39;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">test_from_json_SINGLE_ROLL_ONLY</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;SINGLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:0, &quot;A_rollMax&quot;: 30}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">Maneuver</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">maneuver_type</span><span class="p">,</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">SINGLE_ROLL_ONLY</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">A_roll_min</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">A_roll_max</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">B_roll_min</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">B_roll_max</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;SINGLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:-10, &quot;A_rollMax&quot;: 0, &quot;@id&quot;:123}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">Maneuver</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">maneuver_type</span><span class="p">,</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">SINGLE_ROLL_ONLY</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">A_roll_min</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">A_roll_max</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">B_roll_min</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">B_roll_max</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;SINGLE_ROLL_ONLY&quot;}&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;SINGLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:10}&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;SINGLE_ROLL_ONLY&quot;, &quot;A_rollMax&quot;: 0}&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;SINGLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:190, &quot;A_rollMax&quot;: 200}&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;SINGLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:0, &quot;A_rollMax&quot;: -190}&#39;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">test_from_json_DOUBLE_ROLL_ONLY</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:0, &quot;A_rollMax&quot;: 30, &quot;B_rollMin&quot;:-30, &quot;B_rollMax&quot;: 0}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">Maneuver</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">maneuver_type</span><span class="p">,</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">DOUBLE_ROLL_ONLY</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">A_roll_min</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">A_roll_max</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">B_roll_min</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">B_roll_max</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:-10, &quot;A_rollMax&quot;: 0, &quot;B_rollMin&quot;:10, &quot;B_rollMax&quot;: 60, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">Maneuver</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">maneuver_type</span><span class="p">,</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">DOUBLE_ROLL_ONLY</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">A_roll_min</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">A_roll_max</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">B_roll_min</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">B_roll_max</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;123&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;}&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:10, &quot;A_rollMax&quot;: 50}&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;, &quot;B_rollMin&quot;:10, &quot;B_rollMax&quot;: 60}&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:30, &quot;A_rollMax&quot;: 0, &quot;B_rollMin&quot;:-30, &quot;B_rollMax&quot;: 0}&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:0, &quot;A_rollMax&quot;: 30, &quot;B_rollMin&quot;:-30, &quot;B_rollMax&quot;: -60}&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        
        <span class="c1"># CIRCULAR</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;circular&quot;, &quot;diameter&quot;:10, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;maneuverType&quot;</span><span class="p">],</span> <span class="s2">&quot;CIRCULAR&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;diameter&quot;</span><span class="p">],</span> <span class="mf">10.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">],</span> <span class="s2">&quot;123&quot;</span><span class="p">)</span>

        <span class="c1"># SINGLE_ROLL_ONLY</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;maneuverType&quot;: &quot;single_Roll_only&quot;, &quot;A_rollMin&quot;:0, &quot;A_rollMax&quot;: 30, &quot;@id&quot;: 123}&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;maneuverType&quot;</span><span class="p">],</span> <span class="s2">&quot;SINGLE_ROLL_ONLY&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;A_rollMin&quot;</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;A_rollMax&quot;</span><span class="p">],</span> <span class="mf">30.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">],</span> <span class="mi">123</span><span class="p">)</span>

        <span class="c1"># DOUBLE_ROLL_ONLY</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:-10, &quot;A_rollMax&quot;: 0, &quot;B_rollMin&quot;:10, &quot;B_rollMax&quot;: 60}&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;maneuverType&quot;</span><span class="p">],</span> <span class="s2">&quot;DOUBLE_ROLL_ONLY&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;A_rollMin&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mf">10.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;A_rollMax&quot;</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;B_rollMin&quot;</span><span class="p">],</span> <span class="mf">10.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;B_rollMax&quot;</span><span class="p">],</span> <span class="mf">60.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">])</span>
    
    <span class="k">def</span> <span class="nf">test___eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># CIRCULAR</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;circular&quot;, &quot;diameter&quot;:10, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;circular&quot;, &quot;diameter&quot;:10, &quot;@id&quot;:&quot;abc&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;circular&quot;, &quot;diameter&quot;:20, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;circular&quot;, &quot;diameter&quot;:10, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>

        <span class="c1"># SINGLE_ROLL_ONLY</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;maneuverType&quot;: &quot;single_Roll_only&quot;, &quot;A_rollMin&quot;:0, &quot;A_rollMax&quot;: 30}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;maneuverType&quot;: &quot;single_Roll_only&quot;, &quot;A_rollMin&quot;:0, &quot;A_rollMax&quot;: 30}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;maneuverType&quot;: &quot;single_Roll_only&quot;, &quot;A_rollMin&quot;:0, &quot;A_rollMax&quot;: 30}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;maneuverType&quot;: &quot;single_Roll_only&quot;, &quot;A_rollMin&quot;:0, &quot;A_rollMax&quot;: 20.1}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>

        <span class="c1"># DOUBLE_ROLL_ONLY</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:-10, &quot;A_rollMax&quot;: 0, &quot;B_rollMin&quot;:10, &quot;B_rollMax&quot;: 60}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:-10, &quot;A_rollMax&quot;: 0, &quot;B_rollMin&quot;:10, &quot;B_rollMax&quot;: 60}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:-10, &quot;A_rollMax&quot;: 10, &quot;B_rollMin&quot;:10, &quot;B_rollMax&quot;: 60}&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:-10, &quot;A_rollMax&quot;: 0, &quot;B_rollMin&quot;:10, &quot;B_rollMax&quot;: 60}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_calc_field_of_regard</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># CIRCULAR Maneuver</span>
        <span class="c1"># circular input fov</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;circular&quot;, &quot;diameter&quot;:10, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">calc_field_of_regard</span><span class="p">(</span><span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;Circular&quot;</span><span class="p">,</span> <span class="s2">&quot;diameter&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ViewGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;orientation&quot;</span><span class="p">:{</span><span class="s2">&quot;referenceFrame&quot;</span><span class="p">:</span><span class="s2">&quot;Nadir_pointing&quot;</span><span class="p">,</span> <span class="s2">&quot;convention&quot;</span><span class="p">:</span><span class="s2">&quot;REF_FRAME_ALIGNED&quot;</span><span class="p">},</span> 
                                                       <span class="s2">&quot;sphericalGeometry&quot;</span><span class="p">:{</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;Circular&quot;</span><span class="p">,</span> <span class="s2">&quot;diameter&quot;</span><span class="p">:</span><span class="mi">15</span><span class="p">}}))</span>

        <span class="c1"># rectangular input fov</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;circular&quot;, &quot;diameter&quot;:10, &quot;@id&quot;:&quot;123&quot;}&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">calc_field_of_regard</span><span class="p">(</span><span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;rectangular&quot;</span><span class="p">,</span> <span class="s2">&quot;angleWidth&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;angleHeight&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">orien</span><span class="p">,</span> <span class="n">Orientation</span><span class="p">(</span><span class="n">ref_frame</span><span class="o">=</span><span class="s2">&quot;Nadir_pointing&quot;</span><span class="p">))</span>
        <span class="n">proxy_fov_geom</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sph_geom</span>
        <span class="n">valid_fov_geom</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;Circular&quot;</span><span class="p">,</span> <span class="s2">&quot;diameter&quot;</span><span class="p">:</span><span class="mf">17.069945578430072</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">proxy_fov_geom</span><span class="o">.</span><span class="n">diameter</span><span class="p">,</span> <span class="n">valid_fov_geom</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>
        
        <span class="c1"># SINGLE_ROLL_ONLY</span>
        <span class="c1"># circular input fov</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;single_Roll_only&quot;, &quot;A_rollMin&quot;:10, &quot;A_rollMax&quot;: 30}&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">calc_field_of_regard</span><span class="p">(</span><span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;Circular&quot;</span><span class="p">,</span> <span class="s2">&quot;diameter&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ViewGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;orientation&quot;</span><span class="p">:{</span><span class="s2">&quot;referenceFrame&quot;</span><span class="p">:</span><span class="s2">&quot;Nadir_pointing&quot;</span><span class="p">,</span> <span class="s2">&quot;convention&quot;</span><span class="p">:</span> <span class="s2">&quot;SIDE_LOOK&quot;</span><span class="p">,</span> <span class="s2">&quot;sideLookAngle&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">},</span> 
                                                       <span class="s2">&quot;sphericalGeometry&quot;</span><span class="p">:{</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;rectangular&quot;</span><span class="p">,</span> <span class="s2">&quot;angleWidth&quot;</span><span class="p">:</span><span class="mi">25</span><span class="p">,</span> <span class="s2">&quot;angleHeight&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">}}))</span>

        <span class="c1"># rectangular input fov</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;single_Roll_only&quot;, &quot;A_rollMin&quot;:10, &quot;A_rollMax&quot;: 30}&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">calc_field_of_regard</span><span class="p">(</span><span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;rectangular&quot;</span><span class="p">,</span> <span class="s2">&quot;angleWidth&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;angleHeight&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">orien</span><span class="p">,</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;referenceFrame&quot;</span><span class="p">:</span><span class="s2">&quot;Nadir_pointing&quot;</span><span class="p">,</span> <span class="s2">&quot;convention&quot;</span><span class="p">:</span> <span class="s2">&quot;SIDE_LOOK&quot;</span><span class="p">,</span> <span class="s2">&quot;sideLookAngle&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}))</span>
        <span class="n">proxy_fov_geom</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sph_geom</span>
        <span class="n">valid_fov_geom</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;rectangular&quot;</span><span class="p">,</span> <span class="s2">&quot;angleWidth&quot;</span><span class="p">:</span><span class="mi">25</span><span class="p">,</span> <span class="s2">&quot;angleHeight&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">proxy_fov_geom</span><span class="o">.</span><span class="n">angle_width</span><span class="p">,</span>  <span class="n">valid_fov_geom</span><span class="o">.</span><span class="n">angle_width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">proxy_fov_geom</span><span class="o">.</span><span class="n">angle_height</span><span class="p">,</span>  <span class="n">valid_fov_geom</span><span class="o">.</span><span class="n">angle_height</span><span class="p">)</span>

        <span class="c1"># DOUBLE_ROLL_ONLY</span>
        <span class="c1"># circular input fov</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:-10, &quot;A_rollMax&quot;: 0, &quot;B_rollMin&quot;:10, &quot;B_rollMax&quot;: 60}&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">calc_field_of_regard</span><span class="p">(</span><span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;Circular&quot;</span><span class="p">,</span> <span class="s2">&quot;diameter&quot;</span><span class="p">:</span><span class="mf">7.5</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ViewGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;orientation&quot;</span><span class="p">:{</span><span class="s2">&quot;referenceFrame&quot;</span><span class="p">:</span><span class="s2">&quot;Nadir_pointing&quot;</span><span class="p">,</span> <span class="s2">&quot;convention&quot;</span><span class="p">:</span> <span class="s2">&quot;SIDE_LOOK&quot;</span><span class="p">,</span> <span class="s2">&quot;sideLookAngle&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">5</span><span class="p">},</span> 
                                                       <span class="s2">&quot;sphericalGeometry&quot;</span><span class="p">:{</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;rectangular&quot;</span><span class="p">,</span> <span class="s2">&quot;angleWidth&quot;</span><span class="p">:</span><span class="mf">17.5</span><span class="p">,</span> <span class="s2">&quot;angleHeight&quot;</span><span class="p">:</span><span class="mf">7.5</span><span class="p">}}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ViewGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;orientation&quot;</span><span class="p">:{</span><span class="s2">&quot;referenceFrame&quot;</span><span class="p">:</span><span class="s2">&quot;Nadir_pointing&quot;</span><span class="p">,</span> <span class="s2">&quot;convention&quot;</span><span class="p">:</span> <span class="s2">&quot;SIDE_LOOK&quot;</span><span class="p">,</span> <span class="s2">&quot;sideLookAngle&quot;</span><span class="p">:</span> <span class="mi">35</span><span class="p">},</span> 
                                                       <span class="s2">&quot;sphericalGeometry&quot;</span><span class="p">:{</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;rectangular&quot;</span><span class="p">,</span> <span class="s2">&quot;angleWidth&quot;</span><span class="p">:</span><span class="mf">57.5</span><span class="p">,</span> <span class="s2">&quot;angleHeight&quot;</span><span class="p">:</span><span class="mf">7.5</span><span class="p">}}))</span>

        <span class="c1"># rectangular input fov</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">Maneuver</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;maneuverType&quot;: &quot;DOUBLE_ROLL_ONLY&quot;, &quot;A_rollMin&quot;:-10, &quot;A_rollMax&quot;: 0, &quot;B_rollMin&quot;:10, &quot;B_rollMax&quot;: 60}&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">calc_field_of_regard</span><span class="p">(</span><span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;rectangular&quot;</span><span class="p">,</span> <span class="s2">&quot;angleWidth&quot;</span><span class="p">:</span><span class="mf">7.5</span><span class="p">,</span> <span class="s2">&quot;angleHeight&quot;</span><span class="p">:</span><span class="mf">7.5</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">orien</span><span class="p">,</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;referenceFrame&quot;</span><span class="p">:</span><span class="s2">&quot;Nadir_pointing&quot;</span><span class="p">,</span> <span class="s2">&quot;convention&quot;</span><span class="p">:</span> <span class="s2">&quot;SIDE_LOOK&quot;</span><span class="p">,</span> <span class="s2">&quot;sideLookAngle&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">5</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">orien</span><span class="p">,</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;referenceFrame&quot;</span><span class="p">:</span><span class="s2">&quot;Nadir_pointing&quot;</span><span class="p">,</span> <span class="s2">&quot;convention&quot;</span><span class="p">:</span> <span class="s2">&quot;SIDE_LOOK&quot;</span><span class="p">,</span> <span class="s2">&quot;sideLookAngle&quot;</span><span class="p">:</span> <span class="mi">35</span><span class="p">}))</span>
        <span class="n">proxy_fov_geom</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sph_geom</span>
        <span class="n">valid_fov_geom</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;rectangular&quot;</span><span class="p">,</span> <span class="s2">&quot;angleWidth&quot;</span><span class="p">:</span><span class="mf">17.5</span><span class="p">,</span> <span class="s2">&quot;angleHeight&quot;</span><span class="p">:</span><span class="mf">7.5</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">proxy_fov_geom</span><span class="o">.</span><span class="n">angle_width</span><span class="p">,</span>  <span class="n">valid_fov_geom</span><span class="o">.</span><span class="n">angle_width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">proxy_fov_geom</span><span class="o">.</span><span class="n">angle_height</span><span class="p">,</span>  <span class="n">valid_fov_geom</span><span class="o">.</span><span class="n">angle_height</span><span class="p">)</span>
        <span class="n">proxy_fov_geom</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sph_geom</span>
        <span class="n">valid_fov_geom</span> <span class="o">=</span> <span class="n">SphericalGeometry</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span><span class="s2">&quot;rectangular&quot;</span><span class="p">,</span> <span class="s2">&quot;angleWidth&quot;</span><span class="p">:</span><span class="mf">57.5</span><span class="p">,</span> <span class="s2">&quot;angleHeight&quot;</span><span class="p">:</span><span class="mf">7.5</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">proxy_fov_geom</span><span class="o">.</span><span class="n">angle_width</span><span class="p">,</span>  <span class="n">valid_fov_geom</span><span class="o">.</span><span class="n">angle_width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">proxy_fov_geom</span><span class="o">.</span><span class="n">angle_height</span><span class="p">,</span>  <span class="n">valid_fov_geom</span><span class="o">.</span><span class="n">angle_height</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestSyntheticDataConfiguration"><a class="viewcode-back" href="../tests.html#test_util.TestSyntheticDataConfiguration">[docs]</a><span class="k">class</span> <span class="nc">TestSyntheticDataConfiguration</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_from_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39; {&quot;sourceFilePaths&quot;: [ &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f001.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f002.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f003.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f004.nc&quot;], </span><span class="se">\</span>
<span class="s1">                                                    &quot;geophysicalVar&quot;: &quot;TMP_P0_L1_GLL0&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;interpolMethod&quot;: &quot;SCIPY_LINEAR&quot; }&#39;</span>
                                                <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SyntheticDataConfiguration</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">sourceFilePaths</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">sourceFilePaths</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">sourceFilePaths</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f001.nc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">sourceFilePaths</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f002.nc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">sourceFilePaths</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f003.nc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">sourceFilePaths</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f004.nc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">geophysicalVar</span><span class="p">,</span> <span class="s2">&quot;TMP_P0_L1_GLL0&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">interpolMethod</span><span class="p">,</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">InterpolationMethod</span><span class="o">.</span><span class="n">SCIPY_LINEAR</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
        <span class="c1"># only 1 source file </span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39; {&quot;sourceFilePaths&quot;: [ &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;], </span><span class="se">\</span>
<span class="s1">                                                    &quot;geophysicalVar&quot;: &quot;TMP_P0_L1_GLL0&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;interpolMethod&quot;: &quot;METPY_LINEAR&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;@id&quot;: 123 }&#39;</span>
                                                <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SyntheticDataConfiguration</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">sourceFilePaths</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">sourceFilePaths</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">geophysicalVar</span><span class="p">,</span> <span class="s2">&quot;TMP_P0_L1_GLL0&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">interpolMethod</span><span class="p">,</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">InterpolationMethod</span><span class="o">.</span><span class="n">METPY_LINEAR</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
        <span class="c1"># only 1 source file (not in a list)</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39; {&quot;sourceFilePaths&quot;: &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;geophysicalVar&quot;: &quot;TMP_P0_L1_GLL0&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;interpolMethod&quot;: &quot;METPY_LINEAR&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;@id&quot;: &quot;123&quot; }&#39;</span>
                                                <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">SyntheticDataConfiguration</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">sourceFilePaths</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">sourceFilePaths</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">geophysicalVar</span><span class="p">,</span> <span class="s2">&quot;TMP_P0_L1_GLL0&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">interpolMethod</span><span class="p">,</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">InterpolationMethod</span><span class="o">.</span><span class="n">METPY_LINEAR</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="s2">&quot;123&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        
        <span class="n">o</span> <span class="o">=</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39; {&quot;sourceFilePaths&quot;: [ &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f001.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f002.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f003.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f004.nc&quot;], </span><span class="se">\</span>
<span class="s1">                                                    &quot;geophysicalVar&quot;: &quot;TMP_P0_L1_GLL0&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;interpolMethod&quot;: &quot;SCIPY_LINEAR&quot; }&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;sourceFilePaths&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;</span><span class="p">,</span> \
                                                <span class="s2">&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f001.nc&quot;</span><span class="p">,</span> \
                                                <span class="s2">&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f002.nc&quot;</span><span class="p">,</span> \
                                                <span class="s2">&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f003.nc&quot;</span><span class="p">,</span> \
                                                <span class="s2">&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f004.nc&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;geophysicalVar&quot;</span><span class="p">],</span> <span class="s2">&quot;TMP_P0_L1_GLL0&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;interpolMethod&quot;</span><span class="p">],</span> <span class="s2">&quot;SCIPY_LINEAR&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">])</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39; {&quot;sourceFilePaths&quot;: &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;geophysicalVar&quot;: &quot;TMP_P0_L1_GLL0&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;interpolMethod&quot;: &quot;METPY_LINEAR&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;@id&quot;: &quot;123&quot; }&#39;</span>
                                                <span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;sourceFilePaths&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;geophysicalVar&quot;</span><span class="p">],</span> <span class="s2">&quot;TMP_P0_L1_GLL0&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;interpolMethod&quot;</span><span class="p">],</span> <span class="s2">&quot;METPY_LINEAR&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">],</span> <span class="s2">&quot;123&quot;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">test_get_interpolator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39; {&quot;interpolMethod&quot;: &quot;SCIPY_LINEAR&quot; }&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">get_interpolator</span><span class="p">(),</span> <span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">)</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39; {&quot;interpolMethod&quot;: &quot;METPY_LINEAR&quot; }&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">get_interpolator</span><span class="p">(),</span> <span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">metpy_linear</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">test___eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">o1</span> <span class="o">=</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39; {&quot;sourceFilePaths&quot;: [ &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f001.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f002.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f003.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f004.nc&quot;], </span><span class="se">\</span>
<span class="s1">                                                    &quot;geophysicalVar&quot;: &quot;TMP_P0_L1_GLL0&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;interpolMethod&quot;: &quot;SCIPY_LINEAR&quot; }&#39;</span><span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39; {&quot;sourceFilePaths&quot;: [ &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f001.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f002.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f003.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                                         &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f004.nc&quot;], </span><span class="se">\</span>
<span class="s1">                                                    &quot;geophysicalVar&quot;: &quot;TMP_P0_L1_GLL0&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;interpolMethod&quot;: &quot;SCIPY_LINEAR&quot; }&#39;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>

        <span class="n">o1</span> <span class="o">=</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39; {&quot;sourceFilePaths&quot;: [ &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;], </span><span class="se">\</span>
<span class="s1">                                                    &quot;geophysicalVar&quot;: &quot;TMP_P0_L1_GLL0&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;interpolMethod&quot;: &quot;METPY_LINEAR&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;@id&quot;: 123 }&#39;</span>
                                                <span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39; {&quot;sourceFilePaths&quot;: &quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;geophysicalVar&quot;: &quot;TMP_P0_L1_GLL0&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;interpolMethod&quot;: &quot;METPY_LINEAR&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;@id&quot;: &quot;abc&quot; }&#39;</span>
                                                <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span>

        <span class="n">o1</span> <span class="o">=</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39; {&quot;sourceFilePaths&quot;: [&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;], </span><span class="se">\</span>
<span class="s1">                                                    &quot;geophysicalVar&quot;: &quot;TMP_P0_L1_GLL0&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;interpolMethod&quot;: &quot;SCIPY_LINEAR&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;@id&quot;: 123 }&#39;</span>
                                                <span class="p">)</span>
        <span class="n">o2</span> <span class="o">=</span> <span class="n">SyntheticDataConfiguration</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39; {&quot;sourceFilePaths&quot;: [&quot;C:/workspace/gfs_forecast_data/gfs.t12z.pgrb2.0p25.f000.nc&quot;], </span><span class="se">\</span>
<span class="s1">                                                    &quot;geophysicalVar&quot;: &quot;TMP_P0_L1_GLL0&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;interpolMethod&quot;: &quot;METPY_LINEAR&quot;, </span><span class="se">\</span>
<span class="s1">                                                    &quot;@id&quot;: 123 }&#39;</span>
                                                <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">o1</span><span class="o">==</span><span class="n">o2</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestSyntheticDataInterpolator"><a class="viewcode-back" href="../tests.html#test_util.TestSyntheticDataInterpolator">[docs]</a><span class="k">class</span> <span class="nc">TestSyntheticDataInterpolator</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="nf">test_scipy_linear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
        <span class="n">lons</span><span class="p">,</span> <span class="n">lats</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                        
        <span class="c1"># uniform field        </span>
        <span class="n">var_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">lons</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">lats</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">0</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">pixel_center_pos</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">}]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">4</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># sine field</span>
        <span class="n">var_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">lons</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">lats</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">pixel_center_pos</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.5</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">1.5</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">3</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.5</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">4</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">1.5</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">0</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>

    
    <span class="k">def</span> <span class="nf">test_metpy_linear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
        <span class="n">lons</span><span class="p">,</span> <span class="n">lats</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">var_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">lons</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">lats</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">0</span> <span class="o">+</span> <span class="mi">1</span>
                
        <span class="c1"># uniform field   </span>
        <span class="n">var_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">lons</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">lats</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">0</span> <span class="o">+</span> <span class="mi">1</span>     
        <span class="n">pixel_center_pos</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">}]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">metpy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">metpy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">metpy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">metpy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">metpy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">4</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># sine field</span>
        <span class="n">var_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">lons</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">lats</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">pixel_center_pos</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;lon[deg]&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="s2">&quot;lat[deg]&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.5</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">1.5</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">3</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.5</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">SyntheticDataInterpolator</span><span class="o">.</span><span class="n">scipy_linear</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">lats</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">var_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">pixel_center_pos</span><span class="p">)[</span><span class="mi">4</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">1.5</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">0</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span></div>

<div class="viewcode-block" id="TestConstants"><a class="viewcode-back" href="../tests.html#test_util.TestConstants">[docs]</a><span class="k">class</span> <span class="nc">TestConstants</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_radiusOfEarthInKM</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">Constants</span><span class="o">.</span><span class="n">radiusOfEarthInKM</span><span class="p">,</span> <span class="mf">6378.137</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_speedOfLight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">Constants</span><span class="o">.</span><span class="n">speedOfLight</span><span class="p">,</span> <span class="mi">299792458</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_Boltzmann</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">Constants</span><span class="o">.</span><span class="n">Boltzmann</span><span class="p">,</span> <span class="mf">1.380649e-23</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_angularSpeedOfEarthInRadPerSec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
            <span class="n">Constants</span><span class="o">.</span><span class="n">angularSpeedOfEarthInRadPerSec</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">86400.0</span><span class="p">,</span> <span class="n">places</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_Planck</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">Constants</span><span class="o">.</span><span class="n">Planck</span><span class="p">,</span> <span class="mf">6.62607015e-34</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_SunBlackBodyTemperature</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">Constants</span><span class="o">.</span><span class="n">SunBlackBodyTemperature</span><span class="p">,</span> <span class="mi">6000</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestMathUtilityFunctions"><a class="viewcode-back" href="../tests.html#test_util.TestMathUtilityFunctions">[docs]</a><span class="k">class</span> <span class="nc">TestMathUtilityFunctions</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_normalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># Test if returned vector has unit magnitude</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span>
            <span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">normalize</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">])),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span>
            <span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">normalize</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">65</span><span class="p">])),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span>
            <span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">normalize</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span>
            <span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">normalize</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">42343</span><span class="p">])),</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">normalize</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">test_angle_between_vectors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># Test trivial cases</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">angle_between_vectors</span><span class="p">(</span>
            <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">angle_between_vectors</span><span class="p">(</span>
            <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">5000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">angle_between_vectors</span><span class="p">(</span>
            <span class="p">[</span><span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="o">-</span><span class="mi">45</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">angle_between_vectors</span><span class="p">(</span>
            <span class="p">[</span><span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">],</span> <span class="p">[</span><span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">]),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">angle_between_vectors</span><span class="p">(</span>
            <span class="p">[</span><span class="mf">.5</span><span class="p">,</span> <span class="mf">.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestGeoUtilityFunctions"><a class="viewcode-back" href="../tests.html#test_util.TestGeoUtilityFunctions">[docs]</a><span class="k">class</span> <span class="nc">TestGeoUtilityFunctions</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestGeoUtilityFunctions.compute_satellite_footprint_speed_with_EF_vectors"><a class="viewcode-back" href="../tests.html#test_util.TestGeoUtilityFunctions.compute_satellite_footprint_speed_with_EF_vectors">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">compute_satellite_footprint_speed_with_EF_vectors</span><span class="p">(</span><span class="n">_gmat_r_ef</span><span class="p">,</span> <span class="n">_gmat_v_ef</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; GMAT does not directly output the ground-speed. Compute using EF position vector and EF velocity vector available from GMAT. </span>
<span class="sd">            In this case no compensation needs to be performed for Earth-rotation (unlike in the case of instrupy.GeoUtilityFunctions.compute_satellite_footprint_speed(r,v) </span>
<span class="sd">            where the input vectors (r,v) are in ECI frame) since the (r,v) vectors are taken in EF frame. </span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_gmat_omega</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span>
            <span class="n">_gmat_r_ef</span><span class="p">,</span> <span class="n">_gmat_v_ef</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">_gmat_r_ef</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">_gmat_fp_speed</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">_gmat_omega</span><span class="p">)</span><span class="o">*</span><span class="mi">6378100</span>
        <span class="k">return</span> <span class="n">_gmat_fp_speed</span></div>

    <span class="k">def</span> <span class="nf">test_compute_satellite_footprint_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># Validating using &#39;GMAT R2018a 64bit&#39; as external reference.</span>
        <span class="c1"># Test 1 (low inclination orbit)</span>
        <span class="n">_gmat_r_eci</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1300</span><span class="p">]</span>
        <span class="n">_gmat_v_eci</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">7.35</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">_gmat_r_ef</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1272.929354832122</span><span class="p">,</span> <span class="mf">6984.992046762509</span><span class="p">,</span> <span class="mf">1299.821897134824</span><span class="p">]</span>
        <span class="n">_gmat_v_ef</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">6.721571319063451</span><span class="p">,</span>
                      <span class="mf">1.224987254217343</span><span class="p">,</span> <span class="mf">0.9997979087785365</span><span class="p">]</span>
        <span class="n">_gmat_fp_speed</span> <span class="o">=</span> <span class="n">TestGeoUtilityFunctions</span><span class="o">.</span><span class="n">compute_satellite_footprint_speed_with_EF_vectors</span><span class="p">(</span>
            <span class="n">_gmat_r_ef</span><span class="p">,</span> <span class="n">_gmat_v_ef</span><span class="p">)</span>
        <span class="n">fp_speed</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">compute_satellite_footprint_speed</span><span class="p">(</span>
            <span class="n">_gmat_r_eci</span><span class="p">,</span> <span class="n">_gmat_v_eci</span><span class="p">)</span>
        <span class="c1"># acceptable error limits of 10 m/s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">_gmat_fp_speed</span><span class="p">,</span> <span class="n">fp_speed</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Test 2 (mid inclination orbit)</span>
        <span class="n">_gmat_r_eci</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">5436.533450168191</span><span class="p">,</span> <span class="o">-</span>
                       <span class="mf">3053.079465330414</span><span class="p">,</span> <span class="mf">3181.636343704307</span><span class="p">]</span>
        <span class="n">_gmat_v_eci</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.114632787950382</span><span class="p">,</span> <span class="o">-</span>
                       <span class="mf">6.244419534847031</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.087510077679621</span><span class="p">]</span>
        <span class="n">_gmat_r_ef</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2028.820780817868</span><span class="p">,</span> <span class="o">-</span><span class="mf">5895.733640536318</span><span class="p">,</span> <span class="mf">3181.856545975942</span><span class="p">]</span>
        <span class="n">_gmat_v_ef</span> <span class="o">=</span> <span class="p">[</span><span class="mf">5.913247918270616</span><span class="p">,</span> <span class="o">-</span>
                      <span class="mf">0.1710549493218195</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.087366758963451</span><span class="p">]</span>
        <span class="n">_gmat_fp_speed</span> <span class="o">=</span> <span class="n">TestGeoUtilityFunctions</span><span class="o">.</span><span class="n">compute_satellite_footprint_speed_with_EF_vectors</span><span class="p">(</span>
            <span class="n">_gmat_r_ef</span><span class="p">,</span> <span class="n">_gmat_v_ef</span><span class="p">)</span>
        <span class="n">fp_speed</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">compute_satellite_footprint_speed</span><span class="p">(</span>
            <span class="n">_gmat_r_eci</span><span class="p">,</span> <span class="n">_gmat_v_eci</span><span class="p">)</span>
        <span class="c1"># acceptable error limits of 10 m/s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">_gmat_fp_speed</span><span class="p">,</span> <span class="n">fp_speed</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Test (retrograde high inclination orbit)</span>
        <span class="n">_gmat_r_eci</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">2138.840731205298</span><span class="p">,</span> <span class="o">-</span>
                       <span class="mf">4957.003244328315</span><span class="p">,</span> <span class="mf">4455.724313987103</span><span class="p">]</span>
        <span class="n">_gmat_v_eci</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">3.12197717174031</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.798411634168159</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.7243556677441</span><span class="p">]</span>
        <span class="n">_gmat_r_ef</span> <span class="o">=</span> <span class="p">[</span><span class="mf">4493.108372866067</span><span class="p">,</span> <span class="o">-</span>
                      <span class="mf">2992.792499467348</span><span class="p">,</span>  <span class="mf">4455.914070627137</span><span class="p">]</span>
        <span class="n">_gmat_v_ef</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.959015709181303</span><span class="p">,</span> <span class="o">-</span>
                      <span class="mf">4.08021854816618</span><span class="p">,</span>  <span class="o">-</span><span class="mf">5.724173608651788</span><span class="p">]</span>
        <span class="n">_gmat_fp_speed</span> <span class="o">=</span> <span class="n">TestGeoUtilityFunctions</span><span class="o">.</span><span class="n">compute_satellite_footprint_speed_with_EF_vectors</span><span class="p">(</span>
            <span class="n">_gmat_r_ef</span><span class="p">,</span> <span class="n">_gmat_v_ef</span><span class="p">)</span>
        <span class="n">fp_speed</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">compute_satellite_footprint_speed</span><span class="p">(</span>
            <span class="n">_gmat_r_eci</span><span class="p">,</span> <span class="n">_gmat_v_eci</span><span class="p">)</span>
        <span class="c1"># acceptable error limits of 10 m/s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">_gmat_fp_speed</span><span class="p">,</span> <span class="n">fp_speed</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Test (retrograde mid-incinaton orbit)</span>
        <span class="n">_gmat_r_eci</span> <span class="o">=</span> <span class="p">[</span><span class="mf">74.22234833534203</span><span class="p">,</span> <span class="o">-</span><span class="mf">6234.715809034727</span><span class="p">,</span> <span class="mf">3181.63634370431</span><span class="p">]</span>
        <span class="n">_gmat_v_eci</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">5.965142343040525</span><span class="p">,</span> <span class="o">-</span>
                       <span class="mf">2.15690945716741</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.087510077679617</span><span class="p">]</span>
        <span class="n">_gmat_r_ef</span> <span class="o">=</span> <span class="p">[</span><span class="mf">6146.925885818154</span><span class="p">,</span> <span class="o">-</span><span class="mf">1044.708013320701</span><span class="p">,</span>  <span class="mf">3181.80566992428</span><span class="p">]</span>
        <span class="n">_gmat_v_ef</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.9763805839389828</span><span class="p">,</span> <span class="o">-</span>
                      <span class="mf">6.703558863610055</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.087302022035398</span><span class="p">]</span>
        <span class="n">_gmat_fp_speed</span> <span class="o">=</span> <span class="n">TestGeoUtilityFunctions</span><span class="o">.</span><span class="n">compute_satellite_footprint_speed_with_EF_vectors</span><span class="p">(</span>
            <span class="n">_gmat_r_ef</span><span class="p">,</span> <span class="n">_gmat_v_ef</span><span class="p">)</span>
        <span class="n">fp_speed</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">compute_satellite_footprint_speed</span><span class="p">(</span>
            <span class="n">_gmat_r_eci</span><span class="p">,</span> <span class="n">_gmat_v_eci</span><span class="p">)</span>
        <span class="c1"># acceptable error limits of 10 m/s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">_gmat_fp_speed</span><span class="p">,</span> <span class="n">fp_speed</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_latlonalt_To_Cartesian</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># Test, trivial case with point at (0 deg,0 deg,0 km)</span>
        <span class="n">p_vec</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">latlonalt_To_Cartesian</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">6378.137</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Test, trivial case with point at (0 deg, 90 deg,0 km)</span>
        <span class="n">p_vec</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">latlonalt_To_Cartesian</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">6378.137</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Test, trivial case with point at (0 deg, -90 deg,0 km)</span>
        <span class="n">p_vec</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">latlonalt_To_Cartesian</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">-</span><span class="mf">6378.137</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Test, trivial case with point at (0 deg, -90 deg,100 km)</span>
        <span class="n">p_vec</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">latlonalt_To_Cartesian</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">-</span><span class="mf">6378.137</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Test, trivial case with point at (90 deg, 90 deg,100 km)</span>
        <span class="n">p_vec</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">latlonalt_To_Cartesian</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mf">6378.137</span> <span class="o">+</span> <span class="mi">500</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Test, trivial case with point at (40 deg, 270 deg,100 km) and point at (40 deg, -90 deg,100 km) (both coords a off the same point)</span>
        <span class="n">p_vec1</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">latlonalt_To_Cartesian</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">270</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="n">p_vec2</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">latlonalt_To_Cartesian</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p_vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p_vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec1</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">p_vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

<div class="viewcode-block" id="TestGeoUtilityFunctions.test_latlonaltGeodetic_To_Cartesian"><a class="viewcode-back" href="../tests.html#test_util.TestGeoUtilityFunctions.test_latlonaltGeodetic_To_Cartesian">[docs]</a>    <span class="k">def</span> <span class="nf">test_latlonaltGeodetic_To_Cartesian</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Validating using &#39;GMAT R2018a 64bit&#39; as external reference.         </span>
<span class="sd">            Generate some latitude, longitude and corresponding [X,Y,Z] position (in EF frame) of a object in GMAT. </span>
<span class="sd">            Check with the generated Cartesian position vector of the instrupy.GeoUtilityFunctions.latlonalt_To_Cartesian(...).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Test case 1, positive lat, positive lon</span>
        <span class="n">p_vec</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">latlonaltGeodetic_To_Cartesian</span><span class="p">(</span>
            <span class="mf">65.8772312763883</span><span class="p">,</span>  <span class="mf">102.0971826243001</span><span class="p">,</span> <span class="mf">643.382903131308</span><span class="p">)</span>
        <span class="n">_gmat_p_vec</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">602.9227650102</span><span class="p">,</span> <span class="mf">2813.05830480065</span><span class="p">,</span> <span class="mf">6385.563708800454</span><span class="p">]</span>
        <span class="c1"># acceptable error limits of 1 km</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">_gmat_p_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">_gmat_p_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">_gmat_p_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Test case 2, positive lat, negative lon</span>
        <span class="n">p_vec</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">latlonaltGeodetic_To_Cartesian</span><span class="p">(</span>
            <span class="mf">39.70771912759876</span><span class="p">,</span> <span class="o">-</span><span class="mf">33.66699237384308</span><span class="p">,</span> <span class="mf">630.5515018592132</span><span class="p">)</span>
        <span class="n">_gmat_p_vec</span> <span class="o">=</span> <span class="p">[</span><span class="mf">4493.108372866067</span><span class="p">,</span> <span class="o">-</span>
                       <span class="mf">2992.792499467348</span><span class="p">,</span> <span class="mf">4455.914070627137</span><span class="p">]</span>
        <span class="c1"># acceptable error limits of 1 km</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">_gmat_p_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">_gmat_p_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">_gmat_p_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Test case 3, negative lat, positive lon</span>
        <span class="n">p_vec</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">latlonaltGeodetic_To_Cartesian</span><span class="p">(</span>
            <span class="o">-</span><span class="mf">15.57990628688177</span><span class="p">,</span> <span class="mf">128.1073197882878</span><span class="p">,</span>  <span class="mf">631.6338423255838</span><span class="p">)</span>
        <span class="n">_gmat_p_vec</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">4167.949699384632</span><span class="p">,</span>
                       <span class="mf">5314.18497094466</span><span class="p">,</span> <span class="o">-</span><span class="mf">1871.641779273967</span><span class="p">]</span>
        <span class="c1"># acceptable error limits of 1 km</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">_gmat_p_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">_gmat_p_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">_gmat_p_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Test case 4, negative lat, negative lon</span>
        <span class="n">p_vec</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">latlonaltGeodetic_To_Cartesian</span><span class="p">(</span>
            <span class="o">-</span><span class="mf">68.9408803669571</span><span class="p">,</span>  <span class="o">-</span><span class="mf">93.36510673726006</span><span class="p">,</span>  <span class="mf">640.3777836151294</span><span class="p">)</span>
        <span class="n">_gmat_p_vec</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">148.4295520342744</span><span class="p">,</span> <span class="o">-</span>
                       <span class="mf">2524.319956760156</span><span class="p">,</span> <span class="o">-</span><span class="mf">6527.213550924283</span><span class="p">]</span>
        <span class="c1"># acceptable error limits of 1 km</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">_gmat_p_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">_gmat_p_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">_gmat_p_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestGeoUtilityFunctions.test_geo2eci"><a class="viewcode-back" href="../tests.html#test_util.TestGeoUtilityFunctions.test_geo2eci">[docs]</a>    <span class="k">def</span> <span class="nf">test_geo2eci</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Truth data from `IDL Astronomy Users Library &lt;https://idlastro.gsfc.nasa.gov/ftp/pro/astro/geo2eci.pro&gt;`_, on which the </span>
<span class="sd">            python function being tested is also written.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># intersection of the equator and Greenwich&#39;s meridian on 2002/03/09 21:21:21.021</span>
        <span class="n">sample</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">geo2eci</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mf">2452343.38982663</span><span class="p">)</span>
        <span class="n">truth</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">3902.9606</span><span class="p">,</span> <span class="mf">5044.5548</span><span class="p">,</span> <span class="mf">0.0000000</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">sample</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">truth</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">places</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">sample</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">truth</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">places</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">sample</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">truth</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">places</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestGeoUtilityFunctions.test_compute_sun_zenith"><a class="viewcode-back" href="../tests.html#test_util.TestGeoUtilityFunctions.test_compute_sun_zenith">[docs]</a>    <span class="k">def</span> <span class="nf">test_compute_sun_zenith</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Truth data from https://www.esrl.noaa.gov/gmd/grad/solcalc/</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">time_JDUT1</span> <span class="o">=</span> <span class="mf">2452343.38982663</span>  <span class="c1"># 2002/03/09 21:21:21.021</span>
        <span class="n">pos_km</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">geo2eci</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span>  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">time_JDUT1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">compute_sun_zenith</span><span class="p">(</span>
            <span class="n">time_JDUT1</span><span class="p">,</span> <span class="n">pos_km</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># cause it is night</span>

        <span class="n">time_JDUT1</span> <span class="o">=</span> <span class="mf">2452343.000000</span>  <span class="c1"># 2002/03/09 12:00:00.000</span>
        <span class="n">pos_km</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">geo2eci</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span>  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">time_JDUT1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">compute_sun_zenith</span><span class="p">(</span>
            <span class="n">time_JDUT1</span><span class="p">,</span> <span class="n">pos_km</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="mi">90</span><span class="o">-</span><span class="mf">84.82</span><span class="p">),</span> <span class="n">places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">time_JDUT1</span> <span class="o">=</span> <span class="mf">2458619.133333</span>  <span class="c1"># A.D. 2019 May 15 15:12:00.0</span>
        <span class="n">pos_km</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">geo2eci</span><span class="p">(</span>
            <span class="p">[</span><span class="mf">61.217</span><span class="p">,</span>  <span class="o">-</span><span class="mf">149.9</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">time_JDUT1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">compute_sun_zenith</span><span class="p">(</span>
            <span class="n">time_JDUT1</span><span class="p">,</span> <span class="n">pos_km</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="mi">90</span><span class="o">-</span><span class="mf">11.44</span><span class="p">),</span> <span class="n">places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>    </div>

<div class="viewcode-block" id="TestGeoUtilityFunctions.test_JD2GMST"><a class="viewcode-back" href="../tests.html#test_util.TestGeoUtilityFunctions.test_JD2GMST">[docs]</a>    <span class="k">def</span> <span class="nf">test_JD2GMST</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Truth data is from David A. Vallado,&quot;Fundamentals of Astrodynamics and Applications&quot;, 4th ed, page after index titled julian Data Values.</span>
<span class="sd">            The table gives the GMST in degrees, hence is converted into hours for testing the intrupy.GeoUtilityFunctions.JD2GMST(...) function.</span>
<span class="sd">            Note that in the table the JD is specified at 12h UT, while GMST is at 0h UT. Take this into account.</span>
<span class="sd">            For example, for the date 2000 Jan 1 12h UT, the table reads the JD as 2451545. Since the GMST is specified at 0h UT (on the same day), the corresponding</span>
<span class="sd">            JD to be input is 2451544.5, corresponding to the date 2000 Jan 1 0h UT.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">JD2GMST</span><span class="p">(</span>
            <span class="mf">2451544.5</span><span class="p">),</span> <span class="mf">99.9677947</span> <span class="o">*</span> <span class="p">(</span><span class="mi">24</span><span class="o">/</span><span class="mi">360</span><span class="p">),</span> <span class="n">places</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># row corresponding to year 2000</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">JD2GMST</span><span class="p">(</span>
            <span class="mf">2415020.5</span><span class="p">),</span> <span class="mf">100.1837764</span> <span class="o">*</span> <span class="p">(</span><span class="mi">24</span><span class="o">/</span><span class="mi">360</span><span class="p">),</span> <span class="n">places</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># row corresponding to year 1900</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">JD2GMST</span><span class="p">(</span>
            <span class="mf">2458119.5</span><span class="p">),</span> <span class="mf">100.5992406</span> <span class="o">*</span> <span class="p">(</span><span class="mi">24</span><span class="o">/</span><span class="mi">360</span><span class="p">),</span> <span class="n">places</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># row corresponding to year 2018</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">JD2GMST</span><span class="p">(</span>
            <span class="mf">2466154.5</span><span class="p">),</span> <span class="mf">100.2728782</span> <span class="o">*</span> <span class="p">(</span><span class="mi">24</span><span class="o">/</span><span class="mi">360</span><span class="p">),</span> <span class="n">places</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># row corresponding to year 2040 (Leap year)</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot; Truth data from https://www.celnav.de/longterm.htm.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">JD2GMST</span><span class="p">(</span>
            <span class="mf">2458542.127859</span><span class="p">),</span> <span class="mf">1.5460</span><span class="p">,</span> <span class="n">places</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># 2019/02/27 15:04:07 UT, after 12h UT test</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">JD2GMST</span><span class="p">(</span>
            <span class="mf">2459823.582662</span><span class="p">),</span> <span class="mf">0.665478055555556</span><span class="p">,</span> <span class="n">places</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># 2022/09/01 01:59:02 UT, before 12h UT test</span></div>

    <span class="k">def</span> <span class="nf">test_find_closest_value_in_array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">find_closest_value_in_array</span><span class="p">(</span>
            <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">],</span> <span class="mi">9</span><span class="p">),</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">find_closest_value_in_array</span><span class="p">(</span>
            <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">],</span> <span class="mi">25</span><span class="p">),</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">MathUtilityFunctions</span><span class="o">.</span><span class="n">find_closest_value_in_array</span><span class="p">(</span>
            <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">],</span> <span class="mi">0</span><span class="p">),</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<div class="viewcode-block" id="TestGeoUtilityFunctions.test_SunVector_ECIeq"><a class="viewcode-back" href="../tests.html#test_util.TestGeoUtilityFunctions.test_SunVector_ECIeq">[docs]</a>    <span class="k">def</span> <span class="nf">test_SunVector_ECIeq</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Truth data from running Matlab script :code:`sun.m` to compute Sun vector available as companion to </span>
<span class="sd">            David A.Vallado, Fundamental of Astrodynamics and Applications, 4th ed.</span>
<span class="sd">            Acceptable deviation is kept as 0.1km.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># A.D. 2006 Apr 2, 0 UT1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">SunVector_ECIeq</span><span class="p">(</span>
            <span class="mf">2453827.5</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">146186212.986846</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">SunVector_ECIeq</span><span class="p">(</span>
            <span class="mf">2453827.5</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">28788976.3117029</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">SunVector_ECIeq</span><span class="p">(</span>
            <span class="mf">2453827.5</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> 	<span class="mf">12481063.6450839</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>

        <span class="c1"># A.D. 2019 Feb 27, 15:56:00.0 UT1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">SunVector_ECIeq</span><span class="p">(</span>
            <span class="mf">2458542.163889</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">138092570.424158</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">SunVector_ECIeq</span><span class="p">(</span>
            <span class="mf">2458542.163889</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="o">-</span><span class="mf">49238069.9169012</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">SunVector_ECIeq</span><span class="p">(</span>
            <span class="mf">2458542.163889</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span>	<span class="o">-</span><span class="mf">21344772.5319679</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestGeoUtilityFunctions.test_checkLOSavailability"><a class="viewcode-back" href="../tests.html#test_util.TestGeoUtilityFunctions.test_checkLOSavailability">[docs]</a>    <span class="k">def</span> <span class="nf">test_checkLOSavailability</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Truth data from running Matlab script :code:`sight.m` to compute SUn vector available as companion to </span>
<span class="sd">            David A.Vallado, Fundamental of Astrodynamics and Applications, 4th ed.           </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">checkLOSavailability</span><span class="p">(</span>
            <span class="p">[</span><span class="o">-</span><span class="mf">4464.696</span><span class="p">,</span> <span class="o">-</span><span class="mf">5102.509</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">5740.323</span><span class="p">,</span> <span class="mf">3189.068</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mf">6378.137</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">checkLOSavailability</span><span class="p">(</span>
            <span class="p">[</span><span class="o">-</span><span class="mf">4464.696</span><span class="p">,</span> <span class="o">-</span><span class="mf">5102.509</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">4464.696</span><span class="p">,</span> <span class="o">-</span><span class="mf">5102.509</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="mf">6378.137</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">checkLOSavailability</span><span class="p">(</span>
            <span class="p">[</span><span class="o">-</span><span class="mf">4464.696</span><span class="p">,</span> <span class="o">-</span><span class="mf">5102.509</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">7464.696</span><span class="p">,</span> <span class="mf">102.509</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="mf">6378.137</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">test_calculate_derived_satellite_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># Test for cases where the input satellite position, time is equal to derived satellite position, time</span>

        <span class="n">tObs_JDUT1</span> <span class="o">=</span> <span class="mf">100.0</span>
        <span class="n">obs_position_km</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">obs_vel_vec_kmps</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">6.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">target_position_km</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6378</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">derived_coords</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">calculate_derived_satellite_coords</span><span class="p">(</span>
            <span class="n">tObs_JDUT1</span><span class="p">,</span> <span class="n">obs_position_km</span><span class="p">,</span> <span class="n">obs_vel_vec_kmps</span><span class="p">,</span> <span class="n">target_position_km</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_obsTime_JDUT1&quot;</span><span class="p">],</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_obs_pos_km&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_range_vec_km&quot;</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_alt_km&quot;</span><span class="p">],</span> <span class="mi">700</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_incidence_angle_rad&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">tObs_JDUT1</span> <span class="o">=</span> <span class="mf">100.0</span>
        <span class="n">obs_position_km</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">obs_vel_vec_kmps</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">6.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">target_position_km</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6378</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">derived_coords</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">calculate_derived_satellite_coords</span><span class="p">(</span>
            <span class="n">tObs_JDUT1</span><span class="p">,</span> <span class="n">obs_position_km</span><span class="p">,</span> <span class="n">obs_vel_vec_kmps</span><span class="p">,</span> <span class="n">target_position_km</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_obsTime_JDUT1&quot;</span><span class="p">],</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_obs_pos_km&quot;</span><span class="p">],</span> <span class="p">[</span>
                         <span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_range_vec_km&quot;</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_alt_km&quot;</span><span class="p">],</span> <span class="mi">700</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_incidence_angle_rad&quot;</span><span class="p">],</span> <span class="mf">0.015679201843266006</span><span class="p">)</span>

        <span class="n">tObs_JDUT1</span> <span class="o">=</span> <span class="mf">100.0</span>
        <span class="n">obs_position_km</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">obs_vel_vec_kmps</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">6.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">target_position_km</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6378</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">derived_coords</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">calculate_derived_satellite_coords</span><span class="p">(</span>
            <span class="n">tObs_JDUT1</span><span class="p">,</span> <span class="n">obs_position_km</span><span class="p">,</span> <span class="n">obs_vel_vec_kmps</span><span class="p">,</span> <span class="n">target_position_km</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_obsTime_JDUT1&quot;</span><span class="p">],</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_obs_pos_km&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_range_vec_km&quot;</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_alt_km&quot;</span><span class="p">],</span> <span class="mi">700</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_incidence_angle_rad&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">tObs_JDUT1</span> <span class="o">=</span> <span class="mf">100.0</span>
        <span class="n">obs_position_km</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">obs_vel_vec_kmps</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">6.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">target_position_km</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6378</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
        <span class="n">derived_coords</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">calculate_derived_satellite_coords</span><span class="p">(</span>
            <span class="n">tObs_JDUT1</span><span class="p">,</span> <span class="n">obs_position_km</span><span class="p">,</span> <span class="n">obs_vel_vec_kmps</span><span class="p">,</span> <span class="n">target_position_km</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_obsTime_JDUT1&quot;</span><span class="p">],</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_obs_pos_km&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_range_vec_km&quot;</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_alt_km&quot;</span><span class="p">],</span> <span class="mi">700</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_incidence_angle_rad&quot;</span><span class="p">],</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span>
            <span class="mi">100</span><span class="p">,</span> <span class="mi">700</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">)</span><span class="o">/</span><span class="mf">6378.137</span><span class="p">)),</span> <span class="n">places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># note that look angle of truth data is approximate</span>

        <span class="c1"># Test for cases where the input satellite position, time is different from derived satellite position, time</span>

        <span class="n">tObs_JDUT1</span> <span class="o">=</span> <span class="mf">100.0</span>
        <span class="n">obs_position_km</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">obs_vel_vec_kmps</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">6.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">target_position_km</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6378</span><span class="p">,</span> <span class="mf">6.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">derived_coords</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">calculate_derived_satellite_coords</span><span class="p">(</span>
            <span class="n">tObs_JDUT1</span><span class="p">,</span> <span class="n">obs_position_km</span><span class="p">,</span> <span class="n">obs_vel_vec_kmps</span><span class="p">,</span> <span class="n">target_position_km</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_obsTime_JDUT1&quot;</span><span class="p">],</span> <span class="mi">101</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_obs_pos_km&quot;</span><span class="p">],</span> <span class="p">[</span>
                         <span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">,</span> <span class="mf">6.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_range_vec_km&quot;</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_alt_km&quot;</span><span class="p">],</span> <span class="mi">700</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1"># approximate truth data since Earth curvature is ignored</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
            <span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_incidence_angle_rad&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="n">places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">tObs_JDUT1</span> <span class="o">=</span> <span class="mf">100.0</span>
        <span class="n">obs_position_km</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">obs_vel_vec_kmps</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">6.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">target_position_km</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6378</span><span class="p">,</span> <span class="mf">13.0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
        <span class="n">derived_coords</span> <span class="o">=</span> <span class="n">GeoUtilityFunctions</span><span class="o">.</span><span class="n">calculate_derived_satellite_coords</span><span class="p">(</span>
            <span class="n">tObs_JDUT1</span><span class="p">,</span> <span class="n">obs_position_km</span><span class="p">,</span> <span class="n">obs_vel_vec_kmps</span><span class="p">,</span> <span class="n">target_position_km</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_obsTime_JDUT1&quot;</span><span class="p">],</span> <span class="mi">102</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_obs_pos_km&quot;</span><span class="p">],</span> <span class="p">[</span>
                         <span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">,</span> <span class="mf">13.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_range_vec_km&quot;</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_alt_km&quot;</span><span class="p">],</span> <span class="mi">700</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">derived_coords</span><span class="p">[</span><span class="s2">&quot;derived_incidence_angle_rad&quot;</span><span class="p">],</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">700</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">6378</span><span class="o">+</span><span class="mi">700</span><span class="p">)</span><span class="o">/</span><span class="mf">6378.137</span><span class="p">)),</span> <span class="n">places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestFileUtilityFunctions"><a class="viewcode-back" href="../tests.html#test_util.TestFileUtilityFunctions">[docs]</a><span class="k">class</span> <span class="nc">TestFileUtilityFunctions</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_from_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># Test empty JSON string</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">FileUtilityFunctions</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="p">{})</span>

        <span class="c1"># Test one string field</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">FileUtilityFunctions</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;name&quot;: &quot;Maple&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="s2">&quot;Maple&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>  <span class="nb">str</span><span class="p">)</span>

        <span class="c1"># Test erroneous JSON format</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="n">FileUtilityFunctions</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;{&quot;name&quot;: }&#39;</span><span class="p">)</span>

        <span class="c1"># Test two string fields</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">FileUtilityFunctions</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;name&quot;: &quot;Maple&quot;, &quot;@type&quot;: &quot;Syrup&quot;}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="s2">&quot;Maple&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;@type&quot;</span><span class="p">],</span> <span class="s2">&quot;Syrup&quot;</span><span class="p">)</span>

        <span class="c1"># Test two string fields, one number field</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">FileUtilityFunctions</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;name&quot;: &quot;Maple&quot;, &quot;@type&quot;: &quot;Syrup&quot;, &quot;volume&quot;: 10.4}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="s2">&quot;Maple&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;@type&quot;</span><span class="p">],</span> <span class="s2">&quot;Syrup&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">],</span>  <span class="mf">10.4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">],</span>  <span class="nb">float</span><span class="p">)</span>

        <span class="c1"># Test two string fields, one number field, one list (str) field</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">FileUtilityFunctions</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;name&quot;: &quot;Maple&quot;, &quot;@type&quot;: &quot;Syrup&quot;, &quot;volume&quot;: 10.4, &quot;places&quot;: [&quot;CA&quot;,&quot;TX&quot;,&quot;WA&quot;]}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="s2">&quot;Maple&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;@type&quot;</span><span class="p">],</span> <span class="s2">&quot;Syrup&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">],</span>  <span class="mf">10.4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;places&quot;</span><span class="p">],</span>  <span class="p">[</span><span class="s2">&quot;CA&quot;</span><span class="p">,</span> <span class="s2">&quot;TX&quot;</span><span class="p">,</span> <span class="s2">&quot;WA&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;places&quot;</span><span class="p">],</span>  <span class="nb">list</span><span class="p">)</span>

        <span class="c1"># Test two string fields, one number field, one list (value) field</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">FileUtilityFunctions</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;name&quot;: &quot;Maple&quot;, &quot;@type&quot;: &quot;Syrup&quot;, &quot;volume&quot;: 10.4, &quot;batches&quot;: [2011,2018,2023]}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="s2">&quot;Maple&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;@type&quot;</span><span class="p">],</span> <span class="s2">&quot;Syrup&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">],</span>  <span class="mf">10.4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;batches&quot;</span><span class="p">],</span>  <span class="p">[</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">2018</span><span class="p">,</span> <span class="mi">2023</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;batches&quot;</span><span class="p">],</span>  <span class="nb">list</span><span class="p">)</span>

        <span class="c1"># Test passing of a dictionary</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Maple&#39;</span><span class="p">,</span> <span class="s1">&#39;@type&#39;</span><span class="p">:</span> <span class="s1">&#39;Syrup&#39;</span><span class="p">,</span>
                <span class="s1">&#39;batches&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">2018</span><span class="p">,</span> <span class="mi">2023</span><span class="p">]}</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">FileUtilityFunctions</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="s2">&quot;Maple&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;@type&quot;</span><span class="p">],</span> <span class="s2">&quot;Syrup&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;batches&quot;</span><span class="p">],</span>  <span class="p">[</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">2018</span><span class="p">,</span> <span class="mi">2023</span><span class="p">])</span>

        <span class="c1"># Test nested json fields</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">FileUtilityFunctions</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span>
            <span class="s1">&#39;{&quot;name&quot;: &quot;Maple&quot;, &quot;@type&quot;: &quot;Syrup&quot;, &quot;volume&quot;: 10.4, &quot;nutrition&quot;: { &quot;Fat&quot;: 0, &quot;Sodium&quot;: 2, &quot;Protein&quot;: 0}}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="s2">&quot;Maple&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;@type&quot;</span><span class="p">],</span> <span class="s2">&quot;Syrup&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;nutrition&quot;</span><span class="p">],</span>  <span class="p">{</span>
                         <span class="s1">&#39;Fat&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Sodium&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Protein&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;nutrition&quot;</span><span class="p">][</span><span class="s2">&quot;Fat&quot;</span><span class="p">],</span>  <span class="mi">0</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="TestAntenna"><a class="viewcode-back" href="../tests.html#test_util.TestAntenna">[docs]</a><span class="k">class</span> <span class="nc">TestAntenna</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span> <span class="c1">#TODO</span>
    <span class="k">pass</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, BAERI.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>